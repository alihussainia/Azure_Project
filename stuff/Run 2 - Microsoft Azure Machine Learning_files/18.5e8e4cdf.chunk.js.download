(this["webpackJsonp@mlworkspace/portal"]=this["webpackJsonp@mlworkspace/portal"]||[]).push([[18],{"+7EU":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c}));var r=a("WYY7"),n=a("ft9a"),s=a("ERkP"),o=a("XpkB");function i(e){return{key:"mount",text:o.b.ComputeDetails.Data.CommandBar.Mount,ariaLabel:o.b.ComputeDetails.Data.CommandBar.Mount,iconProps:{iconName:e.hideAddIcon?void 0:r.a.Add},subMenuProps:{items:[{key:"mountFromAzureStorage",text:o.b.ComputeDetails.Data.CommandBar.MountFromOptions.AzureStorage,title:o.b.ComputeDetails.Data.CommandBar.MountFromOptions.AzureStorage,ariaLabel:o.b.ComputeDetails.Data.CommandBar.MountFromOptions.AzureStorage,iconProps:{iconName:r.a.AzureAPIManagement},onClick:e.mountFromAzureStorageOnClick},{key:"mountFromFileDataset",text:o.b.ComputeDetails.Data.CommandBar.MountFromOptions.FileDataset,title:o.b.ComputeDetails.Data.CommandBar.MountFromOptions.FileDataset,ariaLabel:o.b.ComputeDetails.Data.CommandBar.MountFromOptions.FileDataset,iconProps:{iconName:r.a.ExploreData},onClick:e.mountFromFileDatasetOnClick}]}}}var c=function(e){var t,a=s.useMemo((function(){return i(e)}),[e,o.b]),r={menuProps:{items:null===(t=a.subMenuProps)||void 0===t?void 0:t.items},iconProps:a.iconProps};return s.createElement(n.a,r,a.text)}},"+IlW":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return g}));var r,n=a("kgxj"),s=a("jeyl"),o=a("yiDG"),i=a("d/Yy"),c=a("jfzg"),u=a("u+9x"),l=a("WwJx"),d=a("nsO7"),p=a.n(d),m=a("ERkP"),h=a.n(m),f=a("XpkB");!function(e){e.Upload="Upload",e.Browse="Browse"}(r||(r={}));var g=function(e){if(!e.datastore||!e.datastore.name||"AzureBlob"!==e.datastore.dataStoreType||!e.datastore.azureStorageSection||!e.accessToken&&!e.datastore.azureStorageSection.credential)return h.a.createElement(h.a.Fragment,null);var t=h.a.useContext(c.a),a=h.a.useContext(u.a),d=h.a.useContext(l.a),g=e.datastore,b=Object(m.useMemo)((function(){return new i.BlobDatastoreAccessClient(a,d,e.datastore,e.accessToken)}),[e.datastore,e.accessToken,a,d]),D=Object(m.useMemo)((function(){var a=f.b.Data.DatasetCreateByUploadPage.SasWarnings,n=[];e.warnFor!==r.Upload||b.canWrite()||n.push(a.WritePermissions),b.canRead()||n.push(p.a.get(a.Blob,"".concat(e.warnFor,".ReadPermission")));var i=b.getSignedResourceTypes(),c=b.getSignedResource();if(i.includes("o")||["c","b"].includes(c)||n.push(p.a.get(a.Blob,"".concat(e.warnFor,".ResourceType"))),b.isExpired()&&n.push(f.b.Data.DatasetCreateByUploadPage.SasWarnings.Expired),n.length>0&&n.unshift(f.b.Data.DatasetCreateByUploadPage.SasWarnings.Message),0!==n.length){var u={text:f.b.Data.DatasetCreateByUploadPage.SasWarnings.EditDatastore.replace("{datastoreName}",g.name),onClick:function(e){t.navigateTo(s.a.DatastoreEditRoute,{datastoreName:g.name})}};return{title:f.b.Data.DatasetCreateByUploadPage.SasWarnings.Title,message:n.join("\n"),messageType:o.c.Warning,unDismissable:!0,link:u}}}),[e.datastore,e.warnFor,e.accessToken,b,t]);return D?h.a.createElement(n.MessageBar,{messages:[D]}):h.a.createElement(h.a.Fragment,null)}},"+JrC":function(e,t){},"+TjT":function(e,t,a){"use strict";a.d(t,"c",(function(){return r.a})),a.d(t,"b",(function(){return n.a})),a.d(t,"e",(function(){return s.a})),a.d(t,"f",(function(){return o.a})),a.d(t,"g",(function(){return i.a})),a.d(t,"i",(function(){return c.a})),a.d(t,"a",(function(){return u.a})),a.d(t,"d",(function(){return l.a})),a.d(t,"h",(function(){return h}));var r=a("WTLv"),n=a("1jtT"),s=a("le+F"),o=a("60PN"),i=a("7xHg"),c=a("PTrN"),u=a("lwe2"),l=a("B8aL"),d=a("ERkP"),p=a.n(d),m=a("YmqU"),h=function(e){var t=function(e){return e.map((function(e){return{key:e.Name,text:e.Title,data:e}}))}(e.options);return p.a.createElement(m.a,Object.assign({},e,{options:t,onChange:function(t){e.onChange(t)}}))}},"+ftt":function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var r=a("Czhu"),n=a("zygG"),s=a("9fIP"),o=a("MMYH"),i=a("8K1b"),c=a("AqVP"),u=a("ERkP"),l=a.n(u),d=a("XpkB"),p=a("o9Up"),m=a("k4Cn"),h=a("64Li"),f=a("0epw"),g=a("1vim"),b=function(e){var t=d.b.Datastore.DatastoreEditPage.AzureBlob.ContainerField;return g.a.isRequired(e,t.ValidationErrors.Required)},D=function(e){var t=d.b.Datastore.DatastoreEditPage.AzureDataLakeGen2.FileSystemsField;return g.a.isRequired(e,t.ValidationErrors.Required)},S=a("kgxj"),v=a("mGHB"),C=a("su4/"),y=function(e){switch(e){case"AzureBlob":return"blob";case"AzureFile":return"file";case"AzureDataLakeGen2":return"dfs";default:return}},P=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,"Manual"===this.props.accountSelectionMethod&&l.a.createElement(f.a,{subType:y(this.props.datastoreType),disabled:this.props.disabled}),this.props.regionMessage&&this.props.regionMessage.length>0&&l.a.createElement(S.MessageBar,{messages:this.props.regionMessage,onDismiss:this.props.onRegionMessageDismiss}),"Manual"!==this.props.accountSelectionMethod&&this.renderByStorageType())}},{key:"renderByStorageType",value:function(){switch(this.props.datastoreType){case"AzureBlob":return l.a.createElement(m.a,{label:d.b.Datastore.DatastoreEditPage.AzureBlob.ContainerField.label,subscriptionId:this.props.subscriptionId,accountName:this.props.accountName,disabled:this.props.disabled});case"AzureDataLakeGen2":return l.a.createElement(m.a,{label:d.b.Datastore.DatastoreEditPage.AzureDataLakeGen2.FileSystemsField.label,subscriptionId:this.props.subscriptionId,accountName:this.props.accountName,disabled:this.props.disabled});case"AzureFile":return l.a.createElement(h.a,{disabled:this.props.disabled});default:return!1}}}],[{key:"getInitialFormValues",value:function(){return{}}},{key:"validate",value:function(e){switch(e.accountSelectionMethod){case"Manual":return{storageUrl:f.a.validate(e.storageUrl)};case"AzureSubscription":switch(e.datastoreType){case"AzureBlob":return{storageServiceName:b(e.storageServiceName)};case"AzureDataLakeGen2":return{storageServiceName:D(e.storageServiceName)};case"AzureFile":return{storageServiceName:h.a.validate(e.storageServiceName)};default:return{}}default:return{}}}},{key:"getPayloadProperties",value:function(e){var t={},a=function(e){var t=p.a.getAuthSection(e);if(t.credentialType)switch(t.credentialType){case"ClientCredentials":t.clientCredentials.resourceUri=t.clientCredentials.resourceUri||"https://storage.azure.com";break;case"ServicePrincipal":t.resourceUri=t.resourceUri||"https://storage.azure.com"}return t}(e);switch(e.accountSelectionMethod){case"Manual":if(e.subscriptionId&&(t.subscriptionId=e.subscriptionId),e.resourceGroupName&&(t.resourceGroup=e.resourceGroupName),!e.storageUrl)return;var s=new URL(e.storageUrl),o=s.hostname.split(".",2),i=s.hostname.replace("".concat(o[0],".").concat(o[1],"."),"");t.accountName=o[0],t.containerName=s.pathname.substr(1),t.endpoint=i,t.protocol=s.protocol.replace(":","");break;case"AzureSubscription":if(!(e.subscriptionId&&e.resourceName&&e.storageServiceName))return;var c=e.resourceName.split(":"),u=Object(n.a)(c,2);t.accountName=u[0],t.resourceGroup=u[1],t.containerName=e.storageServiceName,t.subscriptionId=e.subscriptionId;break;default:return}switch("WorkspaceSystemAssignedIdentity"===a.serviceDataAccessAuthIdentity&&(t.serviceDataAccessAuthIdentity=a.serviceDataAccessAuthIdentity,(!a.credential||a.credential.length<1)&&(a.credentialType="None",e.credentialType="None")),a.credentialType){case"AccountKey":t.accountKey=a.credential;break;case"Sas":t.isSas=!0,t.sasToken=a.credential}return Object(r.a)(Object(r.a)(Object(r.a)({},t),a),{},{credentialType:a.credentialType})}},{key:"getReadOnlyInfo",value:function(e){var t=e.azureStorageSection,a={};if(t){var r=Object(v.c)(e);a[d.b.Datastore.DatastoreEditPage.CommonFields.SubscriptionId.label]=t.subscriptionId||"",a[d.b.Datastore.DatastoreEditPage.CommonFields.ResourceGroup.label]=t.resourceGroup||"",a[d.b.Datastore.DatastoreEditPage.AzureStorage.ProtocolField.label]=t.protocol||"",a[d.b.Datastore.DatastoreEditPage.AzureStorage.EndpointField.label]=t.endpoint||"",a[d.b.Datastore.DatastoreEditPage.AzureStorage.AccountNameField.label]=l.a.createElement(C.a,{storageObj:t,datastoreName:e.name}),a[function(e){switch(e){case"AzureBlob":return d.b.Datastore.DatastoreEditPage.AzureBlob.ContainerField.label;case"AzureFile":return d.b.Datastore.DatastoreEditPage.AzureFile.FileShareField.label;case"AzureDataLakeGen2":return d.b.Datastore.DatastoreEditPage.AzureDataLakeGen2.FileSystemsField.label;default:return d.b.Datastore.DatastoreEditPage.AzureStorage.ContainerNameField.label}}(e.dataStoreType)]=t.containerName||"","ClientCredentials"===t.credentialType&&t.clientCredentials&&(a[d.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ResourceURLField.label]=t.clientCredentials.resourceUri||"",a[d.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.AuthorityURLField.label]=t.clientCredentials.authorityUrl||""),a[d.b.Datastore.DatastoreEditPage.AzureStorage.DataUrl.label]=r}return a}}]),a}(l.a.Component)},"/1ND":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("ERkP"),n=a.n(r),s=a("XpkB"),o=a("B8aL"),i=a("lwe2"),c=function(e){var t=e.columnType,a=e.disabled,r=e.onChange;return n.a.createElement(o.a,{label:"",title:"",options:i.a.VisibleToTheUser,selectedOption:t,disabled:a,ariaLabel:s.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.ChangeType,onChange:r})}},"/ZmK":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("ERkP"),c=a("o+dN"),u=a("XpkB"),l=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=[{key:"AzureSubscription",text:u.b.Datastore.DatastoreEditPage.CommonFields.AccountSelectionMethod.AzureSubscription.label},{key:"Manual",text:u.b.Datastore.DatastoreEditPage.CommonFields.AccountSelectionMethod.Manual.label}];return i.createElement(c.a,{name:"accountSelectionMethod",label:u.b.Datastore.DatastoreEditPage.CommonFields.AccountSelectionMethod.title,options:e,horizontal:!0,disabled:this.props.disabled})}}]),a}(i.Component)},"/zZg":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return B}));var r,n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("ERkP"),p=a.n(d),m=a("cqFV"),h=a("2Rx3"),f=a("yiDG"),g=a("r3ai"),b=a("67aH"),D=a("DvOE"),S=a("1eWE"),v=a("sOq8"),C=a("Ippe"),y=a("fGUH"),P=a("D0BB"),k=a("oziZ"),O=a("ZYzI"),F=a("NiBv"),E=a("JywU"),T=a("mGHB"),w=a("yjIu"),j=a("XpkB"),x=a("J7yX"),N=a("z50s"),M=(a("CUgy"),a("nsO7")),A=a.n(M);function I(e){return A.a.isNil(e)||"function"!==typeof e?function(){return p.a.createElement(p.a.Fragment,null)}:e}!function(e){e.New="New",e.Existing="Existing",e.Selected="Selected"}(r||(r={}));var R=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).datastoreClient=void 0,n.onDatastoreCreateFormValuesChange=function(e){n.props.onDatastoreCreateFormValuesChange&&n.props.onDatastoreCreateFormValuesChange(e)},n.renderExistingDatastoreChoice=function(e,t){var a=I(t);if(n.props.datastoreSelectionChoice!==r.Existing)return a(e);var s,o=n.props,i=o.disableExistingDatastoreField,c=o.allowedDatastoreTypes;return n.props.hideSqlDatastoreNotSupportedMessage||n.props.datasetType!==F.a.datasetTypes().FileDataset.Enum||(s=j.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.NoSqlDatasetsForFileDatasets),p.a.createElement(p.a.Fragment,null,p.a.createElement("div",{className:"previous-datastore-choice-group"},a(e),s&&p.a.createElement(m.a,{className:"sqlDisabledDescription",text:s}),p.a.createElement(N.a,{onCancel:n.props.onCancel,defaultDatastore:n.props.defaultDatastore,allowedDatastoreTypes:c,disabled:i,onSelect:n.onExistingDatastoreChange,disableAzureMlGlobalDatasets:!0,refreshToken:n.state.listRefreshToken})))},n.renderCreateDatastoreChoice=function(e,t){var a=I(t);return n.props.datastoreSelectionChoice!==r.New?a(e):p.a.createElement("div",null,a(e),p.a.createElement("div",{className:"new-datastore-form"},p.a.createElement(O.a,{createSource:"DatasetCreate",datastoreTypeCreateOptions:n.props.allowedDatastoreTypes,disableDatastoreType:n.props.disableDatastoreTypeInNewForm,primaryButtonText:j.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.CreateDatastoreButtonText,width:"100%",onCancel:n.props.onCancel,dispatchPayload:n.dispatchPayload,onChange:n.onDatastoreCreateFormValuesChange,initialFormValues:n.props.datastoreCreateFormValues,creatingDatastore:n.state.creatingDatastore})))},n.onDatastoreSelectionChoiceChange=function(e){n.props.onDatastoreSelectionChoiceChange(e)},n.addRoleAssignments=function(){var e=Object(o.a)(s.a.mark((function e(t,a){var r,o,i,c,u,l,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.workspaceContext.identityPrincipalId){e.next=5;break}return r={title:j.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.ErrorTitle,message:j.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.ErrorMessage.LegacyWorkspace,messageType:f.c.Error,isUserError:!0},n.onCreateNewDatastoreError(r),n.setState({creatingDatastore:!1}),e.abrupt("return",!1);case 5:o=new g.a(n.props.authContext),i=0,c=Object.values(t);case 7:if(!(i<c.length)){e.next=21;break}return u=c[i],l={properties:{roleDefinitionId:"/subscriptions/".concat(n.props.workspaceContext.subscriptionId)+"/resourceGroups/".concat(n.props.workspaceContext.resourceGroupName)+"/providers/Microsoft.MachineLearningServices/workspaces/"+"".concat(n.props.workspaceContext.workspaceName)+"/providers/Microsoft.Authorization/roleDefinitions/".concat(u),principalId:n.props.workspaceContext.identityPrincipalId}},e.next=12,o.addRoleAssignment(a,l);case 12:if((d=e.sent)&&(d.status!==b.a.Error||d.errorResponse&&409===d.errorResponse.status)){e.next=18;break}return p={title:j.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.ErrorTitle,message:j.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.ErrorMessage.NoPermission,messageType:f.c.Error,isUserError:!0},n.onCreateNewDatastoreError(p),n.setState({creatingDatastore:!1}),e.abrupt("return",!1);case 18:i++,e.next=7;break;case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.dispatchPayload=function(){var e=Object(o.a)(s.a.mark((function e(t,a,r){var o,i,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({creatingDatastore:!0}),!t.name){e.next=11;break}return e.next=4,n.datastoreClient.exists(t.name);case 4:if((o=e.sent).status!==b.a.Ok||!o.data||!o.data.body){e.next=11;break}return i={messageType:f.c.Error,title:j.b.Datastore.NewDatastoreDialog.CreateFailedMessage,message:j.b.Datastore.NewDatastoreDialog.CommonFields.DatastoreName.ValidationErrors.DatastoreExists.replace("{datastoreName}",t.name),errorCode:"DatastoreCreateFailed DatasetCreate DatastoreExists",isUserError:!0},n.onCreateNewDatastoreError(i),r&&r(),n.setState({creatingDatastore:!1}),e.abrupt("return");case 11:if(!a){e.next=29;break}e.t0=t.dataStoreType,e.next="AzureBlob"===e.t0?15:"AzureDataLakeGen2"===e.t0||"AzureDataLake"===e.t0||"AzureSqlDatabase"===e.t0?22:29;break;case 15:return e.next=17,n.addRoleAssignments([D.a.Reader,D.a.StorageBlobDataReader],t);case 17:if(e.sent||!r){e.next=21;break}return r(),e.abrupt("return");case 21:return e.abrupt("break",29);case 22:return e.next=24,n.addRoleAssignments([D.a.Reader],t);case 24:if(e.sent||!r){e.next=28;break}return r(),e.abrupt("return");case 28:return e.abrupt("break",29);case 29:return e.next=31,n.datastoreClient.createDatastore(t);case 31:(c=e.sent).status===b.a.Ok?(n.props.onDatastoreCreateFormValuesChange&&n.props.onDatastoreCreateFormValuesChange(void 0),n.onCreateNewDatastoreSuccess(t)):(u={messageType:f.c.Error,title:j.b.Datastore.NewDatastoreDialog.CreateFailedMessage,message:j.b.Datastore.NewDatastoreDialog.CreateFailedMessage},c.error&&(u=E.a.addErrorCodeAndIsUserError("DatasetCreate DatastoreCreation",Object(x.a)(c.error,j.b.Data.Common.ErrorTitlePlaceholder),["Invalid","DataSourceNotFound"])),n.onCreateNewDatastoreError(u)),r&&r(),w.a.trackEvent(S.a.DatastoreCreateResult,void 0,{status:"".concat(c.status),type:"".concat(t.dataStoreType)}),n.setState({creatingDatastore:!1});case 36:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),n.onCreateNewDatastoreSuccess=function(e){n.setState({listRefreshToken:{}}),n.props.onExistingDatastoreChange(e),n.props.onCreateNewDatastoreSuccess()},n.onCreateNewDatastoreError=function(e){n.props.onCreateNewDatastoreError(e)},n.onExistingDatastoreChange=function(e){n.props.onExistingDatastoreChange(e)},n.state={creatingDatastore:!1,listRefreshToken:{}},n.datastoreClient=new v.a(n.props.authContext,n.props.workspaceContext),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.isValidating||this.state.creatingDatastore,t=j.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.SelectDatastore,a=this.props.datastore?Object(T.a)(this.props.datastore,this.props.defaultDatastore):t.CurrentlySelectedDatastoreDefaultValue,n="".concat(t.CurrentlySelectedDatastore," ").concat(a),s=[{key:r.Selected,text:n}];return this.props.disableExistingDatastoreField||s.push({key:r.Existing,text:j.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.ExistingDatastore,onRenderField:this.renderExistingDatastoreChoice}),!this.props.disableDatastoreTypeInNewForm&&this.props.authorizationContext.hasPermission(C.a.DatastoresWrite)&&s.push({key:r.New,text:j.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.NewDatastore,onRenderField:this.renderCreateDatastoreChoice}),1===s.length?p.a.createElement(m.a,{text:n}):p.a.createElement("div",{className:"datastore-selection-choice"},p.a.createElement("div",{id:"datastore-selection-error"},this.props.datastoreChoiceErrorMessage),p.a.createElement(h.a,{label:j.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.SelectDatastore.Label,selectedKey:this.props.datastoreSelectionChoice,onOptionSelection:this.onDatastoreSelectionChoiceChange,required:!0,disabled:e,options:s}))}}]),a}(p.a.Component),B=Object(y.a)(Object(P.a)(Object(k.a)(R)))},"0TDM":function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var r=a("zygG"),n=a("9fIP"),s=a("MMYH"),o=a("8K1b"),i=a("AqVP"),c=a("nsO7"),u=a.n(c),l=a("ERkP"),d=a.n(l),p=a("60PN"),m=a("1jtT"),h=a("XpkB"),f=a("B8aL"),g=function(e){return d.a.createElement(f.a,{label:h.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.FileFormat.Label,title:h.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.FileFormat.Title,disabled:e.disabled,onChange:e.onChange,options:p.a.FileSettingsOptions,selectedOption:e.selectedOption})},b=a("q6lQ"),D=a("wrNU"),S=a("TiAf"),v=a("xdYj"),C=a("WCmz"),y=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).containerRef=d.a.createRef(),r.shouldSetFocus=!0,r.state={formFields:C.a.mapToFormFields(e.datasetRequest)},r}return Object(s.a)(a,[{key:"render",value:function(){var e=C.a.mapToFormFields(this.props.datasetRequest);return d.a.createElement("div",{className:"dataset-file-settings",ref:this.containerRef},d.a.createElement(g,{selectedOption:e.fileFormat,onChange:this.getChangeEvent("fileFormat")}),d.a.createElement(b.a,{selectedDelimiter:e.delimiter,customDelimiter:e.customDelimiter,fileFormat:e.fileFormat,onDelimiterChange:this.getChangeEvent("delimiter"),onCustomDelimiterChange:this.getChangeEvent("customDelimiter")}),d.a.createElement(D.a,{selectedOption:e.encoding,fileFormat:e.fileFormat,onChange:this.getChangeEvent("encoding")}),d.a.createElement(S.a,{selectedOption:e.headers,fileFormat:e.fileFormat,onChange:this.getChangeEvent("headers")}),C.a.isSkipRowsSupported(e)&&d.a.createElement(v.a,{selectedOption:e.skipRows,skipRowCount:e.skipRowsCount,fileFormat:e.fileFormat,onChange:this.getChangeEvent("skipRows"),onSkipRowCountChange:this.getChangeEvent("skipRowsCount")}))}},{key:"componentDidUpdate",value:function(){if(this.containerRef.current&&this.shouldSetFocus){var e=this.containerRef.current.querySelector("div.ms-Dropdown");e&&e instanceof Element&&(e.focus(),this.shouldSetFocus=!1)}}},{key:"getChangeEvent",value:function(e){var t=this;return function(a){var n,s=t.props.datasetRequest,o=C.a.fileSettingsReducer(s,e,a,t.props.contextProps),i=Object(r.a)(o,2),c=i[0],l=i[1];c!==t.props.datasetRequest&&(l&&(c.schema=void 0),(n=c)&&n.general&&n.general.sourcePropertiesOverride&&n.general.sourcePropertiesOverride.dataSourceType===p.a.Delimited.Name&&u.a.isNil(n.general.sourcePropertiesOverride.delimiter)&&(n.general.sourcePropertiesOverride.delimiter=m.a.Comma.Delimiter),t.props.onChange(c,l))}}}]),a}(d.a.Component)},"0epw":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("ERkP"),c=a("/58v"),u=a("1vim"),l=a("LsED"),d=a("3nK6"),p=a("XpkB"),m=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(c.a,{name:"storageUrl",label:p.b.Datastore.DatastoreEditPage.AzureStorage.URLField.label,placeholder:"".concat(p.b.Datastore.DatastoreEditPage.AzureStorage.URLField.protocol,"://{").concat(p.b.Datastore.DatastoreEditPage.AzureStorage.URLField.AccountNameVariable,"}.").concat(this.props.subType,".").concat(l.a.config.azureStorageApiEndpoint,"/{").concat(p.b.Datastore.DatastoreEditPage.AzureStorage.URLField.ContainerNameVariable,"}"),required:!0,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return u.a.isRequired(e,p.b.Datastore.DatastoreEditPage.AzureStorage.URLField.ValidationErrors.Required)||u.a.matchesRegEx(e,d.a.Regex.uri,p.b.Datastore.DatastoreEditPage.AzureStorage.URLField.ValidationErrors.RegeX)}}]),a}(i.Component)},"0qJz":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("QdS/"),n=a("ERkP"),s=a.n(n),o=a("XpkB"),i=function(e){return s.a.createElement(r.a,{name:"datasetDescription",label:o.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Description.Label,placeholder:o.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Description.Placeholder,title:o.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Description.Title,value:e.description,onChange:function(t,a){e.onChange(a||"")},multiline:!0,errorMessage:e.errorMessage,disabled:e.disabled,autoAdjustHeight:e.autoAdjustHeight})}},"1EQY":function(e,t,a){"use strict";a.d(t,"a",(function(){return r.a})),a.d(t,"c",(function(){return n.a})),a.d(t,"e",(function(){return s.a})),a.d(t,"g",(function(){return h})),a.d(t,"f",(function(){return f.a})),a.d(t,"b",(function(){return g.a})),a.d(t,"d",(function(){return C}));var r=a("wln6"),n=a("QdRb"),s=a("0qJz"),o=a("fGyu"),i=a("LWCo"),c=a("QdS/"),u=a("HjZW"),l=a("ERkP"),d=a.n(l),p=a("WYY7"),m=a("XpkB"),h=function(e){var t=e.tags;(!t.length||t[t.length-1].key||t[t.length-1].value)&&(t=[].concat(Object(o.a)(e.tags),[{key:"",value:""}]));var a=function(a){t.splice(a,1),e.onChange(t)},r=function(r,n,s){if(s)n?t[r].key=s:t[r].value=s;else if(n?t[r].key="":t[r].value="",!t[r].key&&!t[r].value)return void a(r);e.onChange(t)};return d.a.createElement(i.a,{tokens:{childrenGap:10}},t.map((function(e,t){return function(e,t,a,r){var n=0===t?m.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Tags.KeyLabel:"",s=0===t?m.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Tags.ValueLabel:"";return d.a.createElement(i.a.Item,null,d.a.createElement(i.a,{horizontal:!0,horizontalAlign:"space-around",verticalAlign:"end"},d.a.createElement(c.a,{style:{width:"250px"},label:n,onChange:function(e,r){return a(t,!0,r)},value:e.key,autoAdjustHeight:!0}),":",d.a.createElement(c.a,{style:{width:"250px"},label:s,onChange:function(e,r){return a(t,!1,r)},value:e.value,autoAdjustHeight:!0}),d.a.createElement(u.a,{iconProps:{iconName:p.a.Delete},onClick:function(){return r(t)}})))}(e,t,r,a)})))};var f=a("jSBj"),g=a("Y2j4"),b=a("9fIP"),D=a("MMYH"),S=a("8K1b"),v=a("AqVP"),C=function(e){Object(S.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(D.a)(a,[{key:"render",value:function(){return d.a.createElement(c.a,{name:"datasheetUrl",label:m.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Datasheet.Label,placeholder:m.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Datasheet.Placeholder,title:m.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Datasheet.Title,required:this.props.required,onGetErrorMessage:this.props.onGetErrorMessage,disabled:this.props.disabled})}}]),a}(d.a.PureComponent)},"1U7Y":function(e,t,a){"use strict";a.r(t);var r=a("ewNC");a.d(t,"ADLS1Component",(function(){return r.a})),a.d(t,"StoreName",(function(){return r.b}));var n=a("QkrK");a.d(t,"AzurePostgresMySqlComponent",(function(){return n.a})),a.d(t,"DatabaseName",(function(){return n.b})),a.d(t,"ServerName",(function(){return n.c}));var s=a("2asv");a.d(t,"getAuthSection",(function(){return s.b})),a.d(t,"AzureSQLComponent",(function(){return s.a}));var o=a("NLg6");a.d(t,"AzureContainersField",(function(){return o.a})),a.d(t,"AzureFileSharesField",(function(){return o.b})),a.d(t,"StorageURL",(function(){return o.e})),a.d(t,"AzureStorageAccountName",(function(){return o.c})),a.d(t,"AzureStorageComponent",(function(){return o.d}));var i=a("AI5r");for(var c in i)["default","ADLS1Component","StoreName","AzurePostgresMySqlComponent","DatabaseName","ServerName","getAuthSection","AzureSQLComponent","AzureContainersField","AzureFileSharesField","StorageURL","AzureStorageAccountName","AzureStorageComponent"].indexOf(c)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(c)},"1jtT":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("XpkB"),c=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e,n,s){var o;return Object(r.a)(this,a),(o=t.call(this,e,n)).delimiter=void 0,o.delimiter=s||"",o}return Object(n.a)(a,null,[{key:"Custom",get:function(){return new a("Custom",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Delimiter.Custom)}},{key:"Comma",get:function(){return new a("Comma",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Delimiter.Comma,",")}},{key:"Tab",get:function(){return new a("Tab",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Delimiter.Tab,"\t")}},{key:"Space",get:function(){return new a("Space",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Delimiter.Space," ")}},{key:"SemiColon",get:function(){return new a("SemiColon",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Delimiter.SemiColon,";")}},{key:"Colon",get:function(){return new a("Colon",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Delimiter.Colon,"|")}},{key:"Equals",get:function(){return new a("Equals",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Delimiter.Equals,"=")}},{key:"All",get:function(){return[a.Comma,a.Tab,a.Space,a.SemiColon,a.Colon,a.Equals,a.Custom]}},{key:"DefaultSelection",get:function(){return a.Comma}}]),Object(n.a)(a,[{key:"Delimiter",get:function(){return this.delimiter}}]),a}(a("WTLv").a)},"1khS":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var r=a("ERkP"),n=a("kjXB"),s=a("d0cs"),o=function(){var e=function(){var e=r.useContext(n.a);return Object(s.cb)({split:{fontSize:"25px",fontWeight:"lighter",paddingLeft:e.themeStyles.spacing.m,paddingRight:e.themeStyles.spacing.m}})}();return r.createElement("div",{className:e.split},"|")},i=function(e){return{key:e?"split-".concat(e):"split",onRender:function(e){return e.renderedInOverflow?null:r.createElement(o,null)}}}},"1qZ0":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return u}));var r,n=a("nsO7"),s=a.n(n),o=a("XpkB");!function(e){e.AzureSqlDatabase="Microsoft.Sql/servers/databases",e.AzureStorage="Microsoft.Storage/storageAccounts",e.AzurePostgreSql="Microsoft.DBforPostgreSQL/servers",e.AzureMySql="Microsoft.DBforMySQL/servers",e.AzureDataLake="Microsoft.DataLakeStore/accounts"}(r||(r={}));var i=function(){return{AzureBlob:{resourceType:r.AzureStorage,resourceLabel:o.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.StorageAccount.label},AzureFile:{resourceType:r.AzureStorage,resourceLabel:o.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.StorageAccount.label},AzureDataLakeGen2:{resourceType:r.AzureStorage,resourceLabel:o.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.StoreName.label},AzureDataLake:{resourceType:r.AzureDataLake,resourceLabel:o.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.StoreName.label},AzurePostgreSql:{resourceType:r.AzurePostgreSql,resourceLabel:o.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.ServerName.label},AzureMySql:{resourceType:r.AzureMySql,resourceLabel:o.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.ServerName.label},AzureSqlDatabase:{resourceType:r.AzureSqlDatabase,resourceLabel:o.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.ServerDatabase.label}}},c=function(e){var t=e.id&&e.id.split("/")[4];return{key:"".concat(e.name||"",":").concat(t),text:"".concat(e.name||""," (").concat(t,")"),ariaLabel:"".concat(e.name||""," (").concat(t,")")}},u=function(e){return function(t){if(!t.name)return!1;switch(e){case"AzureBlob":return!s.a.isNil(t.kind)&&t.kind.indexOf("Storage")>-1;case"AzureFile":return!s.a.isNil(t.kind)&&["Storage","StorageV2"].includes(t.kind);case"AzureDataLakeGen2":return"StorageV2"===t.kind;case"AzureSqlDatabase":return!t.name.endsWith("/master");default:return!0}}}},"1wVX":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a("9fIP"),n=a("MMYH"),s=a("yiDG"),o=a("JywU"),i=a("XpkB"),c=a("J7yX"),u=function(){function e(t){Object(r.a)(this,e),this.source=void 0,this.source=t}return Object(n.a)(e,[{key:"getParseResponseErrorMessages",value:function(e,t){return e?[o.a.addErrorCodeAndIsUserError("".concat(this.source," ParseDataset"),Object(c.b)(e,t),["UserError","Error"],e?e.statusCode:void 0)]:[this.defaultParseMessage(t)]}},{key:"getParseResponseErrorMessagesForUpdate",value:function(e,t){return e?[o.a.addErrorCodeAndIsUserError("".concat(this.source," ParseDataset"),Object(c.a)(e,t,{errorOverride:"ServiceErrorCodeUpdateSchemaOverrides"}),["UserError","Error"],e?e.statusCode:void 0)]:[this.defaultParseMessage(t)]}},{key:"defaultParseMessage",value:function(e){return o.a.addErrorCodeAndIsUserError("".concat(this.source," ParseDataset"),{title:e,messageType:s.c.Error,message:i.b.Data.Common.Errors.Generic.ParseFailedMessage},["UserError","Error"])}}]),e}()},"2CWc":function(e,t,a){"use strict";a.d(t,"e",(function(){return g})),a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return D})),a.d(t,"c",(function(){return v})),a.d(t,"d",(function(){return C}));var r=a("zjfJ"),n=a("Czhu"),s=a("HSAa"),o=a("nsO7"),i=a.n(o),c=a("fN3Q"),u=a("2P7l"),l=a("G3Bc"),d={"Microsoft.DPrep.GetDatastoreFilesBlock":function(e){var t={};if(e.arguments.datastores&&Array.isArray(e.arguments.datastores)&&e.arguments.datastores.length>0){var a=e.arguments.datastores[0];t.datastoreName=a.datastoreName,t.relativePath=a.path}return t},"Microsoft.DPrep.ReadDatastoreSqlBlock":function(e){var t={};if(e.arguments.datastore){var a=e.arguments.datastore;t.datastoreName=a.datastoreName,t.sqlDataPath={queryTimeout:e.arguments.queryTimeout,sqlQuery:a.path}}return t},"Microsoft.DPrep.GetFilesBlock":function(e){var t={};return e.arguments.path&&e.arguments.path.resourceDetails&&Array.isArray(e.arguments.path.resourceDetails)&&e.arguments.path.resourceDetails.length>0&&(t.httpUrl=e.arguments.path.resourceDetails[0].path),t}},p=["UTF8","ISO88591","LATIN1","ASCII","UTF16","UTF32","UTF8BOM","WINDOWS1252"],m=["None","Ungrouped","Grouped","ConstantGrouped"],h=["None","FirstFile","AllFiles"],f={"Microsoft.DPrep.ParseDelimitedBlock":function(e){return{sourceProperties:{delimiter:e.arguments.separator,encoding:p[e.arguments.fileEncoding],skipLinesCount:e.arguments.skipRows,promoteHeaders:!!e.arguments.columnHeadersMode},general:{handleQuotedLineBreaks:e.arguments.handleQuotedLineBreaks||!1,promoteHeadersMode:m[e.arguments.columnHeadersMode],commentLineCharacter:e.arguments.commentLineCharacter,skipMode:h[e.arguments.skipRowsMode]}}},"Microsoft.DPrep.ParseFixedWidthColumns":function(e){return{sourceProperties:{encoding:p[e.arguments.fileEncoding],skipLinesCount:e.arguments.skipRows,promoteHeaders:!!e.arguments.columnHeadersMode},general:{promoteHeadersMode:m[e.arguments.columnHeadersMode],commentLineCharacter:e.arguments.commentLineCharacter,skipMode:h[e.arguments.skipRowsMode]}}},"Microsoft.DPrep.ParsePlainTextBlock":function(e){return{sourceProperties:{encoding:p[e.arguments.fileEncoding],skipLinesCount:e.arguments.skipRows,promoteHeaders:!!e.arguments.columnHeadersMode},general:{promoteHeadersMode:m[e.arguments.columnHeadersMode],commentLineCharacter:e.arguments.commentLineCharacter,skipMode:h[e.arguments.skipRowsMode]}}},"Microsoft.DPrep.ReadParquetFileBlock":function(e){return{}},"Microsoft.DPrep.ReadExcelBlock":function(e){return{sourceProperties:{promoteHeaders:e.arguments.useColumnHeaders,skipLinesCount:e.arguments.skipRows},excel:{sheetName:e.arguments.sheetName}}},"Microsoft.DPrep.ParseJsonLinesBlock":function(e){return{sourceProperties:{encoding:p[e.arguments.fileEncoding]},jsonLines:{partitionSize:e.arguments.partitionSize}}},JSONFile:function(e){return{sourceProperties:{encoding:p[e.arguments.fileEncoding]},json:{flattenNestedArrays:e.arguments.flattenNestedArrays}}}};function g(e){return{steps:JSON.parse(e).blocks.map((function(e){return e.isEnabled=!0,e}))}}function b(e,t){return{id:t||Object(c.v4)(),type:"Microsoft.DPrep.ExpressionFilterBlock",arguments:e,isEnabled:!0}}function D(e,t){var a=g(e);return t.forEach((function(e){return a.steps.push(b(e))})),JSON.stringify({blocks:a.steps})}var S=function(e){var t=function(e){var t=e.find((function(e){return"Microsoft.DPrep.AddColumnsFromPartitionFormatBlock"===e.type}));if(t&&t.arguments&&t.arguments.partitionFormat&&"string"===typeof t.arguments.partitionFormat&&!l.a.validatePathPattern(t.arguments.partitionFormat)){for(var a=new RegExp("{[^{|}]*}"),r=[],n=t.arguments.partitionFormat,s=a.exec(n);null!==s;)r.push(s[0].slice(1,-1)),n=-1!==n.search("".concat(s[0],"/"))?n.replace("".concat(s[0],"/"),""):n.replace(s[0],""),s=a.exec(n);return r.map((function(e){var t={},a=e.indexOf(":");return a>0?(t.columnName=e.substr(0,a),t.type=u.a[u.a.Date],t.argumentsProperty=[e.substr(a+1)]):(t.columnName=e,t.type=u.a[u.a.String]),t}))}return[]}(e).reduce((function(e,t){return t.columnName&&!e[t.columnName]?Object(n.a)(Object(n.a)({},e),{},Object(r.a)({},t.columnName,t)):e}),function(e){var t=e.find((function(e){return"Microsoft.DPrep.SetColumnTypesBlock"===e.type})),a={};return t&&t.arguments&&t.arguments.columnConversion&&Array.isArray(t.arguments.columnConversion)&&(a=t.arguments.columnConversion.filter((function(e){return e.column&&e.column.details&&e.column.details.selectedColumn&&"string"===typeof e.column.details.selectedColumn})).reduce((function(e,t){return Object(n.a)(Object(n.a)({},e),{},Object(r.a)({},t.column.details.selectedColumn,{columnName:t.column.details.selectedColumn,type:u.a[t.typeProperty]||"Unknown",argumentsProperty:t.typeArguments&&t.typeArguments.dateTimeFormats}))}),{})),a}(e));return Object.values(t)},v=function(e){var t=function(e){var t=Object(s.a)(e);return!i.a.isEmpty(t)&&t.blocks&&Array.isArray(t.blocks)?t.blocks.filter((function(e){return e.id&&e.type})):[]}(e),a={};return t.length>0&&((a=function(e){var t=e.find((function(e){return e.type&&e.arguments&&f[e.type]})),a={};return t&&((a=f[t.type](t)).sourceProperties=Object(n.a)(Object(n.a)({},a.sourceProperties),{},{dataSourceType:t.type})),a}(t)).dataPath=function(e){var t=function(e){var t=e.find((function(e){return"Microsoft.DPrep.AddColumnsFromPartitionFormatBlock"===e.type}));return t&&t.arguments?{partitionFormat:t.arguments.partitionFormat,partitionFormatIgnoreError:t.arguments.ignoreError}:{}}(e),a=e.find((function(e){return e.type&&e.arguments&&d[e.type]}));if(a)return Object(n.a)(Object(n.a)({},d[a.type](a)),t)}(t),a.columnsToRemove=function(e){var t=e.find((function(e){return"Microsoft.DPrep.DropColumnsBlock"===e.type})),a=[];return t&&t.arguments&&t.arguments.columns&&t.arguments.columns.details&&t.arguments.columns.details.selectedColumns&&Array.isArray(t.arguments.columns.details.selectedColumns)&&(a=t.arguments.columns.details.selectedColumns.filter((function(e){return"string"===typeof e}))),a}(t),a.schema=S(t)),a};function C(e,t){return g(e).steps.find((function(e){return e.type===t}))}},"2P7l":function(e,t,a){"use strict";var r,n;a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return n})),function(e){e[e.EmailAddress=0]="EmailAddress",e[e.GeographicCoordinate=1]="GeographicCoordinate",e[e.Ipv4Address=2]="Ipv4Address",e[e.Ipv6Address=3]="Ipv6Address",e[e.UsPhoneNumber=4]="UsPhoneNumber",e[e.ZipCode=5]="ZipCode"}(r||(r={})),function(e){e[e.String=0]="String",e[e.Boolean=1]="Boolean",e[e.Integer=2]="Integer",e[e.Decimal=3]="Decimal",e[e.Date=4]="Date",e[e.Unknown=5]="Unknown",e[e.Error=6]="Error",e[e.Null=7]="Null",e[e.DataRow=8]="DataRow",e[e.List=9]="List",e[e.Stream=10]="Stream"}(n||(n={}))},"2asv":function(e,t,a){"use strict";var r=a("3ahr");a.d(t,"a",(function(){return r.a})),a.d(t,"b",(function(){return r.b}))},"2qp5":function(e,t,a){"use strict";a.d(t,"a",(function(){return J}));var r=a("fGyu"),n=a("zygG"),s=a("WYY7"),o=a("b+7i"),i=a("V4bT"),c=a("pGjv"),u=a("LuYi"),l=a("uMNk"),d=a("ERkP"),p=a("XpkB"),m=a("+7EU"),h=a("TwvB"),f=a("kgxj"),g=a("sahG"),b=function(e){var t="".concat("","/extensions/data/datasets_registered_datasets.svg");return d.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},d.createElement(f.EmptyResourceNotice,{image:d.createElement(g.a,{src:t,alt:p.b.ComputeDetails.Data.Cta.ImageAlt}),telemetryCustomFields:{componentClassName:"ComputeInstanceMountsCta"},description:{hero:p.b.ComputeDetails.Data.Cta.Hero,body:p.b.ComputeDetails.Data.Cta.Body},callToAction:d.createElement(m.a,e)}))},D=a("VtSi"),S=a.n(D),v=a("QsI/"),C=a("GGXT"),y=a("yiDG"),P=a("btr3"),k=a("Czhu"),O=a("9fIP"),F=a("MMYH"),E=a("8K1b"),T=a("AqVP"),w=a("NQPw"),j=function(e){Object(E.a)(a,e);var t=Object(T.a)(a);function a(e){return Object(O.a)(this,a),t.call(this,e,(function(e,t){return new w.a(e,Object(k.a)({},t))}))}return Object(F.a)(a,[{key:"getTokenStatus",value:function(){var e=Object(v.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendRequest({method:"GET",baseUrl:t,pathTemplate:"/nbip/v1.0/token/status"});case 2:return a=e.sent,e.abrupt("return",a.parsedBody);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createTerminal",value:function(){var e=Object(v.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendRequest({method:"POST",baseUrl:t,pathTemplate:"/api/terminals"});case 2:return a=e.sent,e.abrupt("return",a.parsedBody);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTerminal",value:function(){var e=Object(v.a)(S.a.mark((function e(t,a){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendRequest({method:"GET",baseUrl:t,pathTemplate:"/api/terminals/{terminalName}",pathParameters:{terminalName:a}});case 2:return r=e.sent,e.abrupt("return",r.parsedBody);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteTerminal",value:function(){var e=Object(v.a)(S.a.mark((function e(t,a){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendRequest({method:"DELETE",baseUrl:t,pathTemplate:"/api/terminals/{terminalName}",pathParameters:{terminalName:a}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"listTerminals",value:function(){var e=Object(v.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.sendRequest({method:"GET",baseUrl:t,pathTemplate:"/api/terminals",queryParameters:{_:Date.now()}});case 2:return a=e.sent,e.abrupt("return",a.parsedBody);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(a("sIkw").a),x=a("Xf/8"),N=a("yjIu"),M=function(e){var t,a=d.useState(void 0),r=Object(n.a)(a,2),s=r[0],o=r[1],i=Object(P.a)(j,N.a),c=d.useMemo((function(){return function(e){var t,a,r,n=null===e||void 0===e||null===(t=e.properties)||void 0===t||null===(a=t.properties)||void 0===a||null===(r=a.applications)||void 0===r?void 0:r.find((function(e){return"Jupyter"===e.displayName}));return null===n||void 0===n?void 0:n.endpointUri}(e.compute)}),[e.compute]),u=function(t){var a;o(t),null===(a=e.onGetTokenStatus)||void 0===a||a.call(e,t)};if(Object(x.useAsyncEffect)(Object(v.a)(S.a.mark((function t(){var a,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c){t.next=4;break}null===(a=e.onGetTokenStatus)||void 0===a||a.call(e,void 0),t.next=8;break;case 4:return t.next=6,i.getTokenStatus(c);case 6:r=t.sent,u(r);case 8:case"end":return t.stop()}}),t)}))),[]),!0===s||void 0===s||void 0===c)return d.createElement(d.Fragment,null);var l=null!==(t=e.noTokenMessage)&&void 0!==t?t:p.b.ComputeDetails.CacheUserToken.Authenticate,m="".concat(c,"/nbip/v1.0/token/acquire"),h={messageType:y.c.Warning,title:"",message:p.b.ComputeDetails.CacheUserToken.NoTokenMessage,actions:d.createElement(C.a,{text:l,primary:!1,onClick:function(){var e=window.open(m,"_blank"),t=window.setInterval(Object(v.a)(S.a.mark((function a(){var r;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!1===(null===e||void 0===e?void 0:e.closed)){a.next=6;break}return window.clearInterval(t),a.next=4,i.getTokenStatus(c);case 4:r=a.sent,u(r);case 6:case"end":return a.stop()}}),a)}))),200)}})};return d.createElement(f.MessageBar,{messages:[h]})},A=a("wU4H"),I=a("mYvi"),R=a("in70"),B=a("Co5R"),q=a("LWCo"),z=a("WC4d"),L=a("kLgf"),V=a("E96E"),U=a("mA2Z"),W=a("WwJx"),G=a("1eWE"),H=function(e){var t,a,r,s,o,i=null===(t=e.compute.properties)||void 0===t||null===(a=t.properties)||void 0===a||null===(r=a.applications)||void 0===r?void 0:r.find((function(t){return t.displayName===e.applicationName})),c=e.applicationName,u=!("Running"===(null===(s=e.compute.properties)||void 0===s||null===(o=s.properties)||void 0===o?void 0:o.state)),l=d.useContext(U.a),p=d.useContext(W.a),m=Object(L.a)(l,p.workspaceId,e.applicationName),h=d.useState(void 0),f=Object(n.a)(h,2),g=f[0],b=f[1];if(i){var D=i.endpointUri;return d.createElement(d.Fragment,null,g&&d.createElement(V.a,{onCancel:function(){b(void 0)},onContinue:function(){Object(L.b)(l,p.workspaceId,g.name),window.open(g.uri,"_blank"),b(void 0)}}),d.createElement(z.a,{key:c,disabled:u,href:!u&&m?D:void 0,openNewWindow:!0,onClick:u?void 0:function(){!function(e,t,a,r){switch(e){case"Jupyter":N.a.trackEvent(G.a.Compute_Open_Jupyter);break;case"Jupyter Lab":N.a.trackEvent(G.a.Compute_Open_JupyterLab);break;case"RStudio":N.a.trackEvent(G.a.Compute_Open_RStudio)}!t&&a?b({name:e,uri:a}):r&&a&&r({name:e,uri:a})}(c,m,D)}},c.replace(/\s/g,"")))}return d.createElement(d.Fragment,null)},Q=(a("ELzw"),a("Wgtx")),_=a("iuUd"),Y=function(e){var t="# ".concat(p.b.ComputeDetails.ConsumePanel.SampleCodeListFiles,'\nprint(list.files(path="').concat(e.item.mountedPath,'"))\n\n# ').concat(p.b.ComputeDetails.ConsumePanel.SampleCodeSuggestion,'\n# df = read.csv("').concat(e.item.mountedPath,'/{path_to_file}/{your_file}")\n# print(head(df))'),a=p.b.ComputeDetails.ConsumePanel.SampleCodeTitleR;return d.createElement(_.a,{sampleCode:t,language:"r",headerTitle:a})},X={flexGrow:1,display:"flex",flexDirection:"column",overflowY:"hidden"},K=function(e){var t,a=p.b.ComputeDetails.ConsumePanel.IntroMessage.replace("{mountName}",e.item.name).replace("{computeName}",null!==(t=e.compute.name)&&void 0!==t?t:"").replace("{mountedPath}",e.item.mountedPath),r=p.b.ComputeDetails.ConsumePanel.CopySuggestion.replace("{mountedPath}",e.item.mountedPath),s=d.useMemo((function(){return[{headerText:p.b.ComputeDetails.ConsumePanel.SampleCodeTitlePython,key:"python",content:d.createElement(Q.a,{item:e.item})},{headerText:p.b.ComputeDetails.ConsumePanel.SampleCodeTitleR,key:"r",content:d.createElement(Y,{item:e.item})}]}),[e.item,p.b]),o=d.useState("python"),i=Object(n.a)(o,2),c=i[0],u=i[1];return d.createElement(R.a,{styles:{scrollableContent:X,content:X},isOpen:e.isOpen,onDismiss:e.onDismiss,panelType:B.a.medium,headerText:p.b.ComputeDetails.MountCreate.Wizard.ConsumeHeaderText,closeButtonAriaLabel:p.b.ComputeDetails.MountCreate.Wizard.ClosePanel},d.createElement(q.a,{tokens:{childrenGap:20}},d.createElement(q.a.Item,null,a),d.createElement(q.a.Item,null,d.createElement(f.Pivot,{items:s,selectedKey:c,onLinkClick:function(e){e.props.itemKey&&u(e.props.itemKey)}})),d.createElement(q.a.Item,null,r),d.createElement(q.a.Item,null,d.createElement(q.a,{horizontal:!0,tokens:{childrenGap:10}},["Jupyter Lab","Jupyter","RStudio"].map((function(t){return d.createElement(q.a.Item,{key:t},d.createElement(H,{item:e.item,compute:e.compute,applicationName:t}))}))))))},J=function(e){var t=d.useState(void 0),a=Object(n.a)(t,2),f=a[0],g=a[1],D=d.useState(!1),S=Object(n.a)(D,2),v=S[0],C=S[1],y=d.useState(!1),P=Object(n.a)(y,2),k=P[0],O=P[1],F=d.useState(!1),E=Object(n.a)(F,2),T=E[0],w=E[1],j=d.useState(!1),x=Object(n.a)(j,2),N=x[0],R=x[1],B=d.useState(void 0),q=Object(n.a)(B,2),z=q[0],L=q[1],V=d.useState([]),U=Object(n.a)(V,2),W=U[0],G=U[1],H={mountFromAzureStorageOnClick:function(){C(!0)},mountFromFileDatasetOnClick:function(){O(!0)}},Q=d.useMemo((function(){var t=[Object(m.b)(H),{key:"unmount",text:p.b.ComputeDetails.Data.CommandBar.Unmount,iconProps:{iconName:s.a.Delete},onClick:function(){return w(!0)},disabled:void 0===f},{key:"refresh",text:p.b.ComputeDetails.Data.CommandBar.Refresh,iconProps:{iconName:s.a.Refresh},onClick:e.onRefresh},{key:"consume",text:p.b.ComputeDetails.Data.CommandBar.Consume,iconProps:{iconName:s.a.EditMirrored},onClick:function(){return R(!0)},disabled:void 0===f}];return z||(t[0].disabled=!0,t[1].disabled=!0),t}),[p.b,f,z]),_=d.useMemo(h.a,[p.b]),Y=d.useContext(c.a),X=d.useMemo((function(){return Object(h.b)(e.compute,Y.isEnabled(u.a.Debug))}),[e.compute]),J=function(){C(!1)},Z=function(){O(!1)},$=function(e){G([].concat(Object(r.a)(W),[e])),O(!1),C(!1)},ee=[].concat(Object(r.a)(W),Object(r.a)(X));return d.createElement(d.Fragment,null,T&&f&&d.createElement(o.a,{confirmButtonText:p.b.ComputeDetails.Data.CommandBar.Unmount,additionalContent:p.b.ComputeDetails.Unmount.AdditionalContent,onClose:function(){return w(!1)},onConfirm:function(){},hidden:!1,itemType:f.datasourceType,itemNames:[f.name]}),v&&d.createElement(A.a,{existingMounts:ee,onDone:$,isOpen:v,onCancel:J,onDismiss:J}),k&&d.createElement(I.a,{existingMounts:ee,onDone:$,isOpen:k,onCancel:Z,onDismiss:Z}),N&&f&&d.createElement(K,{item:f,compute:e.compute,isOpen:N,onDismiss:function(){R(!1)}}),d.createElement(M,{compute:e.compute,onGetTokenStatus:function(e){L(e)}}),0===X.length?d.createElement(b,H):d.createElement(i.a,{items:ee,commandItems:Q,selectionMode:l.c.single,columns:_,noResourcesName:p.b.ComputeDetails.Data.NoResourceName,onSelect:function(e){1===(null===e||void 0===e?void 0:e.length)?g(e[0]):g(void 0)}}))}},"32z6":function(e,t,a){"use strict";a.r(t);var r=a("lnmi");a.d(t,"getDatasetTraits",(function(){return r.d})),a.d(t,"hasTrait",(function(){return r.f})),a.d(t,"getColumnTraits",(function(){return r.c})),a.d(t,"getTimeseriesTraitsColumns",(function(){return r.e})),a.d(t,"createRequestTraitProperties",(function(){return r.a})),a.d(t,"validateDatasetTraits",(function(){return r.g})),a.d(t,"createTraitObject",(function(){return r.b}));var n=a("MTaO");for(var s in n)["default","getDatasetTraits","hasTrait","getColumnTraits","getTimeseriesTraitsColumns","createRequestTraitProperties","validateDatasetTraits","createTraitObject"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s)},"3ahr":function(e,t,a){"use strict";a.d(t,"b",(function(){return D})),a.d(t,"a",(function(){return S}));var r=a("zjfJ"),n=a("Czhu"),s=a("zygG"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("kgxj"),d=a("LsED"),p=a("ERkP"),m=a("XpkB"),h=a("o9Up"),f=a("ialG"),g=a("61CZ"),b=a("XJB9"),D=function(e){var t=h.a.getAuthSection(e);if(t.credentialType)switch(t.credentialType){case"ClientCredentials":if(!t.clientCredentials)return;t.clientCredentials.resourceUri=t.clientCredentials.resourceUri||"https://".concat(d.a.config.azureSqlServerEndpointSuffix,"/");break;case"ServicePrincipal":t.resourceUri=t.resourceUri||"https://".concat(d.a.config.azureSqlServerEndpointSuffix,"/")}return t},S=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return p.createElement(p.Fragment,null,"AzureSubscription"!==this.props.accountSelectionMethod&&p.createElement(p.Fragment,null,p.createElement("div",{className:"serverName"},p.createElement("div",{className:"server-name"},p.createElement(g.a,{disabled:this.props.disabled})),p.createElement("div",{className:"suffix"},".",d.a.config.azureSqlServerEndpointSuffix)),p.createElement(b.a,{disabled:this.props.disabled})),this.props.regionMessage&&this.props.regionMessage.length>0&&p.createElement(l.MessageBar,{messages:this.props.regionMessage,onDismiss:this.props.onRegionMessageDismiss}))}}],[{key:"getInitialFormValues",value:function(){return{databaseName:void 0,serverName:void 0}}},{key:"validate",value:function(e){return"Manual"===e.accountSelectionMethod?{databaseName:b.a.validate(e.databaseName),serverName:g.a.validate(e.serverName)}:{}}},{key:"getPayloadProperties",value:function(e){var t=D(e),a={};switch(e.accountSelectionMethod){case"Manual":e.subscriptionId&&(a.subscriptionId=e.subscriptionId),e.resourceGroupName&&(a.resourceGroup=e.resourceGroupName),a.serverName=e.serverName,a.databaseName=e.databaseName;break;case"AzureSubscription":if(e.subscriptionId&&e.resourceName){var r,o=e.resourceName.split(":"),i=Object(s.a)(o,2);r=i[0],a.resourceGroup=i[1];var c=r.split("/"),u=Object(s.a)(c,2);a.serverName=u[0],a.databaseName=u[1],a.subscriptionId=e.subscriptionId}}return Object(n.a)(Object(n.a)(Object(n.a)({},a),t),{},{credentialType:t?t.credentialType:"None"})}},{key:"getReadOnlyInfo",value:function(e){var t,a=m.b.Datastore.DatastoreEditPage,n=e.azureSqlDatabaseSection;return n?(t={},Object(r.a)(t,a.CommonFields.SubscriptionId.label,n.subscriptionId||""),Object(r.a)(t,a.CommonFields.ResourceGroup.label,n.resourceGroup||""),Object(r.a)(t,a.AzurePostgresMySql.ServerNameField.label,p.createElement(f.a,{storageObj:n,datastoreType:e.dataStoreType})),Object(r.a)(t,a.AzurePostgresMySql.DatabaseNameField.label,n.databaseName||""),Object(r.a)(t,a.AzureDataLakeGen1.ResourceURLField.label,n.resourceUri||""),Object(r.a)(t,a.AzureDataLakeGen1.AuthorityURLField.label,n.authorityUrl||""),t):{}}}]),a}(p.Component)},"3nK6":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r={Regex:{uri:"^https?://(www.)?[a-z0-9]+([-.]{1}[a-z0-9]+)*.[a-z]{2,5}(:[0-9]{1,5})?(/.*)?$",uuid4:"^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[4][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$",alphaNumeric:"^[0-9a-zA-Z_]+$",alphaNumericHyphen:"^[0-9a-zA-Z-_]+$",alphaNumericSmallCase:"^[0-9a-z_]+$"},Datastore:{DatastoreName:{MaxLength:a("fvIy").a.MaxDataStoreNameLength}}}},"3rZF":function(e,t,a){"use strict";a.r(t);var r=a("zGTc");for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var s=a("2P7l");a.d(t,"SType",(function(){return s.b})),a.d(t,"FieldType",(function(){return s.a}))},"4js/":function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var r=a("fGyu"),n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("zjfJ"),c=a("Czhu"),u=a("9fIP"),l=a("MMYH"),d=a("8K1b"),p=a("AqVP"),m=a("kgxj"),h=a("1eWE"),f=a("67aH"),g=a("yiDG"),b=a("jeyl"),D=a("LuYi"),S=a("Ippe"),v=a("zQeN"),C=a("fGUH"),y=a("oziZ"),P=a("D0BB"),k=a("/YEa"),O=a("7vdV"),F=a("/kVs"),E=a("fTZT"),T=a("47ii"),w=a("ERkP"),j=a("JywU"),x=a("NiBv"),N=a("yjIu"),M=a("XpkB"),A=a("D+ST"),I=a("J7yX"),R=a("poBQ"),B=a("60PN"),q=a("jk8v"),z=a("1wVX"),L=a("QlF2"),V=a("Q7Ad"),U=a("m7Gs"),W=a("CPUY"),G=a("b6Fk"),H=a("DHBr"),Q=(a("rnZn"),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;Object(u.a)(this,a),(n=t.call(this,e)).validateStep=void 0,n.datasetClient=void 0,n.validateSettingsStep=void 0,n.validateSchemaStep=void 0,n.telemetryProps=void 0,n.wizardRef=w.createRef(),n.errorManager=void 0,n.dismissMessage=function(e){n.setState((function(t){return{errorMessages:t.errorMessages.filter((function(t){return t!==e})),datasetTraitFailureMessages:t.datasetTraitFailureMessages.filter((function(t){return t!==e}))}}))},n.tabularDatasetWizardChildren=function(){return[n.basicInfoFromWebUrlStep(),n.settingsAndPreviewStep(),n.schemaStep(),n.verificationStep()]},n.fileDatasetWizardChildren=function(){return[n.basicInfoFromWebUrlStep(),n.verificationStep()]},n.onDatastoreLoading=function(){n.setState({loadingDatastore:!0})},n.onDatastoreLoaded=function(){n.setState({loadingDatastore:!1})},n.onDataStoreChange=function(e){void 0!==e&&e!==n.state.targetDatastoreForProfiling&&n.setState({targetDatastoreForProfiling:e})},n.onDatastoreStart=function(e){void 0!==e&&n.setState({targetDatastoreForProfiling:e})},n.onSkipValidationCheckboxChange=function(){n.setState((function(e){return{skipValidation:!e.skipValidation,errorMessages:!e.skipValidation&&e.errorMessages.length>0?[]:e.errorMessages,isParseFailed:!!e.skipValidation&&e.isParseFailed}}))},n.unsetWizardErrorState=function(e){n.setState((function(t){return t.stepState[e]===m.WizardStepState.Error?Object(c.a)(Object(c.a)({},t),{},{stepState:Object(c.a)(Object(c.a)({},t.stepState),{},Object(i.a)({},e,m.WizardStepState.CurrentStep))}):null}))},n.onProfileCheckboxChange=function(){n.setState((function(e){return{generateProfileAfterCreation:!e.generateProfileAfterCreation}}))},n.onComputeForProfilingChange=function(e){n.setState({targetComputeForProfiling:e})},n.datasetTraitFailureMessagesChanged=function(e){n.setState({datasetTraitFailureMessages:e})},n.datasetTraitChanged=function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.validateSchemaStep,!e.t0){e.next=5;break}return e.next=4,n.validateSchemaStep();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}n.setState((function(e){return{stepState:Object(c.a)(Object(c.a)({},e.stepState),{},Object(i.a)({},t,m.WizardStepState.Error))}}));case 7:n.setState((function(e){return{traitChangeToggle:!e.traitChangeToggle}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setDatasetRequest=function(e){n.setState((function(t){var a=e(t.datasetRequest);return a===t.datasetRequest?null:{datasetRequest:a}}))},n.onHttpUrlChange=function(e,t){var a=Object(c.a)(Object(c.a)({},n.state.errors),{},{httpUrlError:t}),r=Object(c.a)(Object(c.a)({},n.state.datasetRequest),{},{dataPath:{httpUrl:e}});r.schema=void 0,r.general=void 0,r.columnsToRemove=void 0,n.changeDatasetRequest(r),n.setState((function(e){return{errors:a,traitChangeToggle:!e.traitChangeToggle,datasetPropertyToTraitMap:new Map}}))},n.setSettingsValidateCallback=function(e){n.validateSettingsStep=e},n.setSchemaStepValidateCallback=function(e){n.validateSchemaStep=e},n.changeDatasetRequest=function(e){n.props.onChange(),n.setState({datasetRequest:e})},n.basicDatasetError=function(e){n.setState({errors:e})},n.onCancel=function(){n.trackEvent(h.a.DatasetCreateCancel,{onWizardStep:n.state.currentStepIndex.toString()}),n.props.onDismiss()},n.onDone=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=q.a.Prepare(n.state.datasetRequest,n.state.datasetPropertyToTraitMap),n.createDataset(t);case 2:case"end":return e.stop()}}),e)}))),n.setStepValidateCallback=function(e){n.validateStep=e},n.parseDataset=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState((function(e){return{parsingDataset:e.parsingDataset+1}})),n.datasetClient.abort(),e.next=4,n.datasetClient.parseDataset(t);case 4:if((a=e.sent).status!==f.a.Ok||!a.data){e.next=18;break}if(!a.data.sourceProperties||a.data.sourceProperties.dataSourceType!==B.a.JSON.Name&&a.data.sourceProperties.dataSourceType!==B.a.Excel.Name&&a.data.sourceProperties.dataSourceType!==B.a.Binary.Name){e.next=11;break}a.data.sourceProperties.dataSourceType=B.a.Plain.Name,a.data.schema=void 0,e.next=18;break;case 11:if(o=!1,a.data.general&&!a.data.general.skipMode&&a.data.sourceProperties&&(a.data.general.sourcePropertiesOverride||(a.data.general.sourcePropertiesOverride=a.data.sourceProperties),a.data.general.sourcePropertiesOverride.skipLinesCount=0,a.data.general.skipMode="None",a.data.schema=void 0,o=!0),a.data.general&&!a.data.general.promoteHeadersMode&&a.data.sourceProperties&&(a.data.general.sourcePropertiesOverride||(a.data.general.sourcePropertiesOverride=a.data.sourceProperties),a.data.general.sourcePropertiesOverride.promoteHeaders=!1,a.data.general.promoteHeadersMode="None",a.data.schema=void 0,o=!0),!o){e.next=18;break}return e.next=17,n.datasetClient.parseDataset(a.data);case 17:a=e.sent;case 18:if(a.status!==f.a.Ok||!a.data){e.next=23;break}return n.setState((function(e){return{parsingDataset:e.parsingDataset-1,datasetRequest:Object(c.a)({},a.data),isParseFailed:!1}})),e.abrupt("return",a.data);case 23:if(a.status!==f.a.Error){e.next=27;break}return i=n.errorManager.getParseResponseErrorMessages(a.error,M.b.Data.Common.ErrorTitlePlaceholder),n.setState((function(e){return{errorMessages:Object(r.a)(e.errorMessages.concat(i)),parsingDataset:e.parsingDataset-1,isParseFailed:!0}})),e.abrupt("return",void 0);case 27:return n.setState((function(e){return{parsingDataset:e.parsingDataset-1,isParseFailed:!0}})),e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getPreview=function(){var e=Object(o.a)(s.a.mark((function e(t,a){var o,i,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.skipValidation){e.next=4;break}return n.datasetClient.abort(),n.setState({loadingPreview:0,parsingDataset:0,datasetPreview:void 0}),e.abrupt("return");case 4:if(!(o=Object(q.b)(t,n.props.flightContext))){e.next=9;break}return n.datasetClient.abort(),n.setState((function(e){return{datasetPreview:void 0,errorMessages:Object(r.a)(e.errorMessages.concat(o))}})),e.abrupt("return");case 9:if(n.setState((function(e){return{loadingPreview:e.loadingPreview+1}})),n.datasetClient.abort(),i=t,!a){e.next=16;break}return e.next=15,n.parseDataset(t);case 15:i=e.sent;case 16:if(i){e.next=19;break}return n.setState((function(e){return{loadingPreview:e.loadingPreview-1,datasetPreview:void 0}})),e.abrupt("return");case 19:return e.next=21,n.datasetClient.getPreview(Object(c.a)(Object(c.a)({},i),{},{columnsToRemove:[]}));case 21:(u=e.sent).status===f.a.Ok&&u.data?n.setState((function(e){return{loadingPreview:e.loadingPreview-1,datasetPreview:u.data}})):u.status===f.a.Error?(u.error&&(l=j.a.addErrorCodeAndIsUserError("DatasetCreateByWebUrl DatasetPreview",Object(I.a)(u.error,M.b.Data.Common.ErrorTitlePlaceholder,{errorOverride:"ServiceErrorCodeDatasetCreationOverrides"}),["UserError"])),n.setState((function(e){return{errorMessages:Object(r.a)(l?e.errorMessages.concat(l):e.errorMessages),loadingPreview:e.loadingPreview-1,datasetPreview:void 0}}))):n.setState((function(e){return{loadingPreview:e.loadingPreview-1}}));case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.createDatasetError=function(e,t){n.setState((function(a){return{creatingDataset:!1,errorMessages:Object(r.a)(a.errorMessages.concat(j.a.addErrorCodeAndIsUserError("DatasetCreateByWebUrl CreateDataset",Object(I.a)(e,t),["DatasetVersionExists"])))}}))},n.createDataset=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,r,o,i,c,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n.setState({creatingDataset:!0}),n.datasetClient.abort(),e.next=5,n.datasetClient.registerDatasetFromDataPath(t,!0,n.state.skipValidation);case 5:if(r=e.sent,a.status=r.status.toString(),r.status!==f.a.Ok||!r.data){e.next=22;break}if(o=!1,n.state.datasetRequest.datasetType!==x.a.datasetTypes().TabularDataset.Enum||!n.state.generateProfileAfterCreation){e.next=19;break}return e.prev=10,e.next=13,n.generateProfile(r.data);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(10),o=!0,Object(F.a)({handlers:{onRestCallError:function(e){n.createDatasetError(e,M.b.Data.Common.ErrorTitlePlaceholder)}}})(e.t0);case 19:o||(c=M.b.Data.DatasetCreateByWebUrlPage.SuccessMessage.replace("{datasetName}",t.name||""),u={title:M.b.Data.DatasetCreateByWebUrlPage.SuccessTitle,messageType:g.c.Success,message:c},t.name&&(null===(i=r.data.latest)||void 0===i?void 0:i.versionId)&&(u.link={text:M.b.Data.DatasetCreateFromDatastore.ClickHereToJumpTo,to:n.props.routeContext.getFullPathTo(b.a.DatasetRegisterDetailsRoute,{datasetName:t.name,version:null===(l=r.data.latest)||void 0===l?void 0:l.versionId})}),r.data&&r.data.latest&&r.data.latest.versionId===n.props.datasetVersion&&(u.message=M.b.Data.DatasetCreateByWebUrlPage.SameDatasetSuccessMessage),n.props.messageContext.addMessage(u),r.data&&r.data.datasetId&&(a.datasetVersion=r.data.latest&&r.data.latest.versionId||"",n.props.onCreate({datasetId:r.data.datasetId,datasetName:r.data.name||"",versionId:r.data.latest&&r.data.latest.versionId||""}))),e.next=23;break;case 22:r.status===f.a.Error&&n.createDatasetError(r.error,M.b.Data.Common.ErrorTitlePlaceholder);case 23:n.setState({creatingDataset:!1}),a.datasetType=t.datasetType,a.wasGenerateProfileSelected=n.state.generateProfileAfterCreation.toString(),n.trackEvent(h.a.DatasetCreateResult,a);case 27:case"end":return e.stop()}}),e,null,[[10,15]])})));return function(t){return e.apply(this,arguments)}}(),n.generateProfile=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props.flightContext.isEnabled(D.a.DatastoreSelectForProfile),r=Boolean(!a||n.state.targetDatastoreForProfiling),!n.state.targetComputeForProfiling||!r){e.next=5;break}return e.next=5,n.props.datasetServiceClient.generateProfileWithPreview(t.latest&&t.latest.savedDatasetId?t.latest.savedDatasetId:"",{computeTarget:n.state.targetComputeForProfiling,datastoreName:n.state.targetDatastoreForProfiling&&n.state.targetDatastoreForProfiling.name});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onStepLeaving=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,r,o,u,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({isValidating:!0}),a=t.currentStepKey,void 0!==t.nextStepIndex&&void 0!==t.nextStepKey&&a&&!n.state.parsingDataset){e.next=5;break}return n.setState({isValidating:!1}),e.abrupt("return");case 5:if(r=t.nextStepIndex,o=t.currentStepIndex,u=r<o){e.next=33;break}if(e.t2=a===V.a.BasicInfo&&n.validateStep,!e.t2){e.next=14;break}return e.next=13,n.validateStep();case 13:e.t2=!e.sent;case 14:if(e.t1=e.t2,e.t1){e.next=22;break}if(e.t3=a===V.a.Schema&&n.validateSchemaStep,!e.t3){e.next=21;break}return e.next=20,n.validateSchemaStep();case 20:e.t3=!e.sent;case 21:e.t1=e.t3;case 22:if(e.t0=e.t1,e.t0){e.next=30;break}if(e.t4=a===V.a.SettingsAndPreview&&n.validateSettingsStep,!e.t4){e.next=29;break}return e.next=28,n.validateSettingsStep();case 28:e.t4=!e.sent;case 29:e.t0=e.t4;case 30:if(!e.t0){e.next=33;break}return n.setState((function(e){return{stepState:Object(c.a)(Object(c.a)({},e.stepState),{},Object(i.a)({},a,m.WizardStepState.Error)),isValidating:!1}})),e.abrupt("return");case 33:l=u?m.WizardStepState.NotStarted:m.WizardStepState.Completed,d=t.nextStepKey,n.trackEvent(h.a.DatasetCreateNavigate,{currentStepKey:t.currentStepKey,nextStepKey:t.nextStepKey}),n.trackEvent(Object(L.e)(d)),n.setState((function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{currentStepIndex:r,errorMessages:[],stepState:Object(c.a)(Object(c.a)({},e.stepState),{},(t={},Object(i.a)(t,a,l),Object(i.a)(t,d,m.WizardStepState.CurrentStep),t)),isValidating:!1})}));case 38:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.trackEvent=function(e,t){var a,r=t||{};r.method="WebUrl",r.createProviderSource=n.props.createProviderSource,r.wizardSessionId=null===(a=n.wizardRef.current)||void 0===a?void 0:a.getWizardSessionId(),Object(R.b)(e,r)},n.telemetryProps=Object(c.a)({},n.props);var l=!n.props.authorizationContext.hasPermission(S.a.DatasetsRegisteredPreviewRead);return n.errorManager=new z.a("DatasetCreateByWebUrl"),n.state={errors:{basicErrors:{},httpUrlError:void 0},datasetRequest:{isVisible:!0,dataPath:{httpUrl:""},datastorePath:"",datasetType:e.datasetType||x.a.datasetTypes().TabularDataset.Enum,name:n.props.datasetName},stepState:{BasicInfo:m.WizardStepState.CurrentStep,SettingsAndPreview:m.WizardStepState.NotStarted,Schema:m.WizardStepState.NotStarted,VerificationStep:m.WizardStepState.NotStarted},currentStepIndex:0,skipValidation:l,parsingDataset:0,loadingPreview:0,creatingDataset:!1,datasetPropertyToTraitMap:new Map,traitChangeToggle:!1,datasetTraitFailureMessages:[],generateProfileAfterCreation:!1,targetComputeForProfiling:void 0,isValidating:!1,errorMessages:[],isParseFailed:!1,targetDatastoreForProfiling:void 0,loadingDatastore:!1},n.datasetClient=new A.a(n.props.authContext,n.props.workspaceContext),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.trackEvent(h.a.DatasetCreateWizardLaunch),this.trackEvent(h.a.DatasetCreateWizardLaunchFromUrl);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.datasetRequest.datasetType===x.a.datasetTypes().TabularDataset.Enum?this.tabularDatasetWizardChildren:this.fileDatasetWizardChildren;return w.createElement("div",{className:"dataset-create-from-web-url"},w.createElement(m.Wizard,{currentStepIndex:this.state.currentStepIndex,onCancel:this.onCancel,onDone:this.onDone,onStepWillLeave:this.onStepLeaving,buttonsOptions:{navigationDisabled:this.isNavigationDisabled(),doneDisabled:this.state.creatingDataset},ref:this.wizardRef},e()))}},{key:"basicInfoFromWebUrlStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.errors,r=e.errorMessages,n=e.parsingDataset,s=e.skipValidation,o=e.stepState,i=n>0||this.state.isValidating,c=i?M.b.Data.DatasetCreateFromDatastore.ParsingDatasetMessage:void 0;return w.createElement(U.a,{bannerMessages:r,loadingMessage:c,bannerMessagesOnDismiss:this.dismissMessage,datasetClient:this.datasetClient,key:V.a.BasicInfo,title:M.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Title,datasetRequest:t,skipValidation:s,errors:a,onChange:this.changeDatasetRequest,onError:this.basicDatasetError,setValidateCallback:this.setStepValidateCallback,loading:i,state:o.BasicInfo,parseDataset:this.parseDataset,onHttpUrlChange:this.onHttpUrlChange,setDatasetRequest:this.setDatasetRequest,datasetName:this.props.datasetName,datasetVersion:this.props.datasetVersion,unsetWizardErrorState:this.unsetWizardErrorState,disableTypeSelection:this.props.disableTypeSelection,onSkipValidationCheckboxChange:this.onSkipValidationCheckboxChange})}},{key:"settingsAndPreviewStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.errorMessages,r=e.stepState,n=e.datasetPreview,s=e.loadingPreview,o=e.skipValidation;return w.createElement(W.a,{skipValidation:o,bannerMessages:a,bannerMessagesOnDismiss:this.dismissMessage,key:V.a.SettingsAndPreview,title:M.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Title,state:r.SettingsAndPreview,datasetRequest:t,datasetPreview:n,loadingPreview:s>0,onChange:this.changeDatasetRequest,setValidateCallback:this.setSettingsValidateCallback,getPreview:this.getPreview,contextProps:this.telemetryProps,isParseFailed:this.state.isParseFailed})}},{key:"schemaStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.datasetPreview,n=e.datasetPropertyToTraitMap,s=e.loadingPreview,o=e.errorMessages,i=e.datasetTraitFailureMessages,c=o.concat(i);return w.createElement(G.a,{bannerMessages:c,bannerMessagesOnDismiss:this.dismissMessage,key:V.a.Schema,title:M.b.Data.DatasetCreateFromDatastore.Steps.Schema.Title,state:a.Schema,datasetRequest:t,datasetPreview:r,onChange:this.changeDatasetRequest,setValidateCallback:this.setSchemaStepValidateCallback,getPreview:this.getPreview,datasetPropertyToTraitMap:n,datasetTraitChanged:this.datasetTraitChanged,messageContext:this.props.messageContext,loadingPreview:s>0,datasetTraitFailureMessagesChanged:this.datasetTraitFailureMessagesChanged,datasetTraitFailureMessages:i,unsetWizardErrorState:this.unsetWizardErrorState})}},{key:"verificationStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.targetComputeForProfiling,n=e.generateProfileAfterCreation,s=e.errorMessages,o=e.targetDatastoreForProfiling,i=e.loadingDatastore,c=e.creatingDataset,u=c?M.b.Data.DatasetCreateFromDatastore.CreatingDatasetMessage:void 0;return w.createElement(H.a,{bannerMessages:s,loadingMessage:u,creatingDataset:c,bannerMessagesOnDismiss:this.dismissMessage,datasetRequest:t,key:V.a.VerificationStep,title:M.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.Title,state:a.VerificationStep,generateProfileAfterCreation:n,onProfileCheckboxChange:this.onProfileCheckboxChange,onComputeForProfilingChange:this.onComputeForProfilingChange,selectedCompute:r,datasetVersion:this.props.datasetVersion,selectedDataStore:o,loadingDatastore:i,onDatastoreForProfilingLoading:this.onDatastoreLoading,onDatastoreForProfilingLoaded:this.onDatastoreLoaded,onDataStoreForProfilingChange:this.onDataStoreChange,onDatastoreForProfilingStart:this.onDatastoreStart})}},{key:"isNavigationDisabled",value:function(){return this.state.loadingPreview>0||this.state.parsingDataset>0||this.state.isValidating||this.state.creatingDataset}}]),a}(w.PureComponent)),_=Object(E.a)(Object(v.a)(Object(C.a)(Object(y.a)(Object(P.a)(Object(k.a)(Object(O.a)(Q)))))),{datasetServiceClient:T.a},N.a)},"57/A":function(e,t,a){"use strict";function r(e,t,a,r){return{columnsToRemove:["Path"],general:{promoteHeadersMode:r?"FirstFile":"None",includePath:!1,skipMode:"None",sourcePropertiesOverride:{dataSourceType:"Microsoft.DPrep.ParseDelimitedBlock",delimiter:a,encoding:"UTF8",promoteHeaders:r,skipLinesCount:0}},dataPath:{datastoreName:e.name,relativePath:t},datasetType:"tabular"}}function n(e,t,a){return r(e,t,",",a)}function s(e,t,a){return r(e,t,"\t",a)}function o(e,t){return{columnsToRemove:["Path"],general:{promoteHeadersMode:"None",includePath:!1,skipMode:"None",sourcePropertiesOverride:{dataSourceType:"Microsoft.DPrep.ReadParquetFileBlock"}},dataPath:{datastoreName:e.name,relativePath:t},datasetType:"tabular"}}a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return o}))},"5ciz":function(e,t,a){"use strict";a.d(t,"b",(function(){return v})),a.d(t,"a",(function(){return y}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("nmZI"),d=a("67aH"),p=a("Auaq"),m=a("oziZ"),h=a("7vdV"),f=a("ERkP"),g=a.n(f),b=a("JywU"),D=a("XpkB"),S=a("J7yX"),v=function(e){return{key:"".concat(e.name||""),text:"".concat(e.name||""),ariaLabel:"".concat(e.name||"")}},C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).sharedArmClient=void 0,r.loadResourceGroups=Object(s.a)(n.a.mark((function e(){var t,a,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.props.subscriptionId){e.next=4;break}r.setState({loading:!0}),e.next=9;break;case 4:return r.setState((function(e){return e.loading?null:{loading:!0}})),e.next=7,r.sharedArmClient.getResourceGroups(r.props.subscriptionId);case 7:(t=e.sent).status===d.a.Ok?(a=t.data||[],s=a.map(v),r.setState({loading:!1,options:s})):(t.status===d.a.Error&&r.props.messageContext.addMessage(b.a.addErrorCodeAndIsUserError("ResourceGroupField LoadArmResources",Object(S.a)(t.error,D.b.Data.Common.ErrorTitlePlaceholder))),r.setState({loading:!1}));case 9:case"end":return e.stop()}}),e)}))),r.sharedArmClient=new p.a(r.props.authContext),r.state={loading:!1,options:[]},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadResourceGroups()}},{key:"componentWillUnmount",value:function(){this.sharedArmClient.dispose()}},{key:"componentDidUpdate",value:function(e,t){e.subscriptionId!==this.props.subscriptionId&&this.loadResourceGroups()}},{key:"render",value:function(){return g.a.createElement(l.a,{name:"resourceGroupName",label:D.b.Datastore.DatastoreEditPage.CommonFields.ResourceGroup.storageLabel,required:!0,options:this.state.options,multiSelect:!1,disabled:this.props.disabled})}}]),a}(g.a.Component),y=Object(m.a)(Object(h.a)(C))},"60PN":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("XpkB"),c=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,null,[{key:"Delimited",get:function(){return new a("Microsoft.DPrep.ParseDelimitedBlock",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.FileFormat.Delimited)}},{key:"FixedWidth",get:function(){return new a("Microsoft.DPrep.ParseFixedWidthColumns",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.FileFormat.FixedWidth)}},{key:"Plain",get:function(){return new a("Microsoft.DPrep.ParsePlainTextBlock",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.FileFormat.PlainText)}},{key:"JSON",get:function(){return new a("JSONFile",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.FileFormat.JSON)}},{key:"ParquetFile",get:function(){return new a("Microsoft.DPrep.ReadParquetFileBlock",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.FileFormat.ParquetFile)}},{key:"Excel",get:function(){return new a("Microsoft.DPrep.ReadExcelBlock",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.FileFormat.Excel)}},{key:"Binary",get:function(){return new a("",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.FileFormat.Binary)}},{key:"JSONLines",get:function(){return new a("JSONLines",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.FileFormat.JSONLines)}},{key:"All",get:function(){return[a.Delimited,a.FixedWidth,a.Plain,a.JSON,a.JSONLines,a.ParquetFile,a.Excel,a.Binary]}},{key:"DefaultSelection",get:function(){return a.Plain}},{key:"FileSettingsOptions",get:function(){return[a.Delimited,a.Plain,a.ParquetFile,a.JSONLines]}}]),a}(a("WTLv").a)},"61CZ":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("ERkP"),c=a("/58v"),u=a("1vim"),l=a("XpkB"),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(c.a,{name:"serverName",label:l.b.Datastore.DatastoreEditPage.AzurePostgresMySql.ServerNameField.label,required:!0,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return u.a.isRequired(e,l.b.Datastore.DatastoreEditPage.AzurePostgresMySql.ServerNameField.ValidationErrors.Required)}}]),a}(i.Component)},"64Li":function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("ERkP"),c=a("/58v"),u=a("1vim"),l=a("XpkB"),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(c.a,{name:"storageServiceName",label:l.b.Datastore.DatastoreEditPage.AzureFile.FileShareField.label,required:!0,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return u.a.isRequired(e,l.b.Datastore.DatastoreEditPage.AzureFile.FileShareField.ValidationErrors.Required)}}]),a}(i.Component)},"7Agw":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("FINz"),n=a("ERkP"),s=a.n(n),o=a("RF/u"),i=a("WC4d"),c=a("FABw"),u=a("XpkB"),l=(a("Vtly"),function(e){var t=e.disabled||e.loading,a=e.loading?"":e.errorMessage,n=e.refreshTitle||u.b.Data.Common.Refresh,l=e.loadingMessage||u.b.Data.Common.LoadingWithoutEllipsis,d=e.createTitle||"";return s.a.createElement("div",{className:"loadable-single-select ".concat(e.containerClassName)},s.a.createElement(o.a,Object.assign({},e,{disabled:t,errorMessage:a})),s.a.createElement("div",{className:"buttons-panel"},s.a.createElement("div",{className:"loadable-single-select-description"},e.description),s.a.createElement(i.a,{onClick:e.onRefresh,disabled:t},n),e.createTitle&&s.a.createElement(i.a,{onClick:e.onCreate,disabled:t},d),e.loading?s.a.createElement(c.a,{message:l,size:r.a.small}):void 0))})},"7xHg":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("XpkB"),c=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,null,[{key:"NoHeaders",get:function(){return new a("None",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Header.NoHeaders)}},{key:"FromFirstFile",get:function(){return new a("Ungrouped",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Header.FromFirstFile)}},{key:"Combine",get:function(){return new a("Grouped",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Header.Combine)}},{key:"SameInAllFiles",get:function(){return new a("ConstantGrouped",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Header.ConstantGrouped)}},{key:"DefaultSelection",get:function(){return a.FromFirstFile}},{key:"All",get:function(){return[a.NoHeaders,a.FromFirstFile,a.Combine,a.SameInAllFiles]}}]),a}(a("WTLv").a)},"8W3t":function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return b}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("1vim"),c=a("z/dm"),u=a("LsED"),l=a("unJ+"),d=a("zQeN"),p=a("ERkP"),m=a.n(p),h=a("XpkB");function f(e){return i.a.isRequired(e,h.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.ValidationErrors.Required)}var g=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=["AzureBlob","AzureFile","AzureDataLake","AzureDataLakeGen2","AzureSqlDatabase","AzurePostgreSql","AzureMySql"];u.a.config.cloudInstance!==l.a.Public&&(e=e.filter((function(e){return"AzureDataLake"!==e}))),this.props.datastoreTypeOptions&&this.props.datastoreTypeOptions.length&&(e=this.props.datastoreTypeOptions);var t=e.map((function(e){return{key:e,text:h.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options[e],ariaLabel:h.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options[e]}}));return m.a.createElement(c.a,{name:"datastoreType",label:h.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.label,required:!0,options:t,disabled:this.props.disabled})}}]),a}(m.a.Component),b=Object(d.a)(g)},"8yP9":function(e,t,a){"use strict";var r;a.d(t,"a",(function(){return r})),function(e){e.FineGrainTimestamp="_TimeSeries_Column:FineGrainTimestamp_",e.CoarseGrainTimestamp="_TimeSeries_Column:CoarseGrainTimestamp_"}(r||(r={}))},AI5r:function(e,t){},AKjM:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var r=a("zjfJ"),n=a("Czhu"),s=a("zygG"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("ERkP"),d=a.n(l),p=a("kgxj"),m=a("XpkB"),h=a("o9Up"),f=a("WC4d"),g=a("LsED"),b=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.storageObj;if(!e.subscriptionId||!e.resourceGroup||!e.storeName){var t=e.storeName||"";return d.a.createElement(d.a.Fragment,null,t)}var a="".concat(g.a.config.azurePortal,"/#resource/subscriptions/").concat(e.subscriptionId,"/resourceGroups/").concat(e.resourceGroup,"/providers/Microsoft.DataLakeStore/accounts/").concat(e.storeName,"/overview");return d.a.createElement(f.a,{href:a,openNewWindow:!0},e.storeName)}}]),a}(d.a.Component),D=a("zWVw"),S=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return l.createElement(l.Fragment,null,"AzureSubscription"!==this.props.accountSelectionMethod&&l.createElement(D.a,{disabled:this.props.disabled}),this.props.regionMessage&&this.props.regionMessage.length>0&&l.createElement(p.MessageBar,{messages:this.props.regionMessage,onDismiss:this.props.onRegionMessageDismiss}))}}],[{key:"getInitialFormValues",value:function(){return{storeName:void 0}}},{key:"validate",value:function(e){return"Manual"===e.accountSelectionMethod?{storeName:D.a.validate(e.storeName)}:{}}},{key:"getPayloadProperties",value:function(e){var t=h.a.getAuthSection(e);t.resourceUri=t.resourceUri||"https://datalake.azure.net/";var a={credentialType:t.credentialType};switch(e.accountSelectionMethod){case"Manual":e.subscriptionId&&(a.subscriptionId=e.subscriptionId),e.resourceGroupName&&(a.resourceGroup=e.resourceGroupName),a.storeName=e.storeName;break;case"AzureSubscription":if(e.subscriptionId&&e.resourceName){var r=e.resourceName.split(":"),o=Object(s.a)(r,2);a.storeName=o[0],a.resourceGroup=o[1],a.subscriptionId=e.subscriptionId}}return Object(n.a)(Object(n.a)(Object(n.a)({},a),t),{},{credentialType:t.credentialType})}},{key:"getReadOnlyInfo",value:function(e){var t,a=m.b.Datastore.DatastoreEditPage,n=e.azureDataLakeSection;return n?(t={},Object(r.a)(t,a.CommonFields.SubscriptionId.label,n.subscriptionId||""),Object(r.a)(t,a.CommonFields.ResourceGroup.label,n.resourceGroup||""),Object(r.a)(t,a.AzureDataLakeGen1.StoreNameField.label,l.createElement(b,{storageObj:n})),Object(r.a)(t,a.AzureDataLakeGen1.ResourceURLField.label,n.resourceUri||""),Object(r.a)(t,a.AzureDataLakeGen1.AuthorityURLField.label,n.authorityUrl||""),t):{}}}]),a}(l.Component);S.defaultProps={messages:[]}},AjwC:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("ERkP"),n=a("Xopk"),s=a("tB83"),o=function(e){return r.createElement("div",{className:"http-data-path-field module-param"},e.readOnly||r.createElement(n.a,{element:e.gpElement,readOnly:e.readOnly,applyGlobalParameter:e.applyGlobalParameter}),r.createElement(s.a,{textFieldLabel:e.textFieldLabel,value:e.value,errorMessage:e.errorMessage,readOnly:e.readOnly,applyGlobalParameter:e.applyGlobalParameter,onChange:e.onChange}))}},ApYq:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var r=a("zjfJ"),n=a("Czhu"),s=a("zygG"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("kgxj"),d=a("LsED"),p=a("ERkP"),m=a("XpkB"),h=a("o9Up"),f=a("ialG"),g=(a("4CU8"),a("XJB9")),b=a("/58v"),D=a("1vim"),S=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return p.createElement(b.a,{name:"portNumber",label:m.b.Datastore.DatastoreEditPage.AzurePostgresMySql.PortNumberField.label,defaultValue:this.props.defaultValue,type:"number",disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return e?D.a.hasMinValue(e,0,m.b.Datastore.DatastoreEditPage.AzurePostgresMySql.PortNumberField.ValidationErrors.min)||D.a.hasMaxValue(e,65535,m.b.Datastore.DatastoreEditPage.AzurePostgresMySql.PortNumberField.ValidationErrors.max):void 0}}]),a}(p.Component),v=a("61CZ"),C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e="AzurePostgreSql"===this.props.datastoreType?"5432":"3306";return p.createElement(p.Fragment,null,"AzureSubscription"!==this.props.accountSelectionMethod?"AzurePostgreSql"===this.props.datastoreType?p.createElement("div",{className:"serverName"},p.createElement("div",{className:"server-name"},p.createElement(v.a,{disabled:this.props.disabled})),p.createElement("div",{className:"suffix"},".",d.a.config.postgreSqlServerEndpointSuffix)):p.createElement("div",{className:"serverName"},p.createElement("div",{className:"server-name"},p.createElement(v.a,{disabled:this.props.disabled})),p.createElement("div",{className:"suffix"},".",d.a.config.mySqlServerEndpointSuffix)):void 0,this.props.regionMessage&&this.props.regionMessage.length>0&&p.createElement(l.MessageBar,{messages:this.props.regionMessage,onDismiss:this.props.onRegionMessageDismiss}),p.createElement(g.a,{disabled:this.props.disabled}),p.createElement(S,{defaultValue:e,disabled:this.props.disabled}))}}],[{key:"getInitialFormValues",value:function(){return{}}},{key:"validate",value:function(e){var t={databaseName:g.a.validate(e.databaseName),portNumber:S.validate(e.portNumber)};return"Manual"===e.accountSelectionMethod&&(t.serverName=v.a.validate(e.serverName)),t}},{key:"getPayloadProperties",value:function(e){var t=h.a.getAuthSection(e);t.portNumber=e.portNumber&&e.portNumber.toString()||("AzurePostgreSql"===e.datastoreType?"5432":"3306");var a={databaseName:e.databaseName};switch(e.accountSelectionMethod){case"Manual":a.serverName=e.serverName;break;case"AzureSubscription":if(e.subscriptionId&&e.resourceName){var r=e.resourceName.split(":"),o=Object(s.a)(r,2);a.serverName=o[0],a.resourceGroup=o[1],a.subscriptionId=e.subscriptionId}}return Object(n.a)(Object(n.a)(Object(n.a)({},a),t),{},{credentialType:t.credentialType})}},{key:"getReadOnlyInfo",value:function(e){var t,a=m.b.Datastore.DatastoreEditPage,n="AzurePostgreSql"===e.dataStoreType?e.azurePostgreSqlSection:e.azureMySqlSection;return n?(t={},Object(r.a)(t,a.CommonFields.SubscriptionId.label,n.subscriptionId||""),Object(r.a)(t,a.CommonFields.ResourceGroup.label,n.resourceGroup||""),Object(r.a)(t,a.AzurePostgresMySql.ServerNameField.label,p.createElement(f.a,{storageObj:n,datastoreType:e.dataStoreType})),Object(r.a)(t,a.AzurePostgresMySql.DatabaseNameField.label,n.databaseName||""),Object(r.a)(t,a.AzurePostgresMySql.PortNumberField.label,n.portNumber||""),t):{}}}]),a}(p.Component)},B8aL:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("ERkP"),n=a.n(r),s=a("RF/u"),o=function(e){var t=function(e){return e.map((function(e){return{key:e.Name,text:e.Title,title:e.ToolTip,data:e}}))}(e.options),a=e.selectedOption?e.selectedOption.Name:null;return!e.selectedOption&&e.options&&e.options.length&&(a=e.options[0].Name),n.a.createElement(s.a,Object.assign({},e,{options:t,onChange:function(t,a){a&&e.onChange(a.data)},selectedKey:a}))}},"Bf+9":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a("Czhu"),n=a("9fIP"),s=a("f3es"),o=a.n(s),i=a("imaQ"),c=a("QlF2"),u=function e(){Object(n.a)(this,e)};u.DATA_PATH_DEFERRED_VALIDATION_TIME=1700,u.DATA_PATH_DEBOUNCE_TIME=300,u.DEFAULT_DATA_PATH_PROPERTIES={dataSource:Object(r.a)({},i.a),datastore:{},path:"",queryTimeout:""},u.getDataPathForDatasetService=function(e){var t;switch(e.dataSource.dataSourceType){case i.b.Http:t={httpUrl:e.path};break;case i.b.AzureDatastore:default:if(Object(c.g)(e.datastore.dataStoreType)){var a=parseInt(e.queryTimeout,10);isNaN(a)&&(a=void 0);var r={sqlQuery:e.path,queryTimeout:a};t={datastoreName:e.datastore.name,sqlDataPath:r}}else t={datastoreName:e.datastore.name,relativePath:e.path}}return t},u.getDataPathPropertiesFromDatasetRequest=function(e,t){return e&&e.dataPath?{dataSource:e.dataPath.httpUrl?i.c:i.a,datastore:{name:e.dataPath.datastoreName,dataStoreType:t},path:e.dataPath.relativePath||e.dataPath.sqlDataPath&&e.dataPath.sqlDataPath.sqlQuery||e.dataPath.httpUrl||"",queryTimeout:u.getQueryTimeout(e)}:Object(r.a)({},u.DEFAULT_DATA_PATH_PROPERTIES)},u.getDataPathProperties=function(e,t,a,r){var n=u.getDataPathPropertiesFromDatasetRequest(e,t);return u.updateDataPathPropertiesFromOverrideParams(n,a,r)},u.updateDataPathPropertiesFromOverrideParams=function(e,t,a,r){return t&&(e.datastore.name=t),a&&(e.path=a),r&&(e.queryTimeout=r),e},u.isTooLongDatasetRequest=function(e){if(!e)return!1;var t=JSON.stringify(e,(function(e,t){return null===t?void 0:t})),a=o.a.deflate(t,{to:"string"});return btoa(a).length>15360},u.getQueryTimeout=function(e){return e&&e.dataPath&&e.dataPath.sqlDataPath&&e.dataPath.sqlDataPath.queryTimeout&&e.dataPath.sqlDataPath.queryTimeout.toString()||""}},Bxmo:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("9fIP"),n=a("8K1b"),s=a("AqVP"),o=a("ERkP"),i=a("LWCo"),c=a("LeCu"),u=a("SnOo"),l=function(e){Object(n.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).renderField=function(e){var t=e.field.value===n.props.leftValue,a=e.field.value===n.props.rightValue,r="".concat(n.props.label," ").concat(n.props.leftText," ").concat(t?u.b.Common_ToggleButtonSelected:u.b.Common_ToggleButtonNotSelected," ").concat(u.b.Common_Toggle),s="".concat(n.props.label," ").concat(n.props.rightText," ").concat(a?u.b.Common_ToggleButtonSelected:u.b.Common_ToggleButtonNotSelected,"  ").concat(u.b.Common_Toggle," ");return o.createElement(i.a,{horizontal:!0},o.createElement(c.a,Object.assign({ariaLabel:r},e.field,{text:n.props.leftText,primary:t,onClick:function(){t||e.form.setFieldValue(e.field.name,n.props.leftValue)}})),o.createElement(c.a,Object.assign({ariaLabel:s},e.field,{text:n.props.rightText,primary:a,onClick:function(){a||e.form.setFieldValue(e.field.name,n.props.rightValue)}})))},n}return a}(a("VbQv").a)},CHYx:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var r=a("ERkP"),n=a.n(r),s=a("lwe2"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("XpkB"),d=a("8yP9"),p=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,null,[{key:"NoTraitSelected",get:function(){return new a(l.b.DatasetTraits.NoTraitSelected,l.b.DatasetTraits.NoTraitSelected,l.b.DatasetTraits.NoTraitSelected)}},{key:"FineGrainTimestamp",get:function(){return new a(d.a.FineGrainTimestamp,l.b.DatasetTraits.TimeSeriesFineGrain.ColumnsLabel,l.b.DatasetTraits.TimeSeriesFineGrain.Tooltip)}},{key:"CoarseGrainTimestamp",get:function(){return new a(d.a.CoarseGrainTimestamp,l.b.DatasetTraits.TimeSeriesCoarseGrain.ColumnsLabel,l.b.DatasetTraits.TimeSeriesCoarseGrain.Tooltip)}},{key:"NoValidTraitOption",get:function(){return new a(l.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.NoValidTraitOption,l.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.NoValidTraitOption,l.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.NoValidTraitOption)}},{key:"NoRelevantTraitOption",get:function(){return[a.NoValidTraitOption]}},{key:"TimeSeriesOptions",get:function(){return[a.FineGrainTimestamp,a.CoarseGrainTimestamp]}},{key:"All",get:function(){return[a.FineGrainTimestamp,a.CoarseGrainTimestamp]}}]),a}(a("WTLv").a),m=a("B8aL"),h=function(e){var t=e.selectedKeys,a=e.disabled,r=e.onChange,o=e.columnType.Name===s.a.Date.Name?p.TimeSeriesOptions:[];o.length&&o.unshift(p.NoTraitSelected);var i=a,c=function(e,t){if(!t)return;return e.find((function(e){return e.Name===t}))}(o,t?t[0]:void 0);o.length||(o=p.NoRelevantTraitOption,c=p.NoValidTraitOption,i=!0);var u="";return c&&c.ToolTip&&(u=c.ToolTip),n.a.createElement(m.a,{label:"",title:u,options:o,disabled:i,onChange:function(e){var t=e?[e.Name]:[];r&&r(t)},selectedOption:c})}},CNWI:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var r=a("d0cs"),n=a("LWCo"),s=a("ERkP"),o=a.n(s),i=a("Opk0"),c=a("cqFV"),u=a("3q6J"),l=a("s+9k"),d=a("WYY7"),p=a("UwGH"),m=a("Ippe"),h=a("XpkB"),f=Object(r.db)({marginLeft:"5px"}),g=Object(r.db)({marginTop:"15px"}),b=function(e){var t=o.a.useContext(p.a).hasPermission(m.a.DatasetsRegisteredPreviewRead),a=e.disabled||!t;return e.hidden?null:o.a.createElement(i.a,{checked:e.checked,label:h.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Fields.SkipValidation,onChange:e.onChange,disabled:a,onRenderLabel:function(){return function(e){var t=h.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Fields.SkipValidation,a=e?h.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Fields.SkipValidationTooltip:h.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Fields.SkipValidationTooltipNoPermissions;return o.a.createElement(n.a,{horizontal:!0,verticalAlign:"center"},o.a.createElement(c.a,{text:t}),o.a.createElement(u.a,{content:a},o.a.createElement(l.a,{name:d.a.Info,className:f})))}(t)},className:g})}},CPUY:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var r=a("VtSi"),n=a.n(r),s=a("Czhu"),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("k0yv"),p=a("kgxj"),m=a("IX2Y"),h=a("LWCo"),f=a("ERkP"),g=a.n(f),b=a("XpkB"),D=a("60PN"),S=a("jk8v"),v=a("QlF2"),C=a("M8uI"),y=a("0TDM"),P=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).onChange=function(t,a){a&&e.props.getPreview(t,!0),e.props.onChange(t)},e.validateStep=Object(o.a)(n.a.mark((function t(){var a;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(S.c)(e.props.datasetRequest)&&(e.props.datasetRequest.sourceProperties||((a=Object(s.a)({},e.props.datasetRequest)).sourceProperties={dataSourceType:D.a.Plain.Name},e.props.onChange(a))),!e.props.skipValidation){t.next=3;break}return t.abrupt("return",!0);case 3:if(!(e.props.datasetRequest.customDelimiter&&e.props.datasetRequest.general&&e.props.datasetRequest.general.sourcePropertiesOverride&&""===e.props.datasetRequest.general.sourcePropertiesOverride.delimiter||e.props.isParseFailed)){t.next=5;break}return t.abrupt("return",!1);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)}))),e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.datasetPreview,r=e.loadingPreview,n=e.datastoreType,s=this.props.isSchemaUpdate?b.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.SchemaUpdateSubtitle:b.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Subtitle,o=Object(v.g)(n);return g.a.createElement(d.a,{title:t},g.a.createElement(p.MessageBar,{messages:this.props.bannerMessages,onDismiss:this.props.bannerMessagesOnDismiss}),!o&&g.a.createElement(m.a,{tabIndex:0,variant:"medium"},s),g.a.createElement(h.a,{verticalFill:!0,verticalAlign:"stretch"},g.a.createElement(h.a.Item,{grow:0,shrink:0},this.renderFileSettings()),g.a.createElement(h.a.Item,{grow:1,styles:{root:{position:"relative"}}},g.a.createElement(C.a,{datasetPreview:a,loading:r,hidePathColumn:!o}))))}},{key:"componentDidMount",value:function(){this.props.setValidateCallback(this.validateStep),this.props.getPreview(this.props.datasetRequest,!1)}},{key:"componentWillUnmount",value:function(){this.props.setValidateCallback()}},{key:"renderFileSettings",value:function(){if(!this.props.datastoreType||!Object(v.g)(this.props.datastoreType))return g.a.createElement(y.a,{datasetRequest:this.props.datasetRequest,onChange:this.onChange,disabled:this.props.loadingPreview,contextProps:this.props.contextProps})}}]),a}(g.a.Component)},CT81:function(e,t,a){"use strict";var r=a("klJQ");a.d(t,"a",(function(){return r.a}))},D7Io:function(e,t,a){"use strict";var r=a("7Agw");a.d(t,"a",(function(){return r.a}))},DHBr:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return q}));var r=a("Czhu"),n=a("zjfJ"),s=a("9fIP"),o=a("MMYH"),i=a("8K1b"),c=a("AqVP"),u=a("k0yv"),l=a("kgxj"),d=a("R1UZ"),p=a("Opk0"),m=a("cqFV"),h=a("LuYi"),f=a("Ippe"),g=a("zQeN"),b=a("fGUH"),D=a("d0cs"),S=a("LWCo"),v=a("ERkP"),C=a.n(v),y=a("7nmT"),P=a.n(y),k=a("NiBv"),O=a("XpkB"),F=a("a+Fo"),E=a("1jtT"),T=a("PTrN"),w=a("zQGN"),j=a("QlF2"),x=a("wrNU"),N=a("TiAf"),M=a("xdYj"),A=a("q6lQ"),I=a("WCmz"),R=Object(D.db)({maxHeight:"20vh",overflow:"auto"}),B=function(t){Object(i.a)(g,t);var a=Object(c.a)(g);function g(e){var t;return Object(s.a)(this,g),(t=a.call(this,e)).generateProfileRef=C.a.createRef(),t.shouldSetFocus=!0,t.onComputesLoadingStarted=function(){t.setState({computesLoading:!0})},t.onComputesLoadError=function(){t.setState({computesLoading:!1})},t.onCheckboxChange=function(){t.props.onProfileCheckboxChange()},t.onComputeSelected=function(e){e&&t.props.onComputeForProfilingChange(e.name)},t.onComputesLoaded=function(e){t.setState({computes:e,computesLoading:!1})},t.mapBasicInfoProperties=function(e){var a=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Name.Label,e.name||""),s=t.props.datasetVersion?"".concat(+t.props.datasetVersion+1):"1",o=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.LatestVersion.Label,s||""),i=e.datasetType===k.a.datasetTypes().TabularDataset.Enum?k.a.datasetTypes().TabularDataset.Label:k.a.datasetTypes().FileDataset.Label,c=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.DatasetType.Label,i||""),u={};e.dataPath&&e.dataPath.httpUrl&&(u=Object(n.a)({},O.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Fields.HttpUrl.Label,e.dataPath.httpUrl||""));var l={};return e.description&&(l=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Description.Label,e.description||"")),Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},a),o),c),u),l)},t.mapDatastoreSelectionProperties=function(e){var a={};e.dataPath&&e.dataPath.datastoreName&&(a=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Datastore.Label,e.dataPath.datastoreName||""));var s=t.getFileNames(t.props.files),o={};!Object(j.g)(t.props.datastoreType)&&e.dataPath&&e.dataPath.relativePath&&(o=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Label,e.dataPath.relativePath||""));var i={};Object(j.g)(t.props.datastoreType)&&e.dataPath&&e.dataPath.sqlDataPath&&e.dataPath.sqlDataPath.sqlQuery&&(i=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.SqlQuery.Label,e.dataPath.sqlDataPath&&e.dataPath.sqlDataPath.sqlQuery||""));var c={};e.dataPath&&e.dataPath.partitionFormat&&(c=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.Label,e.dataPath.partitionFormat||""));var u={};if(e.dataPath&&e.dataPath.partitionFormat&&void 0!==e.dataPath.partitionFormatIgnoreError){var l=e.dataPath.partitionFormatIgnoreError?O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PartitionFormatIgnoreError.Selected:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PartitionFormatIgnoreError.NotSelected;u=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PartitionFormatIgnoreError.Label,l||"")}return Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},a),s),o),i),c),u)},t.mapFileSettingsProperties=function(e){var t=I.a.mapToFormFields(e),a=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.FileFormat.Label,t.fileFormat.Title||""),s={},o={};Object(A.b)(t.fileFormat)||(s=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.Label,t.delimiter.Title||""),t.delimiter.Name===E.a.Custom.Name&&(o=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.CustomLabel,t.customDelimiter||"")));var i={};Object(x.b)(t.fileFormat)||(i=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Encoding.Label,t.encoding.Title||""));var c={};Object(N.b)(t.fileFormat)||(c=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Headers.Label,t.headers.Title||""));var u={},l={};return Object(M.b)(t.fileFormat)||(u=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.SkipRows.Label,t.skipRows.Title||""),t.skipRows.Name!==T.a.None.Name&&(l=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.SkipRows.RowsCountLabel,t.skipRowsCount.toString()||""))),Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},a),s),o),i),c),u),l)},t.state={computes:[],computesLoading:!1},t}return Object(o.a)(g,[{key:"render",value:function(){var e=this.props,t=e.datasetRequest,a=e.title,r=e.selectedCompute,n=e.datastoreType,s=t.datasetType===k.a.datasetTypes().TabularDataset.Enum,o=this.props.flightContext.isEnabled(h.a.DatastoreSelectForProfile),i=t.dataPath&&t.dataPath.httpUrl&&!s?"":void 0,c=this.props.authorizationContext.hasPermission(f.a.DatasetsUnregisteredProfileWrite)&&this.props.authorizationContext.hasPermission(f.a.WorkspacesComputesRead),g=this.props.files?O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.TitleFromUpload:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.TitleFromDatastore,b=this.props.readOnly||this.props.creatingDataset,v=!this.state.computes.length||this.props.creatingDataset;return C.a.createElement(u.a,{title:a},C.a.createElement(l.MessageBar,{messages:this.props.bannerMessages,onDismiss:this.props.bannerMessagesOnDismiss}),C.a.createElement("div",{className:"dataset-verification-step",dir:"ltr"},C.a.createElement(S.a,{horizontal:!1},C.a.createElement(S.a.Item,null,C.a.createElement(d.a,{header:O.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.BasicInfo.Header,data:this.mapBasicInfoProperties(t),className:i}),this.props.datastoreType&&C.a.createElement(d.a,{header:g,data:this.mapDatastoreSelectionProperties(t)}),s&&!Object(j.g)(n)&&C.a.createElement(d.a,{header:O.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.FileSettings.Header,data:this.mapFileSettingsProperties(t)})),c&&C.a.createElement(S.a.Item,null,C.a.createElement("div",{className:"generateProfileSection"},s&&C.a.createElement(p.a,{checked:this.props.generateProfileAfterCreation,label:O.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.CheckboxLabel,onChange:this.onCheckboxChange,disabled:v,ref:this.generateProfileRef}),s&&!this.state.computesLoading&&!this.state.computes.length&&C.a.createElement(m.a,{className:"noComputesLabel",text:O.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.NoComputesMessage})),C.a.createElement("div",{style:{visibility:this.state.computes.length&&this.props.generateProfileAfterCreation?"visible":"hidden"}},s&&C.a.createElement(w.a,{className:"verificationStepSelectCompute",onComputeSelected:this.onComputeSelected,label:O.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.ComputeLabel,selectedCompute:r,onComputesLoaded:this.onComputesLoaded,onComputesLoadError:this.onComputesLoadError,onComputesLoadingStarted:this.onComputesLoadingStarted,disabled:this.props.creatingDataset}),o&&s&&C.a.createElement("div",{className:Object(D.db)({marginTop:5,width:"50%",minWidth:500,paddingLeft:8,selectors:{"label.ms-Label":{fontSize:14,fontWeight:600,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}})},C.a.createElement(F.a,{label:O.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.Datastore,hideWhenLoading:!1,required:!0,readOnly:b,placeholder:O.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.DatastoreSelectLabel,selectedDataStore:this.props.selectedDataStore,onLoading:this.props.onDatastoreForProfilingLoading,onLoaded:this.props.onDatastoreForProfilingLoaded,onChange:this.props.onDataStoreForProfilingChange,filterDataStoreType:k.a.SupportedDatastoreTypesForProfiling,filterCredentialLessDataStore:!0,onStart:this.props.onDatastoreForProfilingStart,disableAzureMlGlobalDatasets:!0})))))))}},{key:"componentDidMount",value:function(){var t=this;if(this.generateProfileRef.current&&this.shouldSetFocus){var a=P.a.findDOMNode(this.generateProfileRef.current);if(a&&a instanceof Element){var r=a.querySelector("input");r&&e((function(){r.focus(),t.shouldSetFocus=!1}))}}}},{key:"getFileNames",value:function(e){var t={},a="";return e&&(Array.from(e).forEach((function(e){a="".concat(a).concat(e.name,", ")})),(a=a?a.substring(0,a.length-2):a)&&(t=Object(n.a)({},O.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.BasicInfo.SelectedFiles.replace("{numberOfFiles}","".concat(e.length)),C.a.createElement("div",{className:R}," ",a||""," ")))),t}}]),g}(C.a.Component),q=Object(g.a)(Object(b.a)(B))}).call(this,a("/Qos").setImmediate)},DvOE:function(e,t,a){"use strict";var r;a.d(t,"a",(function(){return r})),function(e){e.Reader="acdd72a7-3385-48ef-bd42-f606fba81ae7",e.StorageBlobDataContributor="ba92f5b4-2d11-453d-a403-e96b0029c9fe",e.StorageBlobDataReader="2a2b9908-6ea1-4ae2-8e65-a410df84e7d1"}(r||(r={}))},F1kx:function(e,t,a){"use strict";var r=a("Uw6p");a.d(t,"a",(function(){return r.a}));var n=a("QfmC");a.d(t,"b",(function(){return n.a}))},FGO1:function(e,t,a){"use strict";var r=a("q/cT");a.d(t,"b",(function(){return r.a}));var n=a("Bf+9");a.d(t,"a",(function(){return n.a}))},FHNI:function(e,t,a){"use strict";a.d(t,"a",(function(){return r.a})),a.d(t,"b",(function(){return i}));var r=a("Xaxw"),n=a("1eWE"),s=a("XpkB"),o=a("LzvZ"),i=function(e){var t=e.outputName,a=e.savedId,r=e.key;return Object(o.a)({name:t,savedId:a,key:r,locStringTemplate:s.b.Lineage.OneHopOutputLabel,event:n.a.OutputDatasetOneHopLineage})}},FQdZ:function(e,t){},FRI9:function(e,t,a){"use strict";var r=a("uhdc");a.d(t,"a",(function(){return r.a}))},G3Bc:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var r=a("VtSi"),n=a.n(r),s=a("zjfJ"),o=a("Czhu"),i=a("QsI/"),c=a("9fIP"),u=a("MMYH"),l=a("1vim"),d=a("XpkB"),p=a("Y9LQ"),m=a("QlF2"),h=a("/zZg"),f=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,null,[{key:"errorsReducer",value:function(){var e=Object(i.a)(n.a.mark((function e(t,a,r,i,c,u){var l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validateField(a,r,i,c,u);case 2:if(l=e.sent,t[a]!==l){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",Object(o.a)(Object(o.a)({},t),{},Object(s.a)({},a,l)));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a,r,n,s,o){return e.apply(this,arguments)}}()},{key:"validateAll",value:function(){var e=Object(i.a)(n.a.mark((function e(t,a,r,s,o){var c,u,l=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},u=!1,e.next=4,Promise.all(Object.keys(t).map(function(){var e=Object(i.a)(n.a.mark((function e(i){var d;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.validateField(i,t[i],a,r,s,o);case 2:d=e.sent,c[i]=d,u=u||!!d;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",u?c:void 0);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r,n,s){return e.apply(this,arguments)}}()},{key:"validatePathPattern",value:function(e){if(e){var t=e;if(-1!==t.search("//"))return d.b.Data.DatasetCreateByUploadPage.Validation.PathPatternDoubleSlashes;var a=new RegExp("{[^{|}]*}"),r=a.exec(t);if(null===r)return d.b.Data.DatasetCreateByUploadPage.Validation.PathPatternNoPart;for(var n=!1;null!==r;){if("{}"===r[0]||r[0].startsWith("{:"))return d.b.Data.DatasetCreateByUploadPage.Validation.PathPatternNoName;if(-1===e.search(r[0])||-1!==e.search("".concat(r[0],"}"))||-1!==e.search("{".concat(r[0])))return d.b.Data.DatasetCreateByUploadPage.Validation.PathPatternBadBracket;if(-1!==r[0].search(":")){if(n)return d.b.Data.DatasetCreateByUploadPage.Validation.PathPatternTooManyDates;n=!0}if(-1===r[0].search(":")&&-1!==r[0].search("/"))return d.b.Data.DatasetCreateByUploadPage.Validation.PathPatternBadBracket;if(r[0].endsWith(":}"))return d.b.Data.DatasetCreateByUploadPage.Validation.PathPatternNoDateFormat;t=-1!==t.search("".concat(r[0],"/"))?t.replace("".concat(r[0],"/"),""):t.replace(r[0],""),r=a.exec(t)}return-1!==t.search("{")||-1!==t.search("}")?d.b.Data.DatasetCreateByUploadPage.Validation.PathPatternBadBracket:void 0}}},{key:"validateField",value:function(){var t=Object(i.a)(n.a.mark((function t(a,r,s,o,i,c){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="datastoreName"===t.t0?3:"datastorePath"===t.t0?4:"sqlQuery"===t.t0?7:"pathPattern"===t.t0?10:(t.t0,11);break;case 3:return t.abrupt("return",e.datastoreName(r,s,c));case 4:if(o&&!Object(m.g)(i)){t.next=6;break}return t.abrupt("return",void 0);case 6:return t.abrupt("return",e.datastorePath(r));case 7:if(o&&Object(m.g)(i)){t.next=9;break}return t.abrupt("return",void 0);case 9:return t.abrupt("return",l.a.isRequired(r,e.errorMessages.sqlQueryIsRequired));case 10:return t.abrupt("return",e.validatePathPattern(r));case 11:return t.abrupt("return",void 0);case 12:case"end":return t.stop()}}),t)})));return function(e,a,r,n,s,o){return t.apply(this,arguments)}}()},{key:"datastorePath",value:function(e){return l.a.matchesRegEx(e,"^((?!//).)*$",d.b.Data.DatasetCreateByUploadPage.Validation.UploadPathCharacters.replace("{uploadPath}",d.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Label))}},{key:"datastoreName",value:function(e,t,a){var r=d.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep;if(a)switch(t){case h.b.Existing:return e?r.DatastoreSelectionIncomplete1:r.DatastoreSelectionIncomplete;case h.b.New:return e?r.DatastoreSelectionIncomplete2:r.DatastoreSelectionIncomplete;default:case h.b.Selected:return l.a.isRequired(e,r.DatastoreSelectionIncomplete)}}},{key:"errorMessages",get:function(){return{datastorePathIsRequired:p.a.getFieldError("FieldIsRequired",d.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Label),sqlQueryIsRequired:p.a.getFieldError("FieldIsRequired",d.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.SqlQuery.Label)}}}]),e}()},"H+g4":function(e,t,a){"use strict";var r=a("zQGN");a.d(t,"a",(function(){return r.a}))},HgRK:function(e,t){},Hsgl:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("9fIP"),n=a("MMYH"),s=a("1vim"),o=a("3nK6"),i=a("XpkB"),c=a("Y9LQ"),u=a("imaQ"),l=a("QlF2"),d=function(){function e(){Object(r.a)(this,e)}return Object(n.a)(e,null,[{key:"validateAll",value:function(e,t,a){var r=this,n={},s=!1;return Object.keys(e).forEach((function(o){var i=r.validateField(o,e[o],t,a);n[o]=i,s=s||!!i})),s?n:void 0}},{key:"validateField",value:function(t,a,r,n){switch(t){case"dataSource":return e.dataSource(a);case"datastore":if(r===u.b.Http)return;return e.datastore(a);case"path":return r===u.b.Http?e.httpUrl(a):r!==u.b.AzureDatastore||Object(l.g)(n)?r===u.b.AzureDatastore&&Object(l.g)(n)?s.a.isRequired(a,e.errorMessages.sqlQueryIsRequired):void 0:e.path(a);default:return}}},{key:"dataSource",value:function(t){return s.a.isRequired(t?t.dataSourceName:void 0,e.errorMessages.dataSourceIsRequired)}},{key:"datastore",value:function(t){var a=s.a.isRequired(t?t.name:void 0,e.errorMessages.datastoreIsRequired),r=t&&t.dataStoreType?void 0:i.b.Dataset.DatasetBasicsPage.Datastore.ErrorMessage;return a||r}},{key:"path",value:function(t){return s.a.isRequired(t,e.errorMessages.pathIsRequired)}},{key:"httpUrl",value:function(e){return s.a.matchesRegEx(e,o.a.Regex.uri,i.b.Dataset.DatasetBasicsPage.DataPath.Http.ErrorMessage)}},{key:"errorMessages",get:function(){return{dataSourceIsRequired:c.a.getFieldError("FieldIsRequired",i.b.Dataset.DatasetBasicsPage.DataSourceField),datastoreIsRequired:i.b.Dataset.DatasetBasicsPage.Datastore.IsRequiredErrorMessage,pathIsRequired:i.b.Dataset.DatasetBasicsPage.DataPath.DatastoreType.BlobOrFile.IsRequiredErrorMessage,httpUrlIsRequired:c.a.getFieldError("FieldIsInvalid",i.b.Dataset.DatasetBasicsPage.DataPath.Http.PathField),sqlQueryIsRequired:i.b.Dataset.DatasetBasicsPage.DataPath.DatastoreType.Database.IsRequiredErrorMessage}}}]),e}()},J0T9:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("in70"),n=a("qA8A"),s=a("Co5R"),o=a("ERkP"),i=a.n(o),c=a("XpkB"),u=a("mWHq"),l=(a("tOwV"),Object(n.a)((function(e){return i.a.createElement(r.a,{isOpen:e.isOpen,panelType:s.a.large,onDismiss:e.onDismiss,className:"dataset-create-from-upload-panel",closeButtonAriaLabel:c.b.Data.Common.Panel.CloseButton.AriaLabel,headerText:c.b.Data.DatasetCreateByUploadPage.Title},i.a.createElement(u.a,e))})))},LzvZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("WC4d"),n=a("jfzg"),s=a("jeyl"),o=a("LWCo"),i=a("ERkP"),c=a.n(i),u=a("yjIu"),l=a("XpkB"),d=function(e){var t=e.name,a=e.savedId,i=e.key,d=e.locStringTemplate,p=e.event,m=c.a.useContext(n.a).getFullPathTo(s.a.DatasetUnregisterDetailsRoute,{datasetId:a}),h=t||l.b.Lineage.NotAvailable,f=d.replace("{name}",h);return c.a.createElement(o.a,{key:i||a,horizontal:!0,tokens:{childrenGap:5}},c.a.createElement(o.a.Item,null,f),c.a.createElement(o.a.Item,null,c.a.createElement(r.a,{key:a,to:m,onClick:function(){u.a.trackEvent(p)}},a)))}},M8uI:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var r=a("fGyu"),n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("FABw"),c=a("nXXe"),u=a("WYY7"),l=a("kjXB"),d=a("ERkP"),p=a.n(d),m=a("DDYV"),h=a("XpkB"),f=a("2P7l"),g=function(e){var t=e.loading,n=e.datasetPreview,d=e.hidePathColumn,g=e.loadingMessage,D=e.noResourceCustomTitle,S=p.a.useContext(l.a),v=p.a.useMemo((function(){return n?function(e,t,a){var n=function(e){if(!e.schema)return[];return e.schema.map((function(e){return{id:e.id||"",type:e.type?f.a[e.type]:f.a.Unknown}}))}(e),s=!1;n.length>0&&"Path"===n[0].id&&a&&(s=!0,n.shift());var o=n.map((function(e){return e.id})),i=[];e.rows&&(i=e.rows.map((function(e){var t=Object(r.a)(e);return s&&t.shift(),{columnNames:o,values:t.map((function(e){return{type:e.type?f.a[e.type]:f.a.Unknown,value:e.value}}))}})));return{dataview:{columnDefinitions:n,rows:i},defaultCompact:!1,theme:t}}(n,S.theme,d):void 0}),[n,S.theme]),C=g||h.b.Data.DatasetCreateFromDatastore.LoadingPreviewMessage;if(t)return b(p.a.createElement(i.a,{message:C}));if(!n||!v)return b(D?p.a.createElement(c.a,{customTitle:D,iconName:u.a.TableEdit}):p.a.createElement(c.a,{resourcesName:h.b.Data.DatasetCreateFromDatastore.DatasetPreviewNoResourceItemName,iconName:u.a.TableEdit}));var y={startRowIndex:0,endRowIndex:v.dataview.rows.length,totalRowsCount:v.dataview.rows.length,loading:!1,columnDefinitions:v.dataview.columnDefinitions,rows:v.dataview.rows},P=p.a.lazy(Object(o.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([a.e(0),a.e(1),a.e(2),a.e(16),a.e(94),a.e(103),a.e(61),a.e(76),a.e(91),a.e(107),a.e(399)]).then(a.bind(null,"lE60")).then((function(e){return{default:e.DataGrid}})));case 1:case"end":return e.stop()}}),e)}))));return b(p.a.createElement(m.a,null,(function(e){var t=e.height,a=e.width;return p.a.createElement(p.a.Suspense,{fallback:p.a.Fragment},p.a.createElement(P,{executionData:y,height:t-10,width:a-10}))})))};function b(e){return p.a.createElement("div",{className:"dataset-preview",style:{minHeight:"150px"}},e)}},MTaO:function(e,t){},MfTv:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var r,n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("FABw"),p=a("q4h2"),m=a("67aH"),h=a("oziZ"),f=a("D0BB"),g=a("nsO7"),b=a.n(g),D=a("auaj"),S=a("CjLF"),v=a("ERkP"),C=a.n(v),y=a("XpkB"),P=a("D+ST"),k=a("J7yX"),O=a("0TDM");a("i4pk");!function(e){e.Editing="Editing",e.Applying="Applying",e.Success="Success",e.Failed="Failed"}(r||(r={}));var F=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).datasetClient=new P.a(n.props.authContext,n.props.workspaceContext),n.onDatasetFileSettingsChange=function(e,t){n.setState({editedDatasetRequest:e,status:r.Editing})},n.onApply=Object(o.a)(s.a.mark((function e(){var t,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({status:r.Applying}),e.next=3,n.datasetClient.parseDataset(n.state.editedDatasetRequest);case 3:(t=e.sent).status===m.a.Ok?(a=t.data?t.data:n.state.editedDatasetRequest,n.setState({status:r.Success,editedDatasetRequest:a}),n.props.onApply(a)):(o=y.b.DatasetFileSettingsDialog.DefaultErrorMessage,t.error&&(o=Object(k.a)(t.error,y.b.Data.Common.ErrorTitlePlaceholder).message),n.setState({status:r.Failed,errorMessage:o}));case 5:case"end":return e.stop()}}),e)}))),n.onDiscard=function(){n.props.onDiscard()},n.state={editedDatasetRequest:e.datasetRequest,status:r.Editing},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.status===r.Applying,t={title:y.b.DatasetFileSettingsDialog.Title,subText:y.b.DatasetFileSettingsDialog.Subtext,cancelButton:y.b.DatasetFileSettingsDialog.CancelButtonText,confirmButton:y.b.DatasetFileSettingsDialog.ApplyButtonText},a=C.a.createElement("div",null,e?C.a.createElement(d.a,{message:y.b.DatasetFileSettingsDialog.ApplyingSettingText}):void 0,this.state.status===r.Failed&&this.state.errorMessage&&!b.a.isEmpty(this.state.errorMessage)?C.a.createElement(D.a,{messageBarType:S.a.error,className:"new-ds-error"},this.state.errorMessage):void 0,C.a.createElement(O.a,{datasetRequest:this.state.editedDatasetRequest,disabled:e,onChange:this.onDatasetFileSettingsChange}));return C.a.createElement(p.a,{className:"ds-fileSet-dlg dataset-module-modal",isOpen:!0,isBlocking:!0,content:a,localeText:t,onDismiss:this.onDiscard,onPrimaryButtonClick:this.onApply})}}]),a}(C.a.Component),E=Object(h.a)(Object(f.a)(F))},Mrdb:function(e,t,a){"use strict";a.d(t,"a",(function(){return me}));var r=a("zjfJ"),n=a("Czhu"),s=a("fGyu"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("ERkP"),d=a.n(l),p=a("WYY7"),m=a("BooY"),h=a("Ippe"),f=a("tSJw"),g=a("fGUH"),b=a("/YEa"),D=a("zQeN"),S=a("Ya8k"),v=a("rfBJ"),C=a("XpkB"),y=a("J0T9"),P=a("NmpN"),k=a("QfmC"),O=a("in70"),F=a("qA8A"),E=a("Co5R"),T=a("v2p0"),w=(a("y+th"),Object(F.a)((function(e){return d.a.createElement(O.a,{isOpen:e.isOpen,panelType:E.a.large,onDismiss:e.onDismiss,className:"dataset-create-from-opendatasets-panel",closeButtonAriaLabel:C.b.Data.Common.Panel.CloseButton.AriaLabel,headerText:C.b.Data.DatasetCreateFromOpenDatasets.Title},d.a.createElement(T.a,e))}))),j=a("VtSi"),x=a.n(j),N=a("QsI/"),M=a("kgxj"),A=a("FABw"),I=a("nXXe"),R=a("67aH"),B=a("1eWE"),q=a("yiDG"),z=a("LuYi"),L=a("sOq8"),V=a("oziZ"),U=a("D0BB"),W=a("7vdV"),G=a("NiBv"),H=a("JywU"),Q=a("D+ST"),_=a("J7yX"),Y=a("poBQ"),X=a("60PN"),K=a("2CWc"),J=a("jk8v"),Z=a("1wVX"),$=a("Q7Ad"),ee=a("a5k3"),te=a("VvDS"),ae=a("m7Gs"),re=a("CPUY"),ne=a("tsep"),se=a("b6Fk"),oe=a("/zZg"),ie=a("DHBr"),ce=(a("VVqF"),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var i,c;return Object(o.a)(this,a),(c=t.call(this,e)).validateBasicInfoStep=void 0,c.datasetsClient=void 0,c.datastoreClient=void 0,c.validateSchemaStep=void 0,c.validateSettingsStep=void 0,c.validateDatastoreSelectionStep=void 0,c.telemetryProps=void 0,c.datastoreCreateFormValues=void 0,c.oldRequest=void 0,c.errorManager=void 0,c.propsToDatasetRequest=function(){var e=Object(K.c)(c.props.dataflowJson);return e.general=Object(n.a)(Object(n.a)({},e.general),{},{properties:c.props.datasetLatestProperties}),Object(n.a)({isVisible:!0,datasetType:c.props.datasetType||G.a.datasetTypes().TabularDataset.Enum,name:c.props.datasetName,description:c.props.datasetDescription,tags:c.props.tags},e)},c.newRequest=function(e){return Object(n.a)(Object(n.a)({},e),{},{columnsToRemove:void 0,schema:void 0})},c.dismissMessage=function(e){c.setState((function(t){return{errorMessages:t.errorMessages.filter((function(t){return t!==e})),datasetTraitFailureMessages:t.datasetTraitFailureMessages.filter((function(t){return t!==e})),datastoreCreateErrors:t.datastoreCreateErrors.filter((function(t){return t!==e}))}}))},c.setDatasetRequest=function(e){c.setState((function(t){var a=e(t.datasetRequest);return a===t.datasetRequest?null:{datasetRequest:a}}))},c.onHttpUrlChange=function(e,t){var a=c.state.errors;a[$.a.BasicInfo].httpUrlError=t;var r=Object(n.a)(Object(n.a)({},c.state.datasetRequest),{},{dataPath:{httpUrl:e}});r.schema=void 0,r.general=void 0,r.columnsToRemove=void 0,c.changeDatasetRequest(r),c.setState((function(e){return{errors:a,traitChangeToggle:!e.traitChangeToggle,datasetPropertyToTraitMap:new Map}}))},c.getDefaultDatastoreOrUndefined=Object(N.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.state.defaultDatastore){e.next=2;break}return e.abrupt("return",c.state.defaultDatastore);case 2:return e.next=4,c.datastoreClient.getDefault(!0,!1);case 4:return e.sent.serviceResponses.subscribe((function(e){t=e.status===R.a.Ok&&e.data?e.data:void 0})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),c.partitionFormatIgnoreErrorOnChange=function(){c.setState((function(e){var t=!(e.datasetRequest&&e.datasetRequest.dataPath&&e.datasetRequest.dataPath.partitionFormatIgnoreError);return{datasetRequest:e.datasetRequest&&e.datasetRequest.dataPath?Object(n.a)(Object(n.a)({},e.datasetRequest),{},{dataPath:Object(n.a)(Object(n.a)({},e.datasetRequest.dataPath),{},{partitionFormatIgnoreError:t})}):Object(n.a)(Object(n.a)({},e.datasetRequest),{},{dataPath:{partitionFormatIgnoreError:t}})}}))},c.onDatastoreLoading=function(){c.setState({loadingDatastore:!0})},c.onDatastoreLoaded=function(){c.setState({loadingDatastore:!1})},c.onDataStoreChange=function(e){void 0!==e&&e!==c.state.targetDatastoreForProfiling&&c.setState({targetDatastoreForProfiling:e})},c.onDatastoreStart=function(e){void 0!==e&&c.setState({targetDatastoreForProfiling:e})},c.unsetWizardErrorState=function(e){c.setState((function(t){return t.stepState[e]===M.WizardStepState.Error?Object(n.a)(Object(n.a)({},t),{},{stepState:Object(n.a)(Object(n.a)({},t.stepState),{},Object(r.a)({},e,M.WizardStepState.CurrentStep))}):null}))},c.onSkipValidationCheckboxChange=function(){c.setState((function(e){return{skipValidation:!e.skipValidation}}))},c.onDatastoreCreateFormValuesChange=function(e){c.datastoreCreateFormValues=e},c.onCreateNewDatastoreSuccess=function(){},c.onCreateNewDatastoreError=function(e){c.setState((function(t){return{datastoreCreateErrors:t.datastoreCreateErrors.concat(e)}}))},c.onDatastoreSelectionChoiceChange=function(e){},c.onProfileCheckboxChange=function(){c.setState((function(e){return{generateProfileAfterCreation:!e.generateProfileAfterCreation}}))},c.onComputeForProfilingChange=function(e){c.setState({targetComputeForProfiling:e})},c.datasetTraitFailureMessagesChanged=function(e){c.setState({datasetTraitFailureMessages:e})},c.datasetTraitChanged=function(){var e=Object(N.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=c.validateSchemaStep,!e.t0){e.next=5;break}return e.next=4,c.validateSchemaStep();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}c.setState((function(e){return{stepState:Object(n.a)(Object(n.a)({},e.stepState),{},Object(r.a)({},t,M.WizardStepState.Error))}}));case 7:c.setState((function(e){return{traitChangeToggle:!e.traitChangeToggle}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.clearDatasetTraitMap=function(){c.setState((function(e){return{traitChangeToggle:!e.traitChangeToggle,datasetPropertyToTraitMap:new Map}}))},c.changeDatasetRequest=function(e){c.setState({datasetRequest:e})},c.basicDatasetError=function(e){c.setState((function(t){return{errors:Object(n.a)(Object(n.a)({},t.errors),{},Object(r.a)({},$.a.BasicInfo,{basicErrors:e,httpUrlError:void 0}))}}))},c.basicDatasetUrlError=function(e){c.setState((function(t){return{errors:Object(n.a)(Object(n.a)({},t.errors),{},Object(r.a)({},$.a.BasicInfo,e))}}))},c.datastoreSelectionError=function(e){c.setState((function(t){return{errors:Object(n.a)(Object(n.a)({},t.errors),{},Object(r.a)({},$.a.DatastoreSelection,e))}}))},c.onDatastoreStepCancel=function(){},c.onDatastoreSelected=function(e){},c.setStepValidateCallback=function(e){c.validateBasicInfoStep=e},c.setSettingsValidateCallback=function(e){c.validateSettingsStep=e},c.setSchemaStepValidateCallback=function(e){c.validateSchemaStep=e},c.setDatastoreSelectionStepValidateCallback=function(e){c.validateDatastoreSelectionStep=e},c.onStepLeaving=function(){var e=Object(N.a)(x.a.mark((function e(t){var a,s,o,i,u,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.setState({isValidating:!0}),a=t.currentStepKey,void 0!==t.nextStepIndex&&void 0!==t.nextStepKey&&a&&!c.state.parsingDataset){e.next=5;break}return c.setState({isValidating:!1}),e.abrupt("return");case 5:if(s=t.nextStepIndex,o=t.currentStepIndex,i=s<o){e.next=41;break}if(e.t3=a===$.a.BasicInfo&&c.validateBasicInfoStep,!e.t3){e.next=14;break}return e.next=13,c.validateBasicInfoStep();case 13:e.t3=!e.sent;case 14:if(e.t2=e.t3,e.t2){e.next=22;break}if(e.t4=a===$.a.SettingsAndPreview&&c.validateSettingsStep,!e.t4){e.next=21;break}return e.next=20,c.validateSettingsStep();case 20:e.t4=!e.sent;case 21:e.t2=e.t4;case 22:if(e.t1=e.t2,e.t1){e.next=30;break}if(e.t5=a===$.a.DatastoreSelection&&c.validateDatastoreSelectionStep,!e.t5){e.next=29;break}return e.next=28,c.validateDatastoreSelectionStep();case 28:e.t5=!e.sent;case 29:e.t1=e.t5;case 30:if(e.t0=e.t1,e.t0){e.next=38;break}if(e.t6=a===$.a.Schema&&c.validateSchemaStep,!e.t6){e.next=37;break}return e.next=36,c.validateSchemaStep();case 36:e.t6=!e.sent;case 37:e.t0=e.t6;case 38:if(!e.t0){e.next=41;break}return c.setState((function(e){return{stepState:Object(n.a)(Object(n.a)({},e.stepState),{},Object(r.a)({},a,M.WizardStepState.Error)),isValidating:!1}})),e.abrupt("return");case 41:u=t.nextStepKey,l=i?M.WizardStepState.NotStarted:M.WizardStepState.Completed,c.setState((function(e){var t;return Object(n.a)(Object(n.a)({},e),{},{currentStepIndex:s,stepState:Object(n.a)(Object(n.a)({},e.stepState),{},(t={},Object(r.a)(t,a,l),Object(r.a)(t,u,M.WizardStepState.CurrentStep),t)),isValidating:!1})}));case 44:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.onCancel=function(){c.trackEvent(B.a.DatasetCreateCancel,{onWizardStep:c.state.currentStepIndex.toString()}),c.props.onDismiss()},c.onDone=Object(N.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=J.a.Prepare(c.state.datasetRequest,c.state.datasetPropertyToTraitMap),c.createDataset(t);case 2:case"end":return e.stop()}}),e)}))),c.parseDataset=function(){var e=Object(N.a)(x.a.mark((function e(t){var a,r,n,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState((function(e){return{parsingDataset:e.parsingDataset+1}})),c.datasetsClient.abort(),t.general||(t.general=c.oldRequest.general),e.next=5,c.datasetsClient.parseDataset(t);case 5:if((a=e.sent).status!==R.a.Ok||!a.data){e.next=23;break}if(!a.data.sourceProperties||a.data.sourceProperties.dataSourceType!==X.a.JSON.Name&&a.data.sourceProperties.dataSourceType!==X.a.Excel.Name&&a.data.sourceProperties.dataSourceType!==X.a.Binary.Name){e.next=12;break}a.data.sourceProperties.dataSourceType=X.a.Plain.Name,a.data.schema=void 0,e.next=23;break;case 12:if(!a.data.sourceProperties||a.data.sourceProperties.dataSourceType!==X.a.JSONLines.Name){e.next=16;break}a.data.schema=void 0,e.next=23;break;case 16:if(r=!1,a.data.general&&!a.data.general.skipMode&&a.data.sourceProperties&&(a.data.general.sourcePropertiesOverride||(a.data.general.sourcePropertiesOverride=a.data.sourceProperties),a.data.general.sourcePropertiesOverride.skipLinesCount=0,a.data.general.skipMode="None",a.data.schema=void 0,r=!0),a.data.general&&!a.data.general.promoteHeadersMode&&a.data.sourceProperties&&(a.data.general.sourcePropertiesOverride||(a.data.general.sourcePropertiesOverride=a.data.sourceProperties),a.data.general.sourcePropertiesOverride.promoteHeaders=!1,a.data.general.promoteHeadersMode="None",a.data.schema=void 0,r=!0),!r){e.next=23;break}return e.next=22,c.datasetsClient.parseDataset(a.data);case 22:a=e.sent;case 23:if(a.status!==R.a.Ok||!a.data){e.next=29;break}return n=a.data,c.setState((function(e){return{parsingDataset:e.parsingDataset-1,datasetRequest:ee.a.mergeRequestSchema(n,c.oldRequest),isParseFailed:!1}})),e.abrupt("return",n);case 29:if(a.status!==R.a.Error){e.next=33;break}return o=c.errorManager.getParseResponseErrorMessagesForUpdate(a.error,C.b.Data.Common.ErrorTitlePlaceholder),c.setState((function(e){return{errorMessages:Object(s.a)(e.errorMessages.concat(o)),parsingDataset:e.parsingDataset-1,isParseFailed:!0}})),e.abrupt("return",void 0);case 33:return c.setState((function(e){return{parsingDataset:e.parsingDataset-1,isParseFailed:!0}})),e.abrupt("return",void 0);case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.getPreview=function(){var e=Object(N.a)(x.a.mark((function e(t,a){var r,o,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.state.skipValidation){e.next=4;break}return c.datasetsClient.abort(),c.setState({loadingPreview:0,parsingDataset:0,datasetPreview:void 0}),e.abrupt("return");case 4:if(!(r=Object(J.b)(t,c.props.flightContext))){e.next=9;break}return c.datasetsClient.abort(),c.setState((function(e){return{datasetPreview:void 0,errorMessages:Object(s.a)(e.errorMessages.concat(r))}})),e.abrupt("return");case 9:if(c.setState((function(e){return{loadingPreview:e.loadingPreview+1}})),c.datasetsClient.abort(),o=t,!a){e.next=16;break}return e.next=15,c.parseDataset(t);case 15:o=e.sent;case 16:if(c.isPreviewEnabled(o)){e.next=19;break}return c.setState((function(e){return{loadingPreview:e.loadingPreview-1,datasetPreview:void 0}})),e.abrupt("return");case 19:return e.next=21,c.datasetsClient.getPreview(Object(n.a)(Object(n.a)({},o),{},{columnsToRemove:[]}));case 21:(i=e.sent).status===R.a.Ok&&i.data?c.setState((function(e){return{loadingPreview:e.loadingPreview-1,datasetPreview:i.data}})):i.status===R.a.Error?c.setState((function(e){return i.error?{loadingPreview:e.loadingPreview-1,datasetPreview:void 0,errorMessages:Object(s.a)(e.errorMessages.concat(H.a.addErrorCodeAndIsUserError("UpdateSchemaAndFilter.getPreview",Object(_.a)(i.error,C.b.Data.Common.ErrorTitlePlaceholder,{errorOverride:"ServiceErrorCodeUpdateSchemaOverrides"}),["UserError"])))}:{loadingPreview:e.loadingPreview-1,datasetPreview:void 0,errorMessages:Object(s.a)(e.errorMessages)}})):c.setState((function(e){return{loadingPreview:e.loadingPreview-1}}));case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),c.createDataset=function(){var e=Object(N.a)(x.a.mark((function e(t){var a,r,n,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({creatingDataset:!0}),c.datasetsClient.abort(),e.next=4,c.datasetsClient.registerDatasetFromDataPath(t,!0,c.state.skipValidation);case 4:if(a=e.sent,r={},a.status!==R.a.Ok||!a.data){e.next=18;break}if(c.state.datasetRequest.datasetType!==G.a.datasetTypes().TabularDataset.Enum||!c.state.generateProfileAfterCreation){e.next=10;break}return e.next=10,c.generateProfile(a.data);case 10:c.props.messageContext.dismissAllMessages(),n=C.b.Data.DatasetCreateFromDatastore.SuccessMessage.replace("{datasetName}",t.name||""),o={title:C.b.Data.DatasetCreateFromDatastore.SuccessTitle,messageType:q.c.Success,message:n},a.data.latest&&a.data.latest.versionId===c.props.datasetVersion&&(o.message=C.b.Data.DatasetCreateFromDatastore.SameDatasetSuccessMessage),c.props.messageContext.addMessage(o),c.props.onCreate({datasetId:a.data.datasetId||"",datasetName:a.data.name||"",versionId:a.data.latest&&a.data.latest.versionId||""}),e.next=19;break;case 18:a.status===R.a.Error&&c.setState((function(e){return a.error?{creatingDataset:!1,errorMessages:Object(s.a)(e.errorMessages.concat(H.a.addErrorCodeAndIsUserError("UpdateSchemaAndFilter.createDataset",Object(_.a)(a.error,C.b.Data.Common.ErrorTitlePlaceholder,{errorOverride:"ServiceErrorCodeUpdateSchemaOverrides"}),["DatasetVersionExists"])))}:{creatingDataset:!1,errorMessages:Object(s.a)(e.errorMessages)}}));case 19:r.datasetType=c.state.datasetRequest.datasetType,r.datasetVersion=a.data&&a.data.latest&&a.data.latest.versionId||"",r.datastoreType=c.state.datastoreType,r.status=a.status.toString(),r.wasGenerateProfileSelected=c.state.generateProfileAfterCreation.toString(),c.trackEvent(B.a.DatasetCreateResult,r);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.generateProfile=function(){var e=Object(N.a)(x.a.mark((function e(t){var a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.props.flightContext.isEnabled(z.a.DatastoreSelectForProfile),r=Boolean(!a||c.state.targetDatastoreForProfiling),!c.state.targetComputeForProfiling||!r){e.next=5;break}return e.next=5,c.datasetsClient.generateProfileWithPreview(t.latest&&t.latest.savedDatasetId?t.latest.savedDatasetId:"",c.state.targetComputeForProfiling,c.state.targetDatastoreForProfiling&&c.state.targetDatastoreForProfiling.name);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.trackEvent=function(e,t){var a=t||{};a.method="Datastore",a.createProviderSource=c.props.createProviderSource,Object(Y.b)(e,a)},c.datasetsClient=new Q.a(e.authContext,e.workspaceContext),c.datastoreClient=new L.a(e.authContext,e.workspaceContext),c.errorManager=new Z.a("UpdateSchemaAndFilter"),c.telemetryProps=Object(n.a)({},e),c.oldRequest=c.propsToDatasetRequest(),c.state={datasetRequest:c.newRequest(c.oldRequest),skipValidation:!1,errors:(i={},Object(r.a)(i,$.a.BasicInfo,{basicErrors:{},httpUrlError:void 0}),Object(r.a)(i,$.a.DatastoreSelection,{}),i),stepState:{BasicInfo:M.WizardStepState.CurrentStep,DatastoreSelection:M.WizardStepState.NotStarted,SettingsAndPreview:M.WizardStepState.NotStarted,Schema:M.WizardStepState.NotStarted,VerificationStep:M.WizardStepState.NotStarted},currentStepIndex:0,parsingDataset:0,loadingPreview:0,creatingDataset:!1,datasetPropertyToTraitMap:ee.a.newTraitPropertiesMap(c.props.datasetLatestProperties),traitChangeToggle:!1,datasetTraitFailureMessages:[],generateProfileAfterCreation:!1,targetComputeForProfiling:void 0,isValidating:!1,errorMessages:[],datastoreCreateErrors:[],isParseFailed:!1,targetDatastoreForProfiling:void 0,loadingDatastore:!1},c}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(N.a)(x.a.mark((function e(){var t,a,r,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefaultDatastoreOrUndefined();case 2:if(t=e.sent,!(r=this.state.datasetRequest.dataPath)||!r.datastoreName){e.next=9;break}return e.next=7,this.datastoreClient.getDatastore(r.datastoreName);case 7:(n=e.sent).status===R.a.Ok&&(a=n.data);case 9:this.setState({defaultDatastore:t,datastore:a,datastoreType:a?a.dataStoreType:void 0});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.creatingDataset?d.a.createElement(A.a,{message:C.b.Data.DatasetCreateFromDatastore.CreatingDatasetMessage}):this.renderWizard()}},{key:"renderWizard",value:function(){if(!this.state.datasetRequest.dataPath)return d.a.createElement(I.a,{customTitle:C.b.Dataset.UpdateSettings.NoWizardError});var e=this.state.datasetRequest.dataPath.httpUrl?[this.basicInfoFromWebUrlStep()]:[this.basicInfoStep(),this.datastoreSelectionFromDatastoreStep()];return this.state.datasetRequest.datasetType===G.a.datasetTypes().TabularDataset.Enum&&e.push(this.settingsAndPreviewStep(),this.schemaStep()),e.push(this.verificationStep()),d.a.createElement("div",{className:"update-schema-and-filter"},d.a.createElement(M.Wizard,{currentStepIndex:this.state.currentStepIndex,onCancel:this.onCancel,onDone:this.onDone,onStepWillLeave:this.onStepLeaving,buttonsOptions:{navigationDisabled:this.isNavigationDisabled()}},e))}},{key:"basicInfoStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.errors,r=e.parsingDataset,n=e.stepState,s=e.datastoreType,o=e.errorMessages,i=e.datasetTraitFailureMessages,c=e.datastoreCreateErrors,u=r>0||this.state.isValidating,l=o.concat(c,i),p=this.props.disableTypeSelection||!!this.props.datasetName;return d.a.createElement(te.a,{bannerMessages:l,bannerMessagesOnDismiss:this.dismissMessage,disableTypeSelection:p,datasetClient:this.datasetsClient,key:$.a.BasicInfo,title:C.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Title,datasetRequest:t,datastoreType:s,errors:a.BasicInfo.basicErrors,onChange:this.changeDatasetRequest,onError:this.basicDatasetError,setValidateCallback:this.setStepValidateCallback,loading:u,state:n.BasicInfo,datasetName:this.props.datasetName,datasetVersion:this.props.datasetVersion,unsetWizardErrorState:this.unsetWizardErrorState})}},{key:"basicInfoFromWebUrlStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.datasetTraitFailureMessages,r=e.errors,n=e.errorMessages,s=e.parsingDataset,o=e.skipValidation,i=e.stepState,c=s>0||this.state.isValidating,u=n.concat(a);return d.a.createElement(ae.a,{bannerMessages:u,bannerMessagesOnDismiss:this.dismissMessage,datasetClient:this.datasetsClient,key:$.a.BasicInfo,title:C.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Title,datasetRequest:t,skipValidation:o,errors:r.BasicInfo,onChange:this.changeDatasetRequest,onError:this.basicDatasetUrlError,setValidateCallback:this.setStepValidateCallback,loading:c,state:i.BasicInfo,parseDataset:this.parseDataset,onHttpUrlChange:this.onHttpUrlChange,setDatasetRequest:this.setDatasetRequest,datasetName:this.props.datasetName,datasetVersion:this.props.datasetVersion,unsetWizardErrorState:this.unsetWizardErrorState,disableTypeSelection:this.props.disableTypeSelection,isSchemaUpdate:!0,disableWebUrl:!0,onSkipValidationCheckboxChange:this.onSkipValidationCheckboxChange})}},{key:"settingsAndPreviewStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.datasetPreview,n=e.loadingPreview,s=e.datastoreType,o=e.errorMessages,i=e.skipValidation;return d.a.createElement(re.a,{skipValidation:i,bannerMessages:o,bannerMessagesOnDismiss:this.dismissMessage,key:$.a.SettingsAndPreview,title:C.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Title,state:a.SettingsAndPreview,datastoreType:s||"AzureBlob",datasetRequest:t,datasetPreview:r,loadingPreview:n>0,onChange:this.changeDatasetRequest,setValidateCallback:this.setSettingsValidateCallback,getPreview:this.getPreview,contextProps:this.telemetryProps,isParseFailed:this.state.isParseFailed,isSchemaUpdate:!0})}},{key:"datastoreSelectionFromDatastoreStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.errors,r=e.errorMessages,n=e.datastoreCreateErrors,s=e.parsingDataset,o=e.skipValidation,i=e.stepState,c=e.datastoreType,u=e.datastore,l=e.defaultDatastore,p=s>0||this.state.isValidating,m=r.concat(n),h=p?C.b.Data.DatasetCreateFromDatastore.ParsingDatasetMessage:void 0;return d.a.createElement(ne.a,{allowDatastoreChange:!0,bannerMessages:m,bannerMessagesOnDismiss:this.dismissMessage,loadingMessage:h,onCancel:this.onDatastoreStepCancel,defaultDatastore:l,key:$.a.DatastoreSelection,title:C.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.TitleFromDatastore,datasetClient:this.datasetsClient,datasetRequest:t,datastoreType:c,skipValidation:o,setValidateCallback:this.setDatastoreSelectionStepValidateCallback,errors:a.DatastoreSelection,onChange:this.changeDatasetRequest,onError:this.datastoreSelectionError,onDatastoreSelected:this.onDatastoreSelected,datastore:u,loading:p,state:i.DatastoreSelection,parseDataset:this.parseDataset,clearDatasetTraitMap:this.clearDatasetTraitMap,partitionFormatIgnoreErrorOnChange:this.partitionFormatIgnoreErrorOnChange,onSkipValidationCheckboxChange:this.onSkipValidationCheckboxChange,unsetWizardErrorState:this.unsetWizardErrorState,datastoreSelectionChoice:oe.b.Selected,datastoreCreateErrors:this.state.datastoreCreateErrors,onCreateNewDatastoreSuccess:this.onCreateNewDatastoreSuccess,onCreateNewDatastoreError:this.onCreateNewDatastoreError,onDatastoreSelectionChoiceChange:this.onDatastoreSelectionChoiceChange,onDatastoreCreateFormValuesChange:this.onDatastoreCreateFormValuesChange,datastoreCreateFormValues:this.datastoreCreateFormValues,isValidating:!0,allowedDatastoreTypes:this.props.allowedDatastoreTypes,isSchemaUpdate:!0})}},{key:"schemaStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.datasetPreview,n=e.datasetPropertyToTraitMap,s=e.loadingPreview,o=e.errorMessages,i=e.datasetTraitFailureMessages,c=o.concat(i);return d.a.createElement(se.a,{bannerMessages:c,bannerMessagesOnDismiss:this.dismissMessage,key:$.a.Schema,datasetPropertyToTraitMap:n,title:C.b.Data.DatasetCreateFromDatastore.Steps.Schema.Title,state:a.Schema,datasetRequest:t,datasetPreview:r,onChange:this.changeDatasetRequest,setValidateCallback:this.setSchemaStepValidateCallback,getPreview:this.getPreview,datasetTraitChanged:this.datasetTraitChanged,messageContext:this.props.messageContext,loadingPreview:s>0,datasetTraitFailureMessagesChanged:this.datasetTraitFailureMessagesChanged,datasetTraitFailureMessages:i,unsetWizardErrorState:this.unsetWizardErrorState})}},{key:"verificationStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.targetComputeForProfiling,n=e.datastoreType,s=e.generateProfileAfterCreation,o=e.errorMessages,i=e.targetDatastoreForProfiling,c=e.loadingDatastore,u=e.creatingDataset,l=u?C.b.Dataset.UpdateSettings.CreatingDatasetMessage:void 0;return d.a.createElement(ie.a,{bannerMessages:o,loadingMessage:l,creatingDataset:u,bannerMessagesOnDismiss:this.dismissMessage,datasetRequest:t,key:$.a.VerificationStep,title:C.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.Title,state:a.VerificationStep,generateProfileAfterCreation:s,onProfileCheckboxChange:this.onProfileCheckboxChange,onComputeForProfilingChange:this.onComputeForProfilingChange,selectedCompute:r,datasetVersion:this.props.datasetVersion,datastoreType:n,selectedDataStore:i,loadingDatastore:c,onDatastoreForProfilingLoading:this.onDatastoreLoading,onDatastoreForProfilingLoaded:this.onDatastoreLoaded,onDataStoreForProfilingChange:this.onDataStoreChange,onDatastoreForProfilingStart:this.onDatastoreStart})}},{key:"isNavigationDisabled",value:function(){return this.state.loadingPreview>0||this.state.parsingDataset>0||this.state.isValidating}},{key:"isPreviewEnabled",value:function(e){return!!e&&(!!(e.dataPath&&e.dataPath.sqlDataPath&&e.dataPath.sqlDataPath.sqlQuery)||(e.general&&e.general.sourcePropertiesOverride?void 0===e.general.sourcePropertiesOverride.dataSourceType||e.general.sourcePropertiesOverride.dataSourceType!==X.a.Binary.Name:!!e.sourceProperties&&!!e.sourceProperties.dataSourceType&&e.sourceProperties.dataSourceType!==X.a.Binary.Name))}}]),a}(d.a.Component)),ue=Object(D.a)(Object(V.a)(Object(U.a)(Object(W.a)(Object(b.a)(ce))))),le=(a("LeyD"),Object(F.a)((function(e){return d.a.createElement(O.a,{isOpen:e.isOpen,panelType:E.a.large,onDismiss:e.onDismiss,className:"update-schema-and-filter-panel",closeButtonAriaLabel:C.b.Data.Common.Panel.CloseButton.AriaLabel,headerText:C.b.Dataset.UpdateSettings.SchemaAndFilter.Title},d.a.createElement(ue,e))}))),de={createFromDatastore:m.d.DatasetCreationFromDatastore,createByUpload:m.d.DatasetCreationFromLocalFiles,createByWebUrl:m.d.DatasetCreationFromWebFiles,createFromOpenDataset:m.d.DatasetCreationFromOpenDatasets},pe=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).appendCreateButton=function(e,t){if(!r.props.authorizationContext.hasPermission(h.a.DatasetsRegisteredWrite)||!r.props.authorizationContext.hasPermission(h.a.DatasetsRegisteredRead))return e;var a=r.createAddDatasetButton();return void 0===t?[].concat(Object(s.a)(e),[a]):[].concat(Object(s.a)(e.slice(0,t)),[a],Object(s.a)(e.slice(t)))},r.state={createFromDatastore:!1,createByUpload:!1,createByWebUrl:!1,createFromOpenDataset:!1,updateSchemaAndFilter:!1},r}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.children;return d.a.createElement(d.a.Fragment,null,this.renderDatasetCreationPanel(k.a,"createFromDatastore"),this.renderDatasetCreationPanel(y.a,"createByUpload"),this.renderDatasetCreationPanel(P.a,"createByWebUrl"),this.renderDatasetCreationPanel(w,"createFromOpenDataset"),this.renderDatasetCreationPanel(le,"updateSchemaAndFilter"),e(this.appendCreateButton))}},{key:"renderDatasetCreationPanel",value:function(e,t){var a=this.props,r=a.datasetName,n=a.datasetVersion,s=a.datasetType,o=a.datasetLatestProperties,i=a.disableTypeSelection,c=a.allowedDatastoreTypes,u=a.datasetDescription,l=a.dataflowJson,p=a.createProviderSource,m=a.tags;return d.a.createElement(e,{isOpen:this.state[t],datasetName:r,datasetType:s,allowedDatastoreTypes:c,datasetVersion:n,disableTypeSelection:i,onDismiss:this.cancelDatasetCreation(t),onCreate:this.datasetCreated(t),createProviderSource:p,dataflowJson:l,datasetDescription:u,datasetLatestProperties:o,tags:m})}},{key:"createAddDatasetButton",value:function(){var e=[];this.props.authorizationContext.hasPermission(h.a.DatastoresRead)&&("NewVersion"===this.props.createProviderSource&&!0!==this.props.disableUpdateSchemaAndFilter&&this.props.authorizationContext.hasPermission(h.a.DatasetsRegisteredPreviewRead)&&e.push({key:"updateSchemaAndFilter",text:C.b.Dataset.UpdateSettings.SchemaAndFilter.Name,title:C.b.Dataset.UpdateSettings.SchemaAndFilter.Title,ariaLabel:C.b.Dataset.UpdateSettings.SchemaAndFilter.Title,iconProps:{iconName:"ColumnOptions"},onClick:this.createDataset("updateSchemaAndFilter")}),!0!==this.props.disableCreateFromDatastore&&e.push({key:"addDatasetByUpload",text:C.b.Dataset.CreateButton.AddDatasetByUpload.Name,title:C.b.Dataset.CreateButton.AddDatasetByUpload.Title,ariaLabel:C.b.Dataset.CreateButton.AddDatasetByUpload.Title,iconProps:{iconName:"OpenFile"},onClick:this.createDataset("createByUpload")}),!0!==this.props.disableCreateFromFileUpload&&e.push({key:"addDatasetFromDatastore",text:C.b.Dataset.CreateButton.AddDatasetFromDatastore.Name,title:C.b.Dataset.CreateButton.AddDatasetFromDatastore.Title,ariaLabel:C.b.Dataset.CreateButton.AddDatasetFromDatastore.Title,iconProps:{iconName:"Table"},onClick:this.createDataset("createFromDatastore")})),!0!==this.props.disableCreateFromWebUrl&&e.push({key:"addDatasetByWebUrl",text:C.b.Dataset.CreateButton.AddDatasetByWebUrl.Name,title:C.b.Dataset.CreateButton.AddDatasetByWebUrl.Title,ariaLabel:C.b.Dataset.CreateButton.AddDatasetByWebUrl.Title,iconProps:{iconName:"FileASPX"},onClick:this.createDataset("createByWebUrl")}),!0!==this.props.disableCreateFromOpenDatasets&&e.push({key:"addDatasetFromOpenDatasets",text:C.b.Dataset.CreateButton.AddDatasetFromOpenDatasets.Name,title:C.b.Dataset.CreateButton.AddDatasetFromOpenDatasets.Title,ariaLabel:C.b.Dataset.CreateButton.AddDatasetFromOpenDatasets.Title,iconProps:{iconName:"OpenSource"},onClick:this.createDataset("createFromOpenDataset")});var t=this.props,a=t.createButtonIcon,r=t.createButtonTitle;return{key:"addDataset",text:r||C.b.Dataset.CreateButton.Title,title:r||C.b.Dataset.CreateButton.Title,ariaLabel:r||C.b.Dataset.CreateButton.Title,iconProps:{iconName:a||p.a.Add},subMenuProps:{items:e}}}},{key:"createDataset",value:function(e){var t=this;return function(){t.setState((function(t){return Object(n.a)(Object(n.a)({},t),{},Object(r.a)({},e,!0))}))}}},{key:"cancelDatasetCreation",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.a.Abandoned;return function(){t.triggerCes(e,a),t.setState((function(t){return Object(n.a)(Object(n.a)({},t),{},Object(r.a)({},e,!1))}))}}},{key:"datasetCreated",value:function(e){var t=this;return function(a){t.cancelDatasetCreation(e,m.a.Completed)(),t.props.onDatasetCreated(a)}}},{key:"triggerCes",value:function(e,t){var a=de[e],r=this.props,n=r.cesSurveyContext,s=r.expContext;a&&s.isEnabled(f.a.DatasetCES)&&n.init(a,s,"DatasetCreationWizard",t)}}]),a}(d.a.Component),me=Object(g.a)(Object(b.a)(Object(D.a)(Object(S.a)(Object(v.a)(pe)))))},NLg6:function(e,t,a){"use strict";var r=a("pIt4");a.d(t,"a",(function(){return r.a}));var n=a("bC+4");a.d(t,"b",(function(){return n.a}));var s=a("PgVj");a.d(t,"e",(function(){return s.a}));var o=a("su4/");a.d(t,"c",(function(){return o.a}));var i=a("+ftt");a.d(t,"d",(function(){return i.a}))},NTZG:function(e,t,a){"use strict";a.r(t);var r=a("Xopk");a.d(t,"ButtonWithGlobalParameter",(function(){return r.a}));var n=a("XX0W");a.d(t,"DatastoreBrowseDialog",(function(){return n.a}));var s=a("a+Fo");a.d(t,"DataStoreSelector",(function(){return s.a}));var o=a("imaQ");a.d(t,"DataSourceTypeEnum",(function(){return o.b})),a.d(t,"HttpDataSource",(function(){return o.c})),a.d(t,"AzureDatastoreDataSource",(function(){return o.a}));var i=a("+TjT");a.d(t,"DropdownOption",(function(){return i.c})),a.d(t,"DelimiterOption",(function(){return i.b})),a.d(t,"EncodingOption",(function(){return i.e})),a.d(t,"FileFormatOption",(function(){return i.f})),a.d(t,"HeaderOption",(function(){return i.g})),a.d(t,"SkipRowsOption",(function(){return i.i})),a.d(t,"ColumnTypeOption",(function(){return i.a})),a.d(t,"DropdownOptionField",(function(){return i.d})),a.d(t,"MultiSelectDropdownOptionField",(function(){return i.h}));var c=a("3rZF");for(var u in c)["default","ButtonWithGlobalParameter","DatastoreBrowseDialog","DataStoreSelector","DataSourceTypeEnum","HttpDataSource","AzureDatastoreDataSource","DropdownOption","DelimiterOption","EncodingOption","FileFormatOption","HeaderOption","SkipRowsOption","ColumnTypeOption","DropdownOptionField","MultiSelectDropdownOptionField"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return c[e]}))}(u);var l=a("FGO1");a.d(t,"DatasetBasicSetting",(function(){return l.b})),a.d(t,"DataPathHelpers",(function(){return l.a}));var d=a("vxEU");for(var u in d)["default","ButtonWithGlobalParameter","DatastoreBrowseDialog","DataStoreSelector","DataSourceTypeEnum","HttpDataSource","AzureDatastoreDataSource","DropdownOption","DelimiterOption","EncodingOption","FileFormatOption","HeaderOption","SkipRowsOption","ColumnTypeOption","DropdownOptionField","MultiSelectDropdownOptionField","DatasetBasicSetting","DataPathHelpers"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return d[e]}))}(u);var p=a("hEKJ");a.d(t,"loadDataflow",(function(){return p.j})),a.d(t,"createExpressionFilterStep",(function(){return p.e})),a.d(t,"addNewExpressionFilterSteps",(function(){return p.c})),a.d(t,"datasetRequestFromDataflowJson",(function(){return p.f})),a.d(t,"getBlock",(function(){return p.i})),a.d(t,"constructDateConditionProp",(function(){return p.d})),a.d(t,"generateCondition",(function(){return p.h})),a.d(t,"generateCombination",(function(){return p.g})),a.d(t,"GenerateMultipleConditionsExpression",(function(){return p.a})),a.d(t,"GenerateSingleConditionExpression",(function(){return p.b}));var m=a("32z6");for(var u in m)["default","ButtonWithGlobalParameter","DatastoreBrowseDialog","DataStoreSelector","DataSourceTypeEnum","HttpDataSource","AzureDatastoreDataSource","DropdownOption","DelimiterOption","EncodingOption","FileFormatOption","HeaderOption","SkipRowsOption","ColumnTypeOption","DropdownOptionField","MultiSelectDropdownOptionField","DatasetBasicSetting","DataPathHelpers","loadDataflow","createExpressionFilterStep","addNewExpressionFilterSteps","datasetRequestFromDataflowJson","getBlock","constructDateConditionProp","generateCondition","generateCombination","GenerateMultipleConditionsExpression","GenerateSingleConditionExpression"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return m[e]}))}(u);var h=a("TZlu");for(var u in h)["default","ButtonWithGlobalParameter","DatastoreBrowseDialog","DataStoreSelector","DataSourceTypeEnum","HttpDataSource","AzureDatastoreDataSource","DropdownOption","DelimiterOption","EncodingOption","FileFormatOption","HeaderOption","SkipRowsOption","ColumnTypeOption","DropdownOptionField","MultiSelectDropdownOptionField","DatasetBasicSetting","DataPathHelpers","loadDataflow","createExpressionFilterStep","addNewExpressionFilterSteps","datasetRequestFromDataflowJson","getBlock","constructDateConditionProp","generateCondition","generateCombination","GenerateMultipleConditionsExpression","GenerateSingleConditionExpression"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return h[e]}))}(u);var f=a("FHNI");a.d(t,"InputDatasetProperty",(function(){return f.a})),a.d(t,"OutputDatasetProperty",(function(){return f.b}));var g=a("D7Io");a.d(t,"LoadableSingleSelect",(function(){return g.a}));var b=a("XcnZ");for(var u in b)["default","ButtonWithGlobalParameter","DatastoreBrowseDialog","DataStoreSelector","DataSourceTypeEnum","HttpDataSource","AzureDatastoreDataSource","DropdownOption","DelimiterOption","EncodingOption","FileFormatOption","HeaderOption","SkipRowsOption","ColumnTypeOption","DropdownOptionField","MultiSelectDropdownOptionField","DatasetBasicSetting","DataPathHelpers","loadDataflow","createExpressionFilterStep","addNewExpressionFilterSteps","datasetRequestFromDataflowJson","getBlock","constructDateConditionProp","generateCondition","generateCombination","GenerateMultipleConditionsExpression","GenerateSingleConditionExpression","InputDatasetProperty","OutputDatasetProperty","LoadableSingleSelect"].indexOf(u)<0&&function(e){a.d(t,e,(function(){return b[e]}))}(u);var D=a("FRI9");a.d(t,"NewDataStoreDialog",(function(){return D.a}));var S=a("H+g4");a.d(t,"SelectCompute",(function(){return S.a}));var v=a("ckj/");a.d(t,"DatastoreSelectLazyList",(function(){return v.a}))},NiBv:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r,n=a("zygG"),s=a("XpkB"),o=function(){return{FileDataset:{Label:s.b.DatasetTypes.File.Label,Enum:"file"},TabularDataset:{Label:s.b.DatasetTypes.Tabular.Label,Enum:"tabular"},LegacyDataset:{Label:s.b.DatasetTypes.Legacy.Label,Enum:void 0}}};!function(e){e.dataset_profile="Experiment dataset_profile Environment",e.dataset_unregistered_datasets="Experiment dataset_unregistered_datasets Environment"}(r||(r={}));var i={datasetTypes:o,datasetTypeEnumToLabel:function(e){for(var t=0,a=Object.entries(o());t<a.length;t++){var r=Object(n.a)(a[t],2)[1];if(r.Enum===e)return r.Label}return o().TabularDataset.Label},generateProfileEnvName:r,MaxDatasetNameLength:255,SupportedDatastoreTypesForFileTypeDataset:["AzureBlob","AzureFile","AzureDataLake","AzureDataLakeGen2"],SupportedDatastoreTypesForDatasetCreateByUpload:["AzureBlob","AzureDataLakeGen2"],SupportedDatastoreTypesForTabularTypeDataset:["AzureBlob","AzureFile","AzureDataLake","AzureDataLakeGen2","AzureSqlDatabase","AzurePostgreSql"],SupportedDatastoreTypesForProfiling:["AzureBlob"],Latest:"latest"}},NmpN:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("in70"),n=a("qA8A"),s=a("Co5R"),o=a("ERkP"),i=a.n(o),c=a("XpkB"),u=a("4js/"),l=(a("afgS"),Object(n.a)((function(e){return i.a.createElement(r.a,{isOpen:e.isOpen,panelType:s.a.large,onDismiss:e.onDismiss,closeButtonAriaLabel:c.b.Data.Common.Panel.CloseButton.AriaLabel,headerText:c.b.Data.DatasetCreateByWebUrlPage.Title,className:"dataset-create-from-web-url-panel"},i.a.createElement(u.a,e))})))},"O+BM":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return n}));var r={AzureBlob:["AccountKey","Sas"],AzureFile:["AccountKey","Sas"],AzureDataLake:["ServicePrincipal"],AzureDataLakeGen2:["ClientCredentials"],AzurePostgreSql:["SqlAuthentication"],AzureMySql:["SqlAuthentication"],AzureSqlDatabase:["SqlAuthentication","ServicePrincipal"]};function n(e){var t=r[e];return Boolean(t&&t.length)}},Oj7w:function(e,t,a){"use strict";var r=a("tsep");a.d(t,"a",(function(){return r.a}));var n=a("G3Bc");a.d(t,"c",(function(){return n.a}));var s=a("fEBu");a.d(t,"b",(function(){return s.a}))},PHYI:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var r,n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("zygG"),c=a("WbBJ"),u=a("2Rx3"),l=a("1eWE"),d=a("PXFs"),p=a("ctLR"),m=a("ERkP"),h=a.n(m),f=a("yjIu"),g=a("XpkB"),b=a("a+Fo"),D=a("sM9X"),S=a("cqFV"),v=a("QdS/"),C=function(e){return m.createElement(m.Fragment,null,m.createElement(S.a,{text:g.b.ComputeDetails.MountCreate.MountStorage.ChoiceGroups.StorageUrl,required:!0}),m.createElement(v.a,{ariaLabel:g.b.ComputeDetails.MountCreate.MountStorage.ChoiceGroups.StorageUrl,value:e.storageUrl,errorMessage:e.storageUrlErrorMessage,onChange:e.onChangeStorageUrl,required:!0}))};!function(e){e.Datastore="Datastore",e.StorageUrl="StorageUrl"}(r||(r={}));var y=["AzureBlob","AzureDataLake","AzureDataLakeGen2","AzureFile"],P=function(e){var t=h.a.useState(r.Datastore),a=Object(i.a)(t,2),n=a[0],m=a[1],S=h.a.useState(void 0),v=Object(i.a)(S,2),P=v[0],k=v[1],O=h.a.useState(""),F=Object(i.a)(O,2),E=F[0],T=F[1],w=h.a.useState(void 0),j=Object(i.a)(w,2),x=j[0],N=j[1],M=h.a.useState(""),A=Object(i.a)(M,2),I=A[0],R=A[1],B=h.a.useState(void 0),q=Object(i.a)(B,1)[0];h.a.useEffect((function(){f.a.trackEvent(l.a.MountFromStorageStart)}),[]);var z=h.a.useMemo((function(){return e.existingMounts.map((function(e){return e.name}))}),[e.existingMounts]),L=h.a.useMemo((function(){return[{key:r.Datastore,text:g.b.ComputeDetails.MountCreate.MountStorage.ChoiceGroups.Datastore},{key:r.StorageUrl,text:g.b.ComputeDetails.MountCreate.MountStorage.ChoiceGroups.StorageUrl}]}),[g.b]),V=function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:E,datasourceType:n,mountedPath:"MountPath",permissions:"Read/Write",state:"MountRequested",createdOn:new Date,createdBy:"Service Principal"},d.a.log("Mount createdConvertedObj: ".concat(JSON.stringify(t))),e.abrupt("return",Promise.resolve(t));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var t=Object(o.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V();case 2:a=t.sent,f.a.trackEvent(n===r.Datastore?l.a.MountFromStorageDatastoreDone:l.a.MountFromStorageUrlDone),e.onDone(a);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return h.a.createElement(c.a,{primaryButtonText:g.b.ComputeDetails.MountCreate.Create,initialFormValues:{},validate:function(){var e=n===r.Datastore?Boolean(P&&E):Boolean(I&&E);return x&&(e=!1),e},handleSubmit:U,handleCancel:function(){f.a.trackEvent(l.a.MountFromStorageCancel),e.onCancel()}},h.a.createElement(p.a,null,g.b.ComputeDetails.MountCreate.MountStorage.Instructions),h.a.createElement(u.a,{"data-automation-id":"themeSelector",selectedKey:n,onOptionSelection:function(e){e&&m(e)},options:L,horizontal:!0}),n===r.Datastore?h.a.createElement(b.a,{label:g.b.ComputeDetails.MountCreate.MountStorage.ChoiceGroups.Datastore,required:!0,disableAzureMlGlobalDatasets:!0,selectedDataStore:P,hideWhenLoading:!1,placeholder:g.b.ComputeDetails.MountCreate.MountStorage.DatastorePlaceholder,onChange:k,filterDataStoreType:y}):h.a.createElement(C,{storageUrl:I,storageUrlErrorMessage:q,onChangeStorageUrl:function(e,t){R(null!==t&&void 0!==t?t:"")}}),h.a.createElement(D.a,{onChangeFriendlyName:function(e,t){var a=null!==t&&void 0!==t?t:"";N(Object(D.b)(z,a,!0)),T(a)},friendlyName:E,friendlyNameErrorMessage:x}))}},PTrN:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("XpkB"),c=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,null,[{key:"None",get:function(){return new a("None",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.SkipRows.None)}},{key:"FromFirstFile",get:function(){return new a("FirstFile",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.SkipRows.FromFirstFile)}},{key:"FromAllFiles",get:function(){return new a("AllFiles",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.SkipRows.FromAllFiles)}},{key:"DefaultSelection",get:function(){return a.None}},{key:"All",get:function(){return[a.None,a.FromFirstFile,a.FromAllFiles]}}]),a}(a("WTLv").a)},PgVj:function(e,t,a){"use strict";var r=a("0epw");a.d(t,"a",(function(){return r.a}))},Q7Ad:function(e,t,a){"use strict";var r;a.d(t,"a",(function(){return r})),function(e){e.BasicInfo="BasicInfo",e.DatastoreSelection="DatastoreSelection",e.SettingsAndPreview="SettingsAndPreview",e.Schema="Schema",e.VerificationStep="VerificationStep"}(r||(r={}))},QF98:function(e,t,a){"use strict";a.r(t);var r=a("M8uI");a.d(t,"DatasetPreview",(function(){return r.a}));var n=a("sgop");for(var s in n)["default","DatasetPreview"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);var o=a("CPUY");a.d(t,"SettingsAndPreviewStep",(function(){return o.a}))},QdRb:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var r=a("d0cs"),n=a("LWCo"),s=a("ERkP"),o=a.n(s),i=a("RF/u"),c=a("WC4d"),u=a("cqFV"),l=a("3q6J"),d=a("s+9k"),p=a("WYY7"),m=a("LsED"),h=a("NiBv"),f=a("XpkB"),g=a("QlF2"),b=Object(r.db)({marginLeft:"5px"}),D=function(e){var t=h.a.datasetTypes(),a=!1,r=t.FileDataset.Label;Object(g.g)(e.datastoreType)&&(a=!0,r="".concat(r," (").concat(f.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.DatasetType.UnsupportedDatasetTypeForSqlDatastore,")"));var n=[{key:t.TabularDataset.Enum,text:t.TabularDataset.Label},{key:t.FileDataset.Enum,text:r,disabled:a}];return o.a.createElement(i.a,{label:f.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.DatasetType.Label,options:n,onChange:function(t,a){e.onChange(t)},disabled:e.disabled,selectedKey:e.selectedType,required:!0,errorMessage:e.errorMessage,onRenderLabel:S})};function S(e){var t=f.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.DatasetType,a=t.Tooltip1.split("{tabularDataset}"),r=t.Tooltip2.split("{fileDataset}"),s=o.a.createElement(o.a.Fragment,null,t.Tooltip0,o.a.createElement("br",null),a[0],o.a.createElement(c.a,{href:"".concat(m.a.config.docsBaseUrl,"/python/api/azureml-core/azureml.data.tabulardataset?view=azure-ml-py")},t.TooltipTabularDataset),a[1],o.a.createElement("br",null),r[0],o.a.createElement(c.a,{href:"".concat(m.a.config.docsBaseUrl,"/python/api/azureml-core/azureml.data.file_dataset.filedataset?view=azure-ml-py")},t.TooltipFileDataset),r[1]),i=e.label;return o.a.createElement(n.a,{horizontal:!0,verticalAlign:"center"},o.a.createElement(u.a,{text:i,required:e.required}),o.a.createElement(l.a,{content:s},o.a.createElement(d.a,{name:p.a.Info,className:b})))}},QfmC:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("in70"),n=a("qA8A"),s=a("Co5R"),o=a("ERkP"),i=a.n(o),c=a("XpkB"),u=a("Uw6p"),l=(a("j9bI"),Object(n.a)((function(e){return i.a.createElement(r.a,{isOpen:e.isOpen,panelType:s.a.large,onDismiss:e.onDismiss,className:"dataset-create-from-datastore-panel",closeButtonAriaLabel:c.b.Data.Common.Panel.CloseButton.AriaLabel,headerText:c.b.Data.DatasetCreateFromDatastore.Title},i.a.createElement(u.a,e))})))},QkrK:function(e,t,a){"use strict";var r=a("ApYq");a.d(t,"a",(function(){return r.a}));var n=a("feRm");a.d(t,"b",(function(){return n.a}));var s=a("pXM3");a.d(t,"c",(function(){return s.a}))},QlF2:function(e,t,a){"use strict";a.d(t,"d",(function(){return h})),a.d(t,"f",(function(){return f})),a.d(t,"k",(function(){return b})),a.d(t,"g",(function(){return D})),a.d(t,"c",(function(){return S})),a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return C})),a.d(t,"h",(function(){return y})),a.d(t,"i",(function(){return P})),a.d(t,"j",(function(){return k})),a.d(t,"e",(function(){return F}));var r=a("VtSi"),n=a.n(r),s=a("zjfJ"),o=a("Czhu"),i=a("QsI/"),c=a("LsED"),u=a("1eWE"),l=a("nsO7"),d=a.n(l),p=a("v2p0"),m=a("Q7Ad");function h(){return{audience:c.a.config.azureStorageResourceEndpoint,scope:"user_impersonation"}}function f(e,t){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||"AzureBlob"!==a.dataStoreType||!a.azureStorageSection){e.next=5;break}if(a.azureStorageSection.credential){e.next=5;break}return e.next=4,t.getToken(h());case 4:r=e.sent;case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){return Boolean(e.dataStoreType&&(function(e,t){return"AzureBlob"===e.dataStoreType&&e.azureStorageSection&&e.azureStorageSection.credential&&"None"!==e.azureStorageSection.credentialType||Boolean(t)}(e,t)||function(e){return Boolean(e)}(t)))}function D(e){switch(e){case"AzurePostgreSql":case"AzureMySql":case"AzureSqlDatabase":return!0;default:return!1}}function S(e,t){return!!(e&&t&&t.indexOf(e)>-1)}function v(e,t,a){switch(t){case"datasetName":return e.name!==a?Object(o.a)(Object(o.a)({},e),{},{name:a}):e;case"datasetDescription":return e.description!==a?Object(o.a)(Object(o.a)({},e),{},{description:a}):e;case"datasetType":return e.datasetType!==a?Object(o.a)(Object(o.a)({},e),{},{datasetType:a}):e;default:return e}}function C(e,t,a,r){switch(t){case"datastoreName":var n=O(e,"datastoreName",a);return r&&(n=D(r)?O(n,"partitionFormat",""):O(n,"sqlDataPath",{sqlQuery:""})),n;case"datastorePath":return O(e,"relativePath",a);case"sqlQuery":return k(e,"sqlQuery",a);case"queryTimeout":var s=parseInt(a,10);return isNaN(s)&&(s=void 0),k(e,"queryTimeout",s);case"pathPattern":return O(e,"partitionFormat",a);case"userDatastorePath":var i=O(e,"relativePath",a);return e.userDatastorePath!==a?Object(o.a)(Object(o.a)({},i),{},{userDatastorePath:a}):i;default:return e}}function y(e){return{datasetName:e.name||"",datasetDescription:e.description||"",datasetType:e.datasetType||""}}function P(e,t){var a="",r="";if(D(t)){a=e.dataPath&&e.dataPath.sqlDataPath&&e.dataPath.sqlDataPath.sqlQuery||"";var n=e.dataPath&&e.dataPath.sqlDataPath&&e.dataPath.sqlDataPath.queryTimeout;r=d.a.isNil(n)?"":"".concat(n)}return{datastorePath:e.dataPath&&e.dataPath.relativePath||"",datastoreName:e.dataPath&&e.dataPath.datastoreName||"",sqlQuery:a,pathPattern:e.dataPath&&e.dataPath.partitionFormat||"",userDatastorePath:e.userDatastorePath||"",queryTimeout:r}}function k(e,t,a){return e.dataPath?e.dataPath.sqlDataPath?d.a.isEqual(e.dataPath.sqlDataPath[t],a)?e:Object(o.a)(Object(o.a)({},e),{},{general:void 0,schema:void 0,columnsToRemove:void 0,dataPath:Object(o.a)(Object(o.a)({},e.dataPath),{},{sqlDataPath:Object(o.a)(Object(o.a)({},e.dataPath.sqlDataPath),{},Object(s.a)({},t,a))})}):Object(o.a)(Object(o.a)({},e),{},{dataPath:Object(o.a)(Object(o.a)({},e.dataPath),{},{sqlDataPath:Object(s.a)({},t,a)})}):Object(o.a)(Object(o.a)({},e),{},{dataPath:{sqlDataPath:Object(s.a)({},t,a)}})}function O(e,t,a){return e.dataPath?d.a.isEqual(e.dataPath[t],a)?e:Object(o.a)(Object(o.a)({},e),{},{general:void 0,schema:void 0,columnsToRemove:void 0,dataPath:Object(o.a)(Object(o.a)({},e.dataPath),{},Object(s.a)({},t,a))}):Object(o.a)(Object(o.a)({},e),{},{dataPath:Object(s.a)({},t,a)})}function F(e){switch(e){case m.a.BasicInfo:return u.a.DatasetCreateBasicInfoStep;case m.a.DatastoreSelection:return u.a.DatasetCreateDatastoreStep;case m.a.Schema:return u.a.DatasetCreateSchemaStep;case m.a.SettingsAndPreview:return u.a.DatasetCreatePreviewStep;case m.a.VerificationStep:return u.a.DatasetCreateVerificationStep;case p.b.SelectStep:return u.a.DatasetCreateAodSelectStep;case p.b.FilterStep:return u.a.DatasetCreateAodFilterStep;default:return u.a.DatasetCreateNavigate}}},SF3I:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("q4h2"),c=a("rxFa"),u=a("d0cs"),l=a("ERkP"),d=a.n(l),p=a("XpkB"),m=a("V4bT"),h=a("Opk0"),f=a("uMNk"),g=a("/1ND"),b=a("a5k3"),D=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){return Object(r.a)(this,a),t.call(this,e)}return Object(n.a)(a,[{key:"render",value:function(){var e=this.getColumnDefinitions(),t=b.a.mapToColumnDefinitionField(this.props.datasetRequest);return d.a.createElement(m.a,{columns:e,items:t,selectionMode:f.c.none,hideFilter:!0,itemsPerPage:50,noSorting:!0})}},{key:"getColumnDefinitions",value:function(){var e=this;return[{header:p.b.DatasetSchemaPreview.ColumnList.Include,field:"include",minWidth:30,maxWidth:30,render:function(t,a){return d.a.createElement(h.a,{checked:a.include,onChange:e.getOnColumnChangeEventForCheckbox(a.name,"include"),label:"",ariaLabel:p.b.DatasetSchemaPreview.ColumnList.AriaLabelForInclude})}},{header:p.b.DatasetSchemaPreview.ColumnList.ColumnName,field:"name",minWidth:240,maxWidth:240},{header:p.b.DatasetSchemaPreview.ColumnList.ColumnType,field:"columnType",minWidth:120,maxWidth:120,render:function(t,a){return d.a.createElement(g.a,{columnType:a.columnType,onChange:e.getOnColumnChangeEvent(a.name,"columnType"),disabled:!a.include})}}]}},{key:"getOnColumnChangeEventForCheckbox",value:function(e,t){var a=this;return function(r,n){var s=b.a.reduceSchemaColumn(a.props.datasetRequest,e,t,n);a.props.datasetRequest!==s&&a.props.onChange(s)}}},{key:"getOnColumnChangeEvent",value:function(e,t){var a=this;return function(r){var n=b.a.reduceSchemaColumn(a.props.datasetRequest,e,t,r);a.props.datasetRequest!==n&&a.props.onChange(n)}}}]),a}(d.a.Component),S=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onUpdateSchema=function(e){n.setState({editedRequestDto:e})},n.onSaveChange=function(){n.props.onSaveButtonClick(n.state.editedRequestDto)},n.onCancel=function(){n.props.onCancelButtonClick()},n.state={editedRequestDto:n.props.requestDto},n}return Object(n.a)(a,[{key:"render",value:function(){var e={title:p.b.DatasetSchemaPreview.Title,subText:p.b.DatasetSchemaPreview.DialogSubtext,cancelButton:p.b.DatasetSchemaPreview.CancelButtonText,confirmButton:p.b.DatasetSchemaPreview.SaveButtonText},t=l.createElement("div",null,!this.props.hideParsingOptionsButton&&l.createElement(c.a,{onClick:this.props.onShowFileSettingDialog,className:"preview-ds-button"},p.b.DatasetSchemaPreview.ParseOptionButtonText),l.createElement(D,{datasetRequest:this.state.editedRequestDto,onChange:this.onUpdateSchema})),a=Object(u.db)("prev-ds-dialog dataset-module-modal",{selectors:{"div.ms-Modal-scrollableContent div.modal-header":{marginBottom:"16px"}}});return l.createElement(i.a,{className:a,isOpen:!0,isBlocking:!0,content:t,localeText:e,onDismiss:this.onCancel,onPrimaryButtonClick:this.onSaveChange})}}]),a}(l.Component)},TSkZ:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("ERkP"),c=a("/58v"),u=a("1vim"),l=a("3nK6"),d=a("XpkB"),p=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(c.a,{showPrivacyIcon:!0,name:"datastoreName",label:d.b.Datastore.DatastoreEditPage.CommonFields.DatastoreName.label,required:!0,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return u.a.isRequired(e,d.b.Datastore.DatastoreEditPage.CommonFields.DatastoreName.ValidationErrors.Required)||u.a.withinLengthRange(e,1,l.a.Datastore.DatastoreName.MaxLength,d.b.Datastore.DatastoreEditPage.CommonFields.DatastoreName.ValidationErrors.MaxLen)||u.a.matchesRegEx(e,l.a.Regex.alphaNumericSmallCase,d.b.Datastore.DatastoreEditPage.CommonFields.DatastoreName.ValidationErrors.RegeX)}}]),a}(i.Component)},TUpj:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("nmZI"),d=a("gWnc"),p=a("67aH"),m=a("oziZ"),h=a("7vdV"),f=a("ERkP"),g=a.n(f),b=a("JywU"),D=a("XpkB"),S=a("J7yX");function v(e){if(e){var t=e.filter((function(e){return e.subscriptionId&&e.displayName})).map((function(e){return{key:e.subscriptionId,text:"".concat(e.displayName," (").concat(e.subscriptionId,")"),ariaLabel:e.subscriptionId}}));return t.sort((function(e,t){return e.text.localeCompare(t.text)})),t}return[]}var C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).subscriptionClient=void 0,r.subscriptionClient=new d.a(r.props.authContext),r.state={loading:!1,options:[]},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadSubscriptions()}},{key:"componentWillUnmount",value:function(){this.subscriptionClient.dispose()}},{key:"render",value:function(){var e=this.state.loading?D.b.Data.Common.LoadingWithEllipsis:void 0,t=this.props.disabled||this.state.loading;return g.a.createElement(l.a,{name:"subscriptionId",label:D.b.Datastore.DatastoreEditPage.CommonFields.SubscriptionId.label,required:!0,options:this.state.options,multiSelect:!1,disabled:t,placeholder:e})}},{key:"loadSubscriptions",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0,options:[]}),e.next=3,this.subscriptionClient.getAllSubscriptions();case 3:e.sent.serviceResponses.subscribe((function(e){var a=[];e.status===p.a.Ok?a=v(e.data):e.status===p.a.Error&&t.props.messageContext.addMessage(b.a.addErrorCodeAndIsUserError("SubscriptionField LoadSubscriptions",Object(S.a)(e.error,D.b.Data.Common.ErrorTitlePlaceholder))),t.setState({loading:!1,options:a})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(g.a.Component),y=Object(m.a)(Object(h.a)(C))},TZlu:function(e,t,a){"use strict";a.r(t);var r=a("YLaE");for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);var s=a("kSZ9");a.d(t,"AccountSelectionMethod",(function(){return s.a})),a.d(t,"DatastoreName",(function(){return s.b})),a.d(t,"validate",(function(){return s.h})),a.d(t,"DatastoreType",(function(){return s.c})),a.d(t,"SubscriptionField",(function(){return s.f})),a.d(t,"ResourceByTypeField",(function(){return s.d})),a.d(t,"optionMapper",(function(){return s.g})),a.d(t,"ResourceGroupField",(function(){return s.e}));var o=a("1U7Y");for(var n in o)["default","AccountSelectionMethod","DatastoreName","validate","DatastoreType","SubscriptionField","ResourceByTypeField","optionMapper","ResourceGroupField"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(n);var i=a("ZYzI");a.d(t,"DatastoreCreateForm",(function(){return i.a}));var c=a("bTG4");for(var n in c)["default","AccountSelectionMethod","DatastoreName","validate","DatastoreType","SubscriptionField","ResourceByTypeField","optionMapper","ResourceGroupField","DatastoreCreateForm"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return c[e]}))}(n)},TiAf:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return l}));var r=a("ERkP"),n=a.n(r),s=a("XpkB"),o=a("B8aL"),i=a("7xHg"),c=a("60PN"),u=function(e){return l(e.fileFormat)?null:n.a.createElement(o.a,{label:s.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Headers.Label,title:s.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Headers.Title,disabled:e.disabled,onChange:e.onChange,options:i.a.All,selectedOption:e.selectedOption})};function l(e){return e.Name===c.a.Binary.Name||e.Name===c.a.JSON.Name||e.Name===c.a.ParquetFile.Name}},TwvB:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c}));var r=a("YFUp"),n=a("ERkP"),s=a("XpkB");function o(){return[{header:s.b.ComputeDetails.Data.MountsColumns.Name,field:"name",minWidth:50,maxWidth:200},{header:s.b.ComputeDetails.Data.MountsColumns.Type,field:"datasourceType",minWidth:100,maxWidth:200},{header:s.b.ComputeDetails.Data.MountsColumns.Permissions,field:"permissions",minWidth:100,maxWidth:200},{header:s.b.ComputeDetails.Data.MountsColumns.MountedPath,field:"mountedPath",minWidth:100,maxWidth:200},{header:s.b.ComputeDetails.Data.MountsColumns.State,field:"state",minWidth:100,maxWidth:200},{header:s.b.ComputeDetails.Data.MountsColumns.CreatedOn,field:"createdOn",minWidth:100,maxWidth:200},{header:s.b.ComputeDetails.Data.MountsColumns.CreatedBy,field:"createdBy",minWidth:100,maxWidth:200,render:i}]}var i=function(e,t){return n.createElement(r.a,{userName:t.createdBy,tooltip:t.createdBy})};function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=[{name:"my_blob_datastore_mount",datasourceType:s.b.ComputeDetails.Enums.MountTypes.Datastore,permissions:s.b.ComputeDetails.Enums.Permissions.ReadWrite,mountedPath:"/mnt/blobmounts/my_blob_datastore_mount",state:s.b.ComputeDetails.Enums.MountState.Mounted,createdBy:"Firstname Lastname",createdOn:new Date},{name:"public_uri_mount",datasourceType:s.b.ComputeDetails.Enums.MountTypes.Uri,permissions:s.b.ComputeDetails.Enums.Permissions.Read,mountedPath:"/mnt/urimounts/public_uri_mount",state:s.b.ComputeDetails.Enums.MountState.Mounted,createdBy:"03298685-bd58-4c72-aa5b-3fb448934d52",createdOn:new Date}];return t?a:[]}},"UbA/":function(e,t){},Uw6p:function(e,t,a){"use strict";a.d(t,"a",(function(){return K}));var r=a("fGyu"),n=a("zjfJ"),s=a("Czhu"),o=a("VtSi"),i=a.n(o),c=a("QsI/"),u=a("9fIP"),l=a("MMYH"),d=a("8K1b"),p=a("AqVP"),m=a("kgxj"),h=a("67aH"),f=a("1eWE"),g=a("yiDG"),b=a("jeyl"),D=a("LuYi"),S=a("sOq8"),v=a("Ippe"),C=a("zQeN"),y=a("fGUH"),P=a("oziZ"),k=a("D0BB"),O=a("7vdV"),F=a("/YEa"),E=a("fTZT"),T=a("47ii"),w=a("ERkP"),j=a.n(w),x=a("JywU"),N=a("NiBv"),M=a("yjIu"),A=a("XpkB"),I=a("D+ST"),R=a("J7yX"),B=a("poBQ"),q=a("60PN"),z=a("jk8v"),L=a("1wVX"),V=a("QlF2"),U=a("Q7Ad"),W=a("VvDS"),G=a("CPUY"),H=a("tsep"),Q=a("b6Fk"),_=a("/zZg"),Y=a("DHBr"),X=(a("dPEp"),function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var o,l;Object(u.a)(this,a),(l=t.call(this,e)).validateBasicInfoStep=void 0,l.datasetsClient=void 0,l.datastoreClient=void 0,l.validateSchemaStep=void 0,l.validateSettingsStep=void 0,l.validateDatastoreSelectionStep=void 0,l.telemetryProps=void 0,l.datastoreCreateFormValues=void 0,l.wizardRef=j.a.createRef(),l.errorManager=void 0,l.dismissMessage=function(e){l.setState((function(t){return{errorMessages:t.errorMessages.filter((function(t){return t!==e})),datasetTraitFailureMessages:t.datasetTraitFailureMessages.filter((function(t){return t!==e})),datastoreCreateErrors:t.datastoreCreateErrors.filter((function(t){return t!==e}))}}))},l.tabularDatasetWizardChildren=function(){return[l.basicInfoStep(),l.datastoreSelectionFromDatastoreStep(),l.settingsAndPreviewStep(),l.schemaStep(),l.verificationStep()]},l.fileDatasetWizardChildren=function(){return[l.basicInfoStep(),l.datastoreSelectionFromDatastoreStep(),l.verificationStep()]},l.getDefaultDatastoreOrUndefined=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.state.defaultDatastore){e.next=2;break}return e.abrupt("return",l.state.defaultDatastore);case 2:return e.next=4,l.datastoreClient.getDefault(!0,!1);case 4:return e.sent.serviceResponses.subscribe((function(e){t=e.status===h.a.Ok&&e.data?e.data:void 0})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),l.partitionFormatIgnoreErrorOnChange=function(){l.setState((function(e){var t=!(e.datasetRequest&&e.datasetRequest.dataPath&&e.datasetRequest.dataPath.partitionFormatIgnoreError);return{datasetRequest:e.datasetRequest&&e.datasetRequest.dataPath?Object(s.a)(Object(s.a)({},e.datasetRequest),{},{dataPath:Object(s.a)(Object(s.a)({},e.datasetRequest.dataPath),{},{partitionFormatIgnoreError:t})}):Object(s.a)(Object(s.a)({},e.datasetRequest),{},{dataPath:{partitionFormatIgnoreError:t}})}}))},l.onDatastoreLoading=function(){l.setState({loadingDatastore:!0})},l.onDatastoreLoaded=function(){l.setState({loadingDatastore:!1})},l.onDataStoreChange=function(e){void 0!==e&&e!==l.state.targetDatastoreForProfiling&&l.setState({targetDatastoreForProfiling:e})},l.onDatastoreStart=function(e){void 0!==e&&l.setState({targetDatastoreForProfiling:e})},l.unsetWizardErrorState=function(e){l.setState((function(t){return t.stepState[e]===m.WizardStepState.Error?Object(s.a)(Object(s.a)({},t),{},{stepState:Object(s.a)(Object(s.a)({},t.stepState),{},Object(n.a)({},e,m.WizardStepState.CurrentStep))}):null}))},l.onSkipValidationCheckboxChange=function(){l.setState((function(e){return{skipValidation:!e.skipValidation}}))},l.onDatastoreCreateFormValuesChange=function(e){l.datastoreCreateFormValues=e},l.onCreateNewDatastoreSuccess=function(){l.setState({datastoreSelectionChoice:_.b.Selected,datastoreCreateErrors:[]}),l.datastoreCreateFormValues=void 0},l.onCreateNewDatastoreError=function(e){l.setState((function(t){return{datastoreCreateErrors:t.datastoreCreateErrors.concat(e)}}))},l.onDatastoreSelectionChoiceChange=function(e){e&&l.setState({datastoreSelectionChoice:e})},l.onProfileCheckboxChange=function(){l.setState((function(e){return{generateProfileAfterCreation:!e.generateProfileAfterCreation}}))},l.onComputeForProfilingChange=function(e){l.setState({targetComputeForProfiling:e})},l.datasetTraitFailureMessagesChanged=function(e){l.setState({datasetTraitFailureMessages:e})},l.datasetTraitChanged=function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=l.validateSchemaStep,!e.t0){e.next=5;break}return e.next=4,l.validateSchemaStep();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}l.setState((function(e){return{stepState:Object(s.a)(Object(s.a)({},e.stepState),{},Object(n.a)({},t,m.WizardStepState.Error))}}));case 7:l.setState((function(e){return{traitChangeToggle:!e.traitChangeToggle}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.clearDatasetTraitMap=function(){l.setState((function(e){return{traitChangeToggle:!e.traitChangeToggle,datasetPropertyToTraitMap:new Map}}))},l.changeDatasetRequest=function(e){l.props.onChange(),l.setState({datasetRequest:e})},l.basicDatasetError=function(e){l.setState((function(t){return{errors:Object(s.a)(Object(s.a)({},t.errors),{},Object(n.a)({},U.a.BasicInfo,e))}}))},l.datastoreSelectionError=function(e){l.setState((function(t){return{errors:Object(s.a)(Object(s.a)({},t.errors),{},Object(n.a)({},U.a.DatastoreSelection,e))}}))},l.onDatastoreStepCancel=function(){l.setState({datastoreSelectionChoice:_.b.Selected})},l.onDatastoreSelected=function(e){if(e){var t=e?e.dataStoreType:void 0;l.setState({datastore:e,datastoreType:t,datastoreSelectionChoice:_.b.Selected})}},l.setStepValidateCallback=function(e){l.validateBasicInfoStep=e},l.setSettingsValidateCallback=function(e){l.validateSettingsStep=e},l.setSchemaStepValidateCallback=function(e){l.validateSchemaStep=e},l.setDatastoreSelectionStepValidateCallback=function(e){l.validateDatastoreSelectionStep=e},l.onStepLeaving=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,r,o,c,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l.setState({isValidating:!0}),a=t.currentStepKey,void 0!==t.nextStepIndex&&void 0!==t.nextStepKey&&a&&!l.state.parsingDataset){e.next=5;break}return l.setState({isValidating:!1}),e.abrupt("return");case 5:if(r=t.nextStepIndex,o=t.currentStepIndex,c=r<o){e.next=41;break}if(e.t3=a===U.a.BasicInfo&&l.validateBasicInfoStep,!e.t3){e.next=14;break}return e.next=13,l.validateBasicInfoStep();case 13:e.t3=!e.sent;case 14:if(e.t2=e.t3,e.t2){e.next=22;break}if(e.t4=a===U.a.SettingsAndPreview&&l.validateSettingsStep,!e.t4){e.next=21;break}return e.next=20,l.validateSettingsStep();case 20:e.t4=!e.sent;case 21:e.t2=e.t4;case 22:if(e.t1=e.t2,e.t1){e.next=30;break}if(e.t5=a===U.a.DatastoreSelection&&l.validateDatastoreSelectionStep,!e.t5){e.next=29;break}return e.next=28,l.validateDatastoreSelectionStep();case 28:e.t5=!e.sent;case 29:e.t1=e.t5;case 30:if(e.t0=e.t1,e.t0){e.next=38;break}if(e.t6=a===U.a.Schema&&l.validateSchemaStep,!e.t6){e.next=37;break}return e.next=36,l.validateSchemaStep();case 36:e.t6=!e.sent;case 37:e.t0=e.t6;case 38:if(!e.t0){e.next=41;break}return l.setState((function(e){return{stepState:Object(s.a)(Object(s.a)({},e.stepState),{},Object(n.a)({},a,m.WizardStepState.Error)),isValidating:!1}})),e.abrupt("return");case 41:u=t.nextStepKey,d=c?m.WizardStepState.NotStarted:m.WizardStepState.Completed,l.trackEvent(f.a.DatasetCreateNavigate,{currentStepKey:t.currentStepKey,nextStepKey:t.nextStepKey}),l.trackEvent(Object(V.e)(u)),l.setState((function(e){var t;return Object(s.a)(Object(s.a)({},e),{},{currentStepIndex:r,errorMessages:[],datastoreCreateErrors:[],stepState:Object(s.a)(Object(s.a)({},e.stepState),{},(t={},Object(n.a)(t,a,d),Object(n.a)(t,u,m.WizardStepState.CurrentStep),t)),isValidating:!1})}));case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.onCancel=function(){l.trackEvent(f.a.DatasetCreateCancel,{onWizardStep:l.state.currentStepIndex.toString()}),l.props.onDismiss()},l.onDone=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=z.a.Prepare(l.state.datasetRequest,l.state.datasetPropertyToTraitMap),l.createDataset(t);case 2:case"end":return e.stop()}}),e)}))),l.parseDataset=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState((function(e){return{parsingDataset:e.parsingDataset+1}})),l.datasetsClient.abort(),e.next=4,l.datasetsClient.parseDataset(t);case 4:if((a=e.sent).status!==h.a.Ok||!a.data){e.next=18;break}if(!a.data.sourceProperties||a.data.sourceProperties.dataSourceType!==q.a.JSON.Name&&a.data.sourceProperties.dataSourceType!==q.a.Excel.Name&&a.data.sourceProperties.dataSourceType!==q.a.Binary.Name){e.next=11;break}a.data.sourceProperties.dataSourceType=q.a.Plain.Name,a.data.schema=void 0,e.next=18;break;case 11:if(n=!1,a.data.general&&!a.data.general.skipMode&&a.data.sourceProperties&&(a.data.general.sourcePropertiesOverride||(a.data.general.sourcePropertiesOverride=a.data.sourceProperties),a.data.general.sourcePropertiesOverride.skipLinesCount=0,a.data.general.skipMode="None",a.data.schema=void 0,n=!0),a.data.general&&!a.data.general.promoteHeadersMode&&a.data.sourceProperties&&(a.data.general.sourcePropertiesOverride||(a.data.general.sourcePropertiesOverride=a.data.sourceProperties),a.data.general.sourcePropertiesOverride.promoteHeaders=!1,a.data.general.promoteHeadersMode="None",a.data.schema=void 0,n=!0),!n){e.next=18;break}return e.next=17,l.datasetsClient.parseDataset(a.data);case 17:a=e.sent;case 18:if(a.status!==h.a.Ok||!a.data){e.next=23;break}return l.setState((function(e){return{parsingDataset:e.parsingDataset-1,datasetRequest:Object(s.a)({},a.data),isParseFailed:!1}})),e.abrupt("return",a.data);case 23:if(a.status!==h.a.Error){e.next=27;break}return o=l.errorManager.getParseResponseErrorMessages(a.error,A.b.Data.Common.ErrorTitlePlaceholder),l.setState((function(e){return{errorMessages:Object(r.a)(e.errorMessages.concat(o)),parsingDataset:e.parsingDataset-1,isParseFailed:!0}})),e.abrupt("return",void 0);case 27:return l.setState((function(e){return{parsingDataset:e.parsingDataset-1,isParseFailed:!0}})),e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.getPreview=function(){var e=Object(c.a)(i.a.mark((function e(t,a){var n,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.state.skipValidation){e.next=4;break}return l.datasetsClient.abort(),l.setState({loadingPreview:0,parsingDataset:0,datasetPreview:void 0}),e.abrupt("return");case 4:if(!(n=Object(z.b)(t,l.props.flightContext))){e.next=9;break}return l.datasetsClient.abort(),l.setState((function(e){return{datasetPreview:void 0,errorMessages:Object(r.a)(e.errorMessages.concat(n))}})),e.abrupt("return");case 9:if(l.setState((function(e){return{loadingPreview:e.loadingPreview+1}})),l.datasetsClient.abort(),o=t,!a){e.next=16;break}return e.next=15,l.parseDataset(t);case 15:o=e.sent;case 16:if(l.isPreviewEnabled(o)){e.next=19;break}return l.setState((function(e){return{loadingPreview:e.loadingPreview-1,datasetPreview:void 0}})),e.abrupt("return");case 19:return e.next=21,l.datasetsClient.getPreview(Object(s.a)(Object(s.a)({},o),{},{columnsToRemove:[]}));case 21:(c=e.sent).status===h.a.Ok&&c.data?l.setState((function(e){return{loadingPreview:e.loadingPreview-1,datasetPreview:c.data}})):c.status===h.a.Error?l.setState((function(e){return c.error?{loadingPreview:e.loadingPreview-1,datasetPreview:void 0,errorMessages:Object(r.a)(e.errorMessages.concat(x.a.addErrorCodeAndIsUserError("DatasetCreateFromDatastore.getPreview",Object(R.a)(c.error,A.b.Data.Common.ErrorTitlePlaceholder,{errorOverride:"ServiceErrorCodeDatasetCreationOverrides"}),["UserError"])))}:{loadingPreview:e.loadingPreview-1,datasetPreview:void 0,errorMessages:Object(r.a)(e.errorMessages)}})):l.setState((function(e){return{loadingPreview:e.loadingPreview-1}}));case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),l.createDataset=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,s,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.setState({creatingDataset:!0}),l.datasetsClient.abort(),e.next=4,l.datasetsClient.registerDatasetFromDataPath(t,!0,l.state.skipValidation);case 4:if(a=e.sent,n={},a.status!==h.a.Ok||!a.data){e.next=19;break}if(l.state.datasetRequest.datasetType!==N.a.datasetTypes().TabularDataset.Enum||!l.state.generateProfileAfterCreation){e.next=10;break}return e.next=10,l.generateProfile(a.data);case 10:l.props.messageContext.dismissAllMessages(),o=A.b.Data.DatasetCreateFromDatastore.SuccessMessage.replace("{datasetName}",t.name||""),c={title:A.b.Data.DatasetCreateFromDatastore.SuccessTitle,messageType:g.c.Success,message:o},t.name&&(null===(s=a.data.latest)||void 0===s?void 0:s.versionId)&&(c.link={text:A.b.Data.DatasetCreateFromDatastore.ClickHereToJumpTo,to:l.props.routeContext.getFullPathTo(b.a.DatasetRegisterDetailsRoute,{datasetName:t.name,version:null===(u=a.data.latest)||void 0===u?void 0:u.versionId})}),a.data.latest&&a.data.latest.versionId===l.props.datasetVersion&&(c.message=A.b.Data.DatasetCreateFromDatastore.SameDatasetSuccessMessage),l.props.messageContext.addMessage(c),l.props.onCreate({datasetId:a.data.datasetId||"",datasetName:a.data.name||"",versionId:a.data.latest&&a.data.latest.versionId||""}),e.next=20;break;case 19:a.status===h.a.Error&&l.setState((function(e){return a.error?{creatingDataset:!1,errorMessages:Object(r.a)(e.errorMessages.concat(x.a.addErrorCodeAndIsUserError("DatasetCreateFromDatastore.createDataset",Object(R.a)(a.error,A.b.Data.Common.ErrorTitlePlaceholder),["DatasetVersionExists"])))}:{creatingDataset:!1,errorMessages:Object(r.a)(e.errorMessages)}}));case 20:n.datasetType=l.state.datasetRequest.datasetType,n.datasetVersion=a.data&&a.data.latest&&a.data.latest.versionId||"",n.datastoreType=l.state.datastoreType,n.status=a.status.toString(),n.wasGenerateProfileSelected=l.state.generateProfileAfterCreation.toString(),l.trackEvent(f.a.DatasetCreateResult,n);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.generateProfile=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.props.flightContext.isEnabled(D.a.DatastoreSelectForProfile),r=Boolean(!a||l.state.targetDatastoreForProfiling),!l.state.targetComputeForProfiling||!r){e.next=5;break}return e.next=5,l.props.datasetServiceClient.generateProfileWithPreview(t.latest&&t.latest.savedDatasetId?t.latest.savedDatasetId:"",{computeTarget:l.state.targetComputeForProfiling,datastoreName:l.state.targetDatastoreForProfiling&&l.state.targetDatastoreForProfiling.name});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l.trackEvent=function(e,t){var a,r=t||{};r.method="Datastore",r.createProviderSource=l.props.createProviderSource,r.wizardSessionId=null===(a=l.wizardRef.current)||void 0===a?void 0:a.getWizardSessionId(),Object(B.b)(e,r)},l.datasetsClient=new I.a(e.authContext,e.workspaceContext),l.datastoreClient=new S.a(e.authContext,e.workspaceContext);var d=!l.props.authorizationContext.hasPermission(v.a.DatasetsRegisteredPreviewRead);l.errorManager=new L.a("DatasetCreateFromDatastore"),l.telemetryProps=Object(s.a)({},l.props);var p={datasetRequest:{isVisible:!0,datasetType:e.datasetType||N.a.datasetTypes().TabularDataset.Enum,name:l.props.datasetName},skipValidation:d,errors:(o={},Object(n.a)(o,U.a.BasicInfo,{}),Object(n.a)(o,U.a.DatastoreSelection,{}),o),stepState:{BasicInfo:m.WizardStepState.CurrentStep,DatastoreSelection:m.WizardStepState.NotStarted,SettingsAndPreview:m.WizardStepState.NotStarted,Schema:m.WizardStepState.NotStarted,VerificationStep:m.WizardStepState.NotStarted},currentStepIndex:0,parsingDataset:0,loadingPreview:0,creatingDataset:!1,datasetPropertyToTraitMap:new Map,traitChangeToggle:!1,datasetTraitFailureMessages:[],generateProfileAfterCreation:!1,targetComputeForProfiling:void 0,isValidating:!1,errorMessages:[],datastoreSelectionChoice:_.b.Existing,datastoreCreateErrors:[],isParseFailed:!1,targetDatastoreForProfiling:void 0,loadingDatastore:!1,datastore:l.props.datastore,allowDatastoreChange:!0};return l.props.datastore&&(p.datastoreType=l.props.datastore.dataStoreType,p.allowDatastoreChange=!1,p.datasetRequest.dataPath={datastoreName:l.props.datastore.name},p.datastoreSelectionChoice=_.b.Selected),l.state=p,l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.trackEvent(f.a.DatasetCreateWizardLaunch),this.trackEvent(f.a.DatasetCreateWizardLaunchFromDatastore),e.next=4,this.getDefaultDatastoreOrUndefined();case 4:t=e.sent,this.setState({defaultDatastore:t});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.datasetRequest.datasetType===N.a.datasetTypes().TabularDataset.Enum?this.tabularDatasetWizardChildren:this.fileDatasetWizardChildren;return j.a.createElement("div",{className:"dataset-create-from-datastore","data-automation-id":"dataset-create-from-datastore"},j.a.createElement(m.Wizard,{currentStepIndex:this.state.currentStepIndex,onCancel:this.onCancel,onDone:this.onDone,onStepWillLeave:this.onStepLeaving,buttonsOptions:{navigationDisabled:this.isNavigationDisabled(),doneDisabled:this.state.creatingDataset},ref:this.wizardRef},e()))}},{key:"basicInfoStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.errors,r=e.parsingDataset,n=e.stepState,s=e.datastoreType,o=e.errorMessages,i=r>0||this.state.isValidating,c=i?A.b.Data.DatasetCreateFromDatastore.ValidatingSpinner:void 0;return j.a.createElement(W.a,{bannerMessages:o,loadingMessage:c,bannerMessagesOnDismiss:this.dismissMessage,disableTypeSelection:this.props.disableTypeSelection,datasetClient:this.datasetsClient,key:U.a.BasicInfo,title:A.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Title,datasetRequest:t,datastoreType:s,errors:a.BasicInfo,onChange:this.changeDatasetRequest,onError:this.basicDatasetError,setValidateCallback:this.setStepValidateCallback,loading:i,state:n.BasicInfo,datasetName:this.props.datasetName,datasetVersion:this.props.datasetVersion,unsetWizardErrorState:this.unsetWizardErrorState})}},{key:"settingsAndPreviewStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.datasetPreview,n=e.loadingPreview,s=e.datastoreType,o=e.errorMessages,i=e.skipValidation;return j.a.createElement(G.a,{skipValidation:i,bannerMessages:o,bannerMessagesOnDismiss:this.dismissMessage,key:U.a.SettingsAndPreview,title:A.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Title,state:a.SettingsAndPreview,datastoreType:s||"AzureBlob",datasetRequest:t,datasetPreview:r,loadingPreview:n>0,onChange:this.changeDatasetRequest,setValidateCallback:this.setSettingsValidateCallback,getPreview:this.getPreview,contextProps:this.telemetryProps,isParseFailed:this.state.isParseFailed})}},{key:"datastoreSelectionFromDatastoreStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.errors,r=e.errorMessages,n=e.datastoreCreateErrors,s=e.parsingDataset,o=e.skipValidation,i=e.stepState,c=e.datastoreType,u=e.isValidating,l=e.datastore,d=e.defaultDatastore,p=e.allowDatastoreChange,m=s>0||this.state.isValidating,h=r.concat(n),f=m?A.b.Data.DatasetCreateFromDatastore.ParsingDatasetMessage:void 0;return j.a.createElement(H.a,{allowDatastoreChange:p,bannerMessages:h,loadingMessage:f,bannerMessagesOnDismiss:this.dismissMessage,onCancel:this.onDatastoreStepCancel,defaultDatastore:d,key:U.a.DatastoreSelection,title:A.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.TitleFromDatastore,datasetClient:this.datasetsClient,datasetRequest:t,datastoreType:c,skipValidation:o,setValidateCallback:this.setDatastoreSelectionStepValidateCallback,errors:a.DatastoreSelection,onChange:this.changeDatasetRequest,onError:this.datastoreSelectionError,onDatastoreSelected:this.onDatastoreSelected,datastore:l,loading:m,state:i.DatastoreSelection,parseDataset:this.parseDataset,clearDatasetTraitMap:this.clearDatasetTraitMap,partitionFormatIgnoreErrorOnChange:this.partitionFormatIgnoreErrorOnChange,onSkipValidationCheckboxChange:this.onSkipValidationCheckboxChange,unsetWizardErrorState:this.unsetWizardErrorState,datastoreSelectionChoice:this.state.datastoreSelectionChoice,datastoreCreateErrors:this.state.datastoreCreateErrors,onCreateNewDatastoreSuccess:this.onCreateNewDatastoreSuccess,onCreateNewDatastoreError:this.onCreateNewDatastoreError,onDatastoreSelectionChoiceChange:this.onDatastoreSelectionChoiceChange,onDatastoreCreateFormValuesChange:this.onDatastoreCreateFormValuesChange,datastoreCreateFormValues:this.datastoreCreateFormValues,isValidating:u,allowedDatastoreTypes:this.props.allowedDatastoreTypes})}},{key:"schemaStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.datasetPreview,n=e.datasetPropertyToTraitMap,s=e.loadingPreview,o=e.errorMessages,i=e.datasetTraitFailureMessages,c=o.concat(i);return j.a.createElement(Q.a,{bannerMessages:c,bannerMessagesOnDismiss:this.dismissMessage,key:U.a.Schema,datasetPropertyToTraitMap:n,title:A.b.Data.DatasetCreateFromDatastore.Steps.Schema.Title,state:a.Schema,datasetRequest:t,datasetPreview:r,onChange:this.changeDatasetRequest,setValidateCallback:this.setSchemaStepValidateCallback,getPreview:this.getPreview,datasetTraitChanged:this.datasetTraitChanged,messageContext:this.props.messageContext,loadingPreview:s>0,datasetTraitFailureMessagesChanged:this.datasetTraitFailureMessagesChanged,datasetTraitFailureMessages:i,unsetWizardErrorState:this.unsetWizardErrorState})}},{key:"verificationStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.targetComputeForProfiling,n=e.datastoreType,s=e.generateProfileAfterCreation,o=e.errorMessages,i=e.targetDatastoreForProfiling,c=e.loadingDatastore,u=e.creatingDataset,l=u?A.b.Data.DatasetCreateFromDatastore.CreatingDatasetMessage:void 0;return j.a.createElement(Y.a,{bannerMessages:o,loadingMessage:l,creatingDataset:u,bannerMessagesOnDismiss:this.dismissMessage,datasetRequest:t,key:U.a.VerificationStep,title:A.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.Title,state:a.VerificationStep,generateProfileAfterCreation:s,onProfileCheckboxChange:this.onProfileCheckboxChange,onComputeForProfilingChange:this.onComputeForProfilingChange,selectedCompute:r,datasetVersion:this.props.datasetVersion,datastoreType:n,selectedDataStore:i,loadingDatastore:c,onDatastoreForProfilingLoading:this.onDatastoreLoading,onDatastoreForProfilingLoaded:this.onDatastoreLoaded,onDataStoreForProfilingChange:this.onDataStoreChange,onDatastoreForProfilingStart:this.onDatastoreStart})}},{key:"isNavigationDisabled",value:function(){return this.state.loadingPreview>0||this.state.parsingDataset>0||this.state.isValidating||this.state.creatingDataset}},{key:"isPreviewEnabled",value:function(e){return!!e&&(!!(e.dataPath&&e.dataPath.sqlDataPath&&e.dataPath.sqlDataPath.sqlQuery)||(e.general&&e.general.sourcePropertiesOverride?void 0===e.general.sourcePropertiesOverride.dataSourceType||e.general.sourcePropertiesOverride.dataSourceType!==q.a.Binary.Name:!!e.sourceProperties&&!!e.sourceProperties.dataSourceType&&e.sourceProperties.dataSourceType!==q.a.Binary.Name))}}]),a}(j.a.Component)),K=Object(E.a)(Object(C.a)(Object(y.a)(Object(P.a)(Object(k.a)(Object(O.a)(Object(F.a)(X)))))),{datasetServiceClient:T.a},M.a)},V4Kj:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("ERkP"),n=a.n(r),s=a("SnOo"),o=a("nmZI"),i=a("1qZ0"),c=function(e){var t=Object(r.useMemo)((function(){return e.resourceList.map(i.c)}),[e.resourceList]),a=e.disabled||e.loading,c=e.loading?s.b.Common_Loading_With_Ellipsis:s.b.Common_Select_Search;return n.a.createElement(o.a,{name:"resourceName",label:e.resourceLabel,required:!0,options:t,multiSelect:!1,disabled:a,placeholder:c})}},VG0i:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("wgY5"),c=a.n(i),u=a("Bq8q"),l=a("ERkP"),d=a("SnOo"),p=(a("nGxh"),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).formatDateFunc=function(e){return c()(e).format("l")},e}return Object(n.a)(a,[{key:"render",value:function(){var e={months:[d.b.Common_DateFilterQuery_January,d.b.Common_DateFilterQuery_February,d.b.Common_DateFilterQuery_March,d.b.Common_DateFilterQuery_April,d.b.Common_DateFilterQuery_May,d.b.Common_DateFilterQuery_June,d.b.Common_DateFilterQuery_July,d.b.Common_DateFilterQuery_August,d.b.Common_DateFilterQuery_September,d.b.Common_DateFilterQuery_October,d.b.Common_DateFilterQuery_November,d.b.Common_DateFilterQuery_December],shortMonths:[d.b.Common_DateFilterQuery_Jan,d.b.Common_DateFilterQuery_Feb,d.b.Common_DateFilterQuery_Mar,d.b.Common_DateFilterQuery_Apr,d.b.Common_DateFilterQuery_Mai,d.b.Common_DateFilterQuery_Jun,d.b.Common_DateFilterQuery_Jul,d.b.Common_DateFilterQuery_Aug,d.b.Common_DateFilterQuery_Sep,d.b.Common_DateFilterQuery_Oct,d.b.Common_DateFilterQuery_Nov,d.b.Common_DateFilterQuery_Dec],days:[d.b.Common_DateFilterQuery_Sunday,d.b.Common_DateFilterQuery_Monday,d.b.Common_DateFilterQuery_Tuesday,d.b.Common_DateFilterQuery_Wednesday,d.b.Common_DateFilterQuery_Thursday,d.b.Common_DateFilterQuery_Friday,d.b.Common_DateFilterQuery_Saturday],shortDays:[d.b.Common_DateFilterQuery_Sun,d.b.Common_DateFilterQuery_Mon,d.b.Common_DateFilterQuery_Tue,d.b.Common_DateFilterQuery_Wed,d.b.Common_DateFilterQuery_Thu,d.b.Common_DateFilterQuery_Fri,d.b.Common_DateFilterQuery_Sat],goToToday:d.b.Common_DateFilterQuery_GoToToday,prevMonthAriaLabel:d.b.Common_DateFilterQuery_GoToPreviousMonth,nextMonthAriaLabel:d.b.Common_DateFilterQuery_GoToNextMonth,prevYearAriaLabel:d.b.Common_DateFilterQuery_GoToPrevYear,nextYearAriaLabel:d.b.Common_DateFilterQuery_GoToNextYear,closeButtonAriaLabel:d.b.Common_DateFilterQuery_CloseDatePicker,invalidInputErrorMessage:d.b.Common_DateFilterQuery_InvalidInputErrorMessage},t=this.props,a=t.className,r=t.label,n=t.value,s=t.onSelectDate,o=t.minDate,i=t.maxDate,c=t.disabled,p=t.today,m=t.allowTextInput;return l.createElement(u.a,{className:a,strings:e,label:r,value:n,formatDate:this.formatDateFunc,onSelectDate:s,today:p,minDate:o,maxDate:i,disabled:c,allowTextInput:m,styles:function(e){return{callout:[{borderWidth:1,borderColor:e.theme.palette.neutralTertiaryAlt,borderStyle:"solid"}]}}})}}]),a}(l.Component))},VoT0:function(e,t,a){"use strict";a.r(t);var r=a("tOCB");a.d(t,"BasicInfoStep",(function(){return r.b})),a.d(t,"trailingWhitespace",(function(){return r.l})),a.d(t,"leadingWhitespace",(function(){return r.k})),a.d(t,"BasicInfoValidation",(function(){return r.c})),a.d(t,"BasicInfoFromWebUrlStep",(function(){return r.a})),a.d(t,"DatasetName",(function(){return r.d})),a.d(t,"DatasetType",(function(){return r.f})),a.d(t,"DescriptionField",(function(){return r.h})),a.d(t,"TagsField",(function(){return r.j})),a.d(t,"LatestVersion",(function(){return r.i})),a.d(t,"DatasetNameWithVersion",(function(){return r.e})),a.d(t,"DatasheetUrl",(function(){return r.g}));var n=a("QF98");for(var s in n)["default","BasicInfoStep","trailingWhitespace","leadingWhitespace","BasicInfoValidation","BasicInfoFromWebUrlStep","DatasetName","DatasetType","DescriptionField","TagsField","LatestVersion","DatasetNameWithVersion","DatasheetUrl"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);var o=a("zLcY");for(var s in o)["default","BasicInfoStep","trailingWhitespace","leadingWhitespace","BasicInfoValidation","BasicInfoFromWebUrlStep","DatasetName","DatasetType","DescriptionField","TagsField","LatestVersion","DatasetNameWithVersion","DatasheetUrl"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);var i=a("i89y");a.d(t,"SchemaHelper",(function(){return i.a})),a.d(t,"SchemaStep",(function(){return i.b}));var c=a("Q7Ad");a.d(t,"WizardStepKeys",(function(){return c.a}));var u=a("Oj7w");a.d(t,"DatastoreSelectionFromDatastoreStep",(function(){return u.a})),a.d(t,"DatastoreSelectionValidation",(function(){return u.c})),a.d(t,"DatastoreSelectionFromUploadStep",(function(){return u.b}))},VvDS:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("ERkP"),d=a.n(l),p=a("Daup"),m=a("k0yv"),h=a("kgxj"),f=a("QlF2"),g=a("Q7Ad"),b=a("kXcn"),D=a("0qJz"),S=a("Y2j4"),v=a("QdRb"),C=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onDatasetTypeChange=function(t){e.getOnChangeEvent("datasetType")(t)},e.validateStep=Object(s.a)(n.a.mark((function t(){var a,r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(f.h)(e.props.datasetRequest),t.next=3,b.a.validateAll(a,e.props.datasetClient,!!e.props.datasetName);case 3:if(r=t.sent,e.props.onError(r||{}),!r){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.datasetRequest,r=e.errors,n=e.loading,s=e.datastoreType,o=Object(f.h)(a),i=n||!!this.props.disableTypeSelection;return this.unsetWizardErrorState(),d.a.createElement("div",{className:"basic-info-step"},d.a.createElement(p.a,null),d.a.createElement(m.a,{title:t},d.a.createElement(h.MessageBar,{messages:this.props.bannerMessages,onDismiss:this.props.bannerMessagesOnDismiss}),this.renderName(o,this.props.datasetName,this.props.datasetVersion),d.a.createElement(v.a,{selectedType:o.datasetType,onChange:this.onDatasetTypeChange,errorMessage:r.datasetType,disabled:i,datastoreType:s}),d.a.createElement(D.a,{description:o.datasetDescription,onChange:this.getOnChangeEvent("datasetDescription"),errorMessage:r.datasetDescription,disabled:n,autoAdjustHeight:!0})))}},{key:"componentDidMount",value:function(){this.props.setValidateCallback(this.validateStep)}},{key:"componentWillUnmount",value:function(){this.props.setValidateCallback()}},{key:"unsetWizardErrorState",value:function(){if(this.props.unsetWizardErrorState){var e=!1;Object.values(this.props.errors).forEach((function(t){e=e||!!t})),e||this.props.unsetWizardErrorState(g.a.BasicInfo)}}},{key:"renderName",value:function(e,t,a){var r=this.props.loading||Boolean(t&&a),n=t||e.datasetName,s=a?"".concat(+a+1):"1";return d.a.createElement(S.a,{datasetName:n,datasetVersion:s,errorMessage:this.props.errors.datasetName,onNameChange:this.getOnChangeEvent("datasetName"),disabled:r,autoFocus:!0})}},{key:"getOnChangeEvent",value:function(e){var t=this;return function(){var a=Object(s.a)(n.a.mark((function a(r){var s,o;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=Object(f.a)(t.props.datasetRequest,e,r),t.props.datasetRequest===s){a.next=7;break}return t.props.onChange(s),a.next=5,b.a.errorsReducer(t.props.errors,e,r,t.props.datasetClient,!!t.props.datasetName);case 5:(o=a.sent)!==t.props.errors&&t.props.onError(o);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}]),a}(d.a.Component)},WCmz:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var r=a("zjfJ"),n=a("Czhu"),s=a("9fIP"),o=a("MMYH"),i=a("1eWE"),c=a("nsO7"),u=a.n(c),l=a("poBQ"),d=a("60PN"),p=a("1jtT"),m=a("le+F"),h=a("7xHg"),f=a("PTrN"),g=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,null,[{key:"mapToFormFields",value:function(e){var t=Object(n.a)({},this.defaultFileSettings),a=e.sourceProperties||{};e.general&&e.general.sourcePropertiesOverride&&(a=Object(n.a)(Object(n.a)({},a),u.a.pickBy(e.general.sourcePropertiesOverride,(function(e){return void 0!==e})))),t.fileFormat=d.a.find(a.dataSourceType)||t.fileFormat,t.delimiter=e.customDelimiter?p.a.Custom:this.mapDelimiterType(a.delimiter),t.delimiter.Name===p.a.Custom.Name&&(t.customDelimiter=a.delimiter||""),t.encoding=m.a.find(a.encoding)||t.encoding,t.headers=this.mapHeaders(e);var r=this.mapSkipRows(e),s=r.skipRows,o=r.skipRowsCount;return t.skipRows=s,t.skipRowsCount=o,t}},{key:"fileSettingsReducer",value:function(e,t,a,r){var n;switch(t){case"fileFormat":n=this.reduceSourcePropertiesOverride(e,"dataSourceType",a.Name),r&&this.trackSettingsEvent(r,t,a.Name);break;case"skipRows":n=this.reduceGeneral(e,"skipMode",a.Name),r&&this.trackSettingsEvent(r,t,a.Name);break;case"headers":n=this.reduceHeader(e,a),r&&this.trackSettingsEvent(r,t,a.Name);break;case"encoding":n=this.reduceSourcePropertiesOverride(e,"encoding",a.Name),r&&this.trackSettingsEvent(r,t,a.Name);break;case"delimiter":var s=a;return n=this.reduceDelimiter(e,s),r&&this.trackSettingsEvent(r,t,a.Name),[n,e!==n&&s.Name!==p.a.Custom.Name];case"customDelimiter":return n=this.reduceSourcePropertiesOverride(e,"delimiter",a),r&&this.trackSettingsEvent(r,t,a),[n,e!==n&&!!a];case"skipRowsCount":n=this.reduceSourcePropertiesOverride(e,"skipLinesCount",a),r&&this.trackSettingsEvent(r,t,a);break;default:return[e,!1]}return[n,e!==n]}},{key:"mapDelimiterType",value:function(e){if(void 0===e)return p.a.DefaultSelection;var t=p.a.All.find((function(t){return t.Delimiter===e}));return t||p.a.Custom}},{key:"mapHeaders",value:function(e){return e.general&&e.general.promoteHeadersMode&&h.a.find(e.general.promoteHeadersMode)||h.a.DefaultSelection}},{key:"mapSkipRows",value:function(e){var t=0;if(e.general&&e.general.skipMode){var a=f.a.find(e.general.skipMode)||f.a.DefaultSelection;return a.Name===f.a.None.Name?{skipRows:a,skipRowsCount:0}:(e.general.sourcePropertiesOverride&&e.general.sourcePropertiesOverride.skipLinesCount&&(t=e.general.sourcePropertiesOverride.skipLinesCount),{skipRows:a,skipRowsCount:t})}return{skipRows:f.a.DefaultSelection,skipRowsCount:t}}},{key:"reduceGeneral",value:function(e,t,a){return e.general?e.general[t]===a?e:Object(n.a)(Object(n.a)({},e),{},{general:Object(n.a)(Object(n.a)({},e.general),{},Object(r.a)({},t,a))}):Object(n.a)(Object(n.a)({},e),{},{general:Object(r.a)({},t,a)})}},{key:"reduceSourcePropertiesOverride",value:function(e,t,a){return e.general?e.general.sourcePropertiesOverride?e.general.sourcePropertiesOverride[t]===a?e:Object(n.a)(Object(n.a)({},e),{},{general:Object(n.a)(Object(n.a)({},e.general),{},{sourcePropertiesOverride:Object(n.a)(Object(n.a)({},e.general.sourcePropertiesOverride),{},Object(r.a)({},t,a))})}):Object(n.a)(Object(n.a)({},e),{},{general:Object(n.a)(Object(n.a)({},e.general),{},{sourcePropertiesOverride:Object(n.a)(Object(n.a)({},e.sourceProperties),{},Object(r.a)({},t,a))})}):Object(n.a)(Object(n.a)({},e),{},{general:Object(n.a)(Object(n.a)({},e.sourceProperties),{},{sourcePropertiesOverride:Object(r.a)({},t,a)})})}},{key:"reduceDelimiter",value:function(e,t){var a=this.reduceSourcePropertiesOverride(e,"delimiter",t.Delimiter);return a.customDelimiter=t.Name===p.a.Custom.Name,a}},{key:"reduceHeader",value:function(e,t){var a=this.reduceGeneral(e,"promoteHeadersMode",t.Name);return this.reduceSourcePropertiesOverride(a,"promoteHeaders",t.Name!==h.a.NoHeaders.Name)}}]),e}();g.defaultFileSettings={customDelimiter:"",delimiter:p.a.DefaultSelection,encoding:m.a.DefaultSelection,fileFormat:d.a.DefaultSelection,headers:h.a.DefaultSelection,skipRows:f.a.DefaultSelection,skipRowsCount:0},g.isSkipRowsSupported=function(e){return e.fileFormat.Name!==d.a.ParquetFile.Name},g.trackSettingsEvent=function(e,t,a){Object(l.b)(i.a.DatasetWizardFileSettingsChange,{fileSettingsFormFieldName:t,fileSettingsFormOptionValue:a})}},WTLv:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("9fIP"),n=a("MMYH"),s=function(){function e(t,a,n){Object(r.a)(this,e),this.name=void 0,this.title=void 0,this.toolTip=void 0,this.name=t,this.title=a,this.toolTip=n}return Object(n.a)(e,[{key:"Name",get:function(){return this.name}},{key:"Title",get:function(){return this.title}},{key:"ToolTip",get:function(){return this.toolTip}}],[{key:"find",value:function(e){return this.All.find((function(t){return t.Name===e}))}},{key:"All",get:function(){return[]}}]),e}()},Wgtx:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("ERkP"),n=a("XpkB"),s=a("iuUd"),o=function(e){var t="import os\n# ".concat(n.b.ComputeDetails.ConsumePanel.SampleCodeListFiles,'\nprint(os.listdir("').concat(e.item.mountedPath,'"))\n\n# ').concat(n.b.ComputeDetails.ConsumePanel.SampleCodeSuggestion,'\n# import pandas as pd\n# df = pdf.read_csv("').concat(e.item.mountedPath,'/{path_to_file}/{your_file}")\n# print(df.head(5))'),a=n.b.ComputeDetails.ConsumePanel.SampleCodeTitlePython;return r.createElement(s.a,{sampleCode:t,language:"python",headerTitle:a})}},XJB9:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("ERkP"),c=a("/58v"),u=a("1vim"),l=a("XpkB"),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(c.a,{name:"databaseName",label:l.b.Datastore.DatastoreEditPage.AzurePostgresMySql.DatabaseNameField.label,required:!0,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return u.a.isRequired(e,l.b.Datastore.DatastoreEditPage.AzurePostgresMySql.DatabaseNameField.ValidationErrors.Required)}}]),a}(i.Component)},XX0W:function(e,t,a){"use strict";a.d(t,"a",(function(){return Q}));var r=a("zygG"),n=a("ERkP"),s=a.n(n),o=a("kgxj"),i=a("XpkB"),c=a("VtSi"),u=a.n(c),l=a("QsI/"),d=a("Czhu"),p=a("9fIP"),m=a("MMYH"),h=a("8K1b"),f=a("AqVP"),g=a("d/Yy"),b=a("67aH"),D=a("oziZ"),S=a("D0BB"),v=a("7vdV"),C=a("J7yX"),y=a("fGyu"),P=a("GGXT"),k=a("WYY7"),O=a("Opk0"),F=a("V4bT"),E=a("s+9k"),T=a("kjXB"),w=a("d0cs"),j=a("xP+/"),x=a("uMNk"),N=a("vxt6"),M=a.n(N),A=function e(t){Object(p.a)(this,e),this.Icon=void 0,this.Icon=t};A.Folder=new A(k.a.FillFolder),A.File=new A(k.a.NewFile),A.NavigateUp=new A(k.a.OpenFolder);var I=Object(w.db)({marginLeft:"5px"}),R=Object(w.db)({width:"280px",marginLeft:"auto"}),B=Object(w.db)({display:"flex",flexDirection:"row",alignItems:"baseline",position:"relative",zIndex:1e4}),q=Object(w.db)({selectors:{"div.commands, div.ms-DetailsRow-cellCheck":{display:"none"},"div.details-list":{height:"90%"},"div.shimmered-list-container":{height:"100%"},"div.grid-container":{height:"100%",overflowY:"hidden",display:"flex",flexFlow:"column",flexDirection:"column",selectors:{"div.ms-Stack":{selectors:{"div.ms-StackItem":{selectors:{"div.ms-Image":{maxHeight:90,maxWidth:90}}}}},"div.ms-Viewport":{height:"100%",selectors:{"div.ms-DetailsList":{height:"100%",selectors:{'>div[role="grid"]':{height:"100%",display:"flex",flexFlow:"column",flexGrow:"column"}}}}}}},".ms-DetailsRow-cell":{cursor:"pointer"}},position:"relative"}),z=Object(w.db)({selectors:{"@media only screen and (max-height:800px)":{height:"70% !important",maxHeight:"70% !important"},".ms-Modal-scrollableContent > div":{overflowY:"auto"},".ms-Modal-scrollableContent > div, .ms-Dialog-content, .ms-Dialog-content>div":{height:"100%",display:"flex",flexFlow:"column",flexDirection:"column"},".ms-Modal-scrollableContent > div .ms-Dialog-inner":{height:"calc(100% - 120px)",minHeight:270,selectors:{".ms-Dialog-content":{flexGrow:1,flexShrink:1,selectors:{">div >.details-list":{height:"90%"}}},".ms-Dialog-actions":{flexGrow:0,flexShrink:0}}}}}),L=function(e){var t=e.datastoreObjects,a=e.topLevel,r=e.loading,n=e.onSelected,o=e.onLevelUp,c=e.onRefresh,u=e.includeFilesInSubfolders,l=e.onFilesInSubfoldersChecked,d=e.onFilterBoxTextChanged,p=s.a.useContext(T.a),m=s.a.useMemo((function(){return Object(w.db)({color:p.themeStyles.palette.yellow})}),[p.themeStyles.palette.yellow]),h=s.a.useMemo((function(){return function(e){return[{field:"objectType",header:"",minWidth:50,maxWidth:50,render:function(t,a){return function(e,t){var a=e===g.DatastoreBrowseObject.Folder||e===g.DatastoreBrowseObject.NavigateUp?t:void 0;return s.a.createElement(E.a,{name:A[e].Icon,className:a})}(a.objectType,e)}},{field:"name",header:i.b.DatastoreBrowse.Columns.Name,minWidth:200},{field:"createdDate",header:i.b.DatastoreBrowse.Columns.CreatedDate,minWidth:140,maxWidth:140,render:function(e,t){return V(t.createdDate)}},{field:"modifiedDate",header:i.b.DatastoreBrowse.Columns.ModifiedDate,minWidth:140,maxWidth:140,render:function(e,t){return V(t.modifiedDate)}}]}(m)}),[p.themeStyles]),f=s.a.useMemo((function(){return r?[]:(e=t,Object(y.a)(e).sort((function(e,t){return e.objectType!==t.objectType?e.objectType===g.DatastoreBrowseObject.Folder?-1:1:e.name>t.name?1:e.name<t.name?-1:0})));var e}),[t,a,r]),b=r?i.b.DatastoreBrowse.LoadingMessage:void 0,D=s.a.useCallback((function(e){e&&e.length&&n(e[0])}),[]);return s.a.createElement("div",{className:q},s.a.createElement("div",{className:B},s.a.createElement(P.a,{onClick:c,buttonType:P.b.Icon,text:i.b.DatastoreBrowse.RefreshButtonLabel,ariaLabel:i.b.DatastoreBrowse.RefreshButtonLabel,iconName:k.a.Refresh}),s.a.createElement(P.a,{onClick:o,buttonType:P.b.Icon,text:i.b.DatastoreBrowse.LevelUpButtonLabel,ariaLabel:i.b.DatastoreBrowse.LevelUpButtonLabel,iconName:k.a.ArrowUp,disabled:a}),s.a.createElement("div",{className:I},s.a.createElement(O.a,{checked:u,label:i.b.DatastoreBrowse.IncludeFilesInSubfolders,onChange:l})),s.a.createElement("div",{className:R},s.a.createElement(j.a,{placeholder:i.b.DatastoreBrowse.SearchPrompt,onChange:function(e,t){d&&d(t||"")}}))),s.a.createElement(F.a,{columns:h,items:f,selectionMode:x.c.single,hideFilter:!0,noSorting:!0,loadingMessage:b,onSelect:D,noResourcesName:i.b.DatastoreBrowse.BlobsResourceName,isLoading:r,itemsPerPage:50,stickyHeader:!0,isSelectedOnFocus:!1}))};function V(e){return e?s.a.createElement(M.a,{date:e,format:"lll"}):void 0}var U=function(){function e(t,a,r,n){Object(p.a)(this,e),this.storageClient=void 0,this.authContext=void 0,this.workspaceContext=void 0,this.datastore=void 0,this.userAccessToken=void 0;var s=r.dataStoreType;switch(this.authContext=t,this.workspaceContext=a,this.datastore=r,this.userAccessToken=n,s){case"AzureBlob":this.storageClient=this.getBlobDatastore();break;case"AzureDataLakeGen2":this.storageClient=this.getAdlsGen2Datastore();break;default:throw new Error("Unknown Azure datastore type: ".concat(r.dataStoreType))}}return Object(m.a)(e,[{key:"getObjects",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var a,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[];case 1:return e.next=3,this.storageClient.listDatastoreLevelObjects(t,a);case 3:if((n=e.sent).status===b.a.Ok){e.next=6;break}return e.abrupt("return",Object(d.a)(Object(d.a)({},n),{},{data:[]}));case 6:n.data&&r.push.apply(r,Object(y.a)(n.data.value)),a=n.data&&n.data.continuationToken||void 0;case 8:if(a){e.next=1;break}case 9:return e.abrupt("return",{status:b.a.Ok,data:r});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"abort",value:function(){this.storageClient.abort()}},{key:"getBlobDatastore",value:function(){if(!this.datastore.azureStorageSection||!this.datastore.azureStorageSection.accountName||!this.datastore.azureStorageSection.containerName)throw new Error("Invalid Azure datastore data");return new g.BlobDatastoreAccessClient(this.authContext,this.workspaceContext,this.datastore,this.userAccessToken)}},{key:"getAdlsGen2Datastore",value:function(){if(!this.datastore.azureStorageSection||!this.datastore.azureStorageSection.clientCredentials||!this.datastore.azureStorageSection.clientCredentials.clientId||!this.datastore.azureStorageSection.clientCredentials.clientSecret||!this.datastore.azureStorageSection.clientCredentials.tenantId)throw new Error("Invalid Azure datastore data");return new g.AdlsGen2DatastoreAccessClient(this.authContext,this.workspaceContext,this.datastore,this.userAccessToken)}}]),e}(),W=function(){function e(t,a,r,n){Object(p.a)(this,e),this.explorer=void 0,this.objectsCache={},this.explorer=new U(t,a,r,n)}return Object(m.a)(e,[{key:"getObjects",value:function(){var e=Object(l.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.objectsCache[t]){e.next=2;break}return e.abrupt("return",{status:b.a.Ok,data:this.objectsCache[t]});case 2:return e.next=4,this.explorer.getObjects(t);case 4:return(a=e.sent).status===b.a.Ok&&a.data&&(this.objectsCache[t]=a.data),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearCache",value:function(){this.objectsCache={}}}]),e}(),G=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var r;return Object(p.a)(this,a),(r=t.call(this,e)).explorer=void 0,r.rootPath="",r.onSearchTextChange=function(e){if(e){var t=r.state.initialDatastoreObjects.filter((function(t){return t.name.startsWith(e)}));r.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{datastoreObjects:t})}))}else r.setState((function(e){return Object(d.a)(Object(d.a)({},e),{},{datastoreObjects:r.state.initialDatastoreObjects})}))},r.onItemSelected=function(e){e.objectType===g.DatastoreBrowseObject.Folder?(r.rootPath=e.path,r.loadStorageLevel(),r.props.onSelected(r.checkFilesInSubfolders(r.rootPath))):r.props.onSelected(e.path)},r.onIncludeSubfoldersCheck=function(){r.setState((function(e){return{includeFilesInSubfolders:!e.includeFilesInSubfolders}}),(function(){r.props.onSelected(r.checkFilesInSubfolders(r.rootPath))}))},r.checkFilesInSubfolders=function(e){var t=e;if(r.state.includeFilesInSubfolders){if(!t)return"/**";t+=t.endsWith("/")?"**":""}else{if(!t)return"/";t=t.endsWith("**")?t.slice(0,-2):t}return t},r.navigateToUpperLevel=function(){if(r.rootPath){var e=r.rootPath.lastIndexOf("/",r.rootPath.length-2);r.rootPath=e>=0?r.rootPath.substring(0,e+1):"","/"===r.rootPath&&(r.rootPath=""),r.props.onSelected(r.checkFilesInSubfolders(r.rootPath)),r.loadStorageLevel()}},r.refresh=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.explorer.clearCache(),e.next=3,r.loadStorageLevel();case 3:case"end":return e.stop()}}),e)}))),r.dismissMessage=function(){r.setState({messages:[]})},r.state={datastoreObjects:[],loading:!1,includeFilesInSubfolders:!!r.props.defaultSelectedPath&&r.props.defaultSelectedPath.endsWith("**"),initialDatastoreObjects:[],messages:[]},r.explorer=new W(e.authContext,e.workspaceContext,e.datastore,e.userAccessToken),r.rootPath=a.getRootPath(e.defaultSelectedPath),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.loadStorageLevel()}},{key:"render",value:function(){var e=this.state,t=e.datastoreObjects,a=e.loading,r=!this.rootPath.length;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{style:{height:"fit-content",paddingBottom:"10px"}},s.a.createElement(o.MessageBar,{messages:this.state.messages,onDismiss:this.dismissMessage,maxContainerHeight:150})),s.a.createElement(L,{datastoreObjects:t,topLevel:r,loading:a,onLevelUp:this.navigateToUpperLevel,onSelected:this.onItemSelected,onRefresh:this.refresh,includeFilesInSubfolders:this.state.includeFilesInSubfolders,onFilesInSubfoldersChecked:this.onIncludeSubfoldersCheck,onFilterBoxTextChanged:this.onSearchTextChange}))}},{key:"loadStorageLevel",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.explorer.getObjects(this.rootPath);case 3:(t=e.sent).status===b.a.Ok&&t.data?this.setState({loading:!1,datastoreObjects:t.data,initialDatastoreObjects:t.data,messages:[]}):(t.status===b.a.Error&&t.error&&this.setState({messages:[Object(C.a)(t.error,i.b.Data.Common.ErrorTitlePlaceholder,{replaceStorageAuthorizationMessage:!0})]}),this.setState({loading:!1}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getRootPath",value:function(e){if(!e)return"";var t=e.trim();return t&&"/"===t[0]&&(t=t.slice(1)),t.length&&"/"!==t[t.length-1]?this.trimLastSegment(t):t}},{key:"trimLastSegment",value:function(e){var t=e.lastIndexOf("/",Math.max(e.length-2,0));return t>=0?e.substring(0,t+1):""}}]),a}(s.a.Component),H=Object(D.a)(Object(S.a)(Object(v.a)(G))),Q=function(e){var t=e.isOpened,a=e.onSelected,n=e.onDismiss,c=e.defaultSelectedPath,u=e.datastore,l=e.userAccessToken,d=s.a.useState("/"),p=Object(r.a)(d,2),m=p[0],h=p[1];s.a.useEffect((function(){t&&h(c||"/")}),[c,t]);var f=m?"".concat(i.b.DatastoreBrowse.DatastorePathSubtitle," ").concat(m.replace(/\*\.\*$/,"")):"";return s.a.createElement(o.Dialog,{visible:t,title:i.b.DatastoreBrowse.BrowseDialogTitle,subText:f,buttonText:i.b.DatastoreBrowse.BrowseDialogSubmitButton,fixedWidthHeight:!0,onDismiss:n,onPrimaryButtonClick:function(){a(m)},containerClassName:z},s.a.createElement(H,{datastore:u,onSelected:h,defaultSelectedPath:c,userAccessToken:l}))}},Xaxw:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("1eWE"),n=a("XpkB"),s=a("LzvZ"),o=function(e){var t=e.inputName,a=e.savedId,o=e.key;return Object(s.a)({name:t,savedId:a,key:o,locStringTemplate:n.b.Lineage.OneHopLabel,event:r.a.DatasetOneHopLineage})}},XcnZ:function(e,t,a){"use strict";a.r(t);var r=a("+7EU");a.d(t,"getAddMountCommandBarProps",(function(){return r.b})),a.d(t,"AddMountButton",(function(){return r.a}));var n=a("2qp5");a.d(t,"ComputeInstanceDataPivot",(function(){return n.a}));var s=a("HgRK");for(var o in s)["default","getAddMountCommandBarProps","AddMountButton","ComputeInstanceDataPivot"].indexOf(o)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(o);var i=a("TwvB");a.d(t,"getColumns",(function(){return i.a})),a.d(t,"getMounts",(function(){return i.b}));var c=a("c7k5");a.d(t,"MountDatasetWizard",(function(){return c.b})),a.d(t,"MountDatasetWizardPanel",(function(){return c.c})),a.d(t,"MountStorageForm",(function(){return c.d})),a.d(t,"MountStorageFormPanel",(function(){return c.e})),a.d(t,"MountConsumeSamplePython",(function(){return c.a}))},Xopk:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("d0cs"),c=a("rxFa"),u=a("ERkP"),l=a.n(u),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e="btn-with-gblparam ".concat(this.props.className),t=Object(i.db)("global-param-and-button",{float:"right",display:"flex",flexDirection:"row-reverse",justifyContent:"flex-start",flexWrap:"nowrap",alignContent:"center",height:"25px",position:"relative",selectors:{".global-param .param-add-on-container":{position:"initial",selectors:{">button":{height:"25px",zIndex:1}}}}}),a=Object(i.db)(e,{fontSize:"12px"}),r=this.props.readOnly||this.props.applyGlobalParameter;return l.a.createElement("div",{className:t},this.props.label&&l.a.createElement(c.a,{disabled:r,onClick:this.props.onClick,className:a},this.props.label),l.a.createElement("div",{className:"global-param"},this.renderElement(this.props.element)))}},{key:"renderElement",value:function(e){if(e&&!this.props.readOnly)return e}}]),a}(l.a.Component)},Y2j4:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("ERkP"),n=a.n(r),s=a("wln6"),o=a("jSBj"),i=function(e){var t=e.datasetVersion||"1";return n.a.createElement("div",{className:"dataset-name-version"},n.a.createElement("div",{className:"dataset-name"},n.a.createElement(s.a,{name:e.datasetName,errorMessage:e.errorMessage,onChange:e.onNameChange,disabled:e.disabled,autoFocus:e.autoFocus})),n.a.createElement("div",{className:"dataset-version"},n.a.createElement(o.a,{version:t})))}},Y9LQ:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("2h71"),n=a("XpkB"),s={getErrorMessage:o,getFieldError:function(e,t){return o(e,{fieldName:t})}};function o(e,t){var a,s=n.b.Data.Common.Validation[e],o=Object(r.a)(Object.getOwnPropertyNames(t));try{for(o.s();!(a=o.n()).done;){var i=a.value;s=s.replace("{".concat(i,"}"),t[i])}}catch(c){o.e(c)}finally{o.f()}return s}},YLaE:function(e,t,a){"use strict";a.r(t);var r=a("o9Up");a.d(t,"AuthSection",(function(){return r.a}));var n=a("FQdZ");for(var s in n)["default","AuthSection"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);var o=a("+JrC");for(var s in o)["default","AuthSection"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(s);var i=a("jdtm");for(var s in i)["default","AuthSection"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return i[e]}))}(s);var c=a("O+BM");a.d(t,"SupportedAuthTypes",(function(){return c.a})),a.d(t,"supportsUpdate",(function(){return c.b}))},ZIps:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("d0cs"),n=Object(r.db)({margin:"0 -20px"})},ZYzI:function(e,t,a){"use strict";a.d(t,"a",(function(){return se}));var r=a("VtSi"),n=a.n(r),s=a("Czhu"),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("ERkP"),p=a.n(d),m=a("kgxj"),h=a("WbBJ"),f=a("tSJw"),g=a("1eWE"),b=a("67aH"),D=a("yiDG"),S=a("Auaq"),v=a("Ya8k"),C=a("7vdV"),y=a("oziZ"),P=a("D0BB"),k=a("nsO7"),O=a.n(k),F=a("d0cs"),E=a("yjIu"),T=a("JywU"),w=a("J7yX"),j=a("XpkB"),x=a("o9Up"),N=a("O+BM"),M=a("TUpj"),A=a("TSkZ"),I=a("8W3t"),R=a("/ZmK"),B=a("V4Kj"),q=a("1qZ0"),z=a("1vim"),L=function(e,t){var a=j.b.Datastore.DatastoreEditPage.CommonFields.StorageByType,r={AzureBlob:a.StorageAccount.ValidationErrors.Required,AzureFile:a.StorageAccount.ValidationErrors.Required,AzureDataLakeGen2:a.StoreName.ValidationErrors.Required,AzureDataLake:a.StoreName.ValidationErrors.Required,AzurePostgreSql:a.ServerName.ValidationErrors.Required,AzureMySql:a.ServerName.ValidationErrors.Required,AzureSqlDatabase:a.ServerDatabase.ValidationErrors.Required,GlusterFs:a.GenericRequired,DBFS:a.GenericRequired};return z.a.isRequired(t,r[e])},V=function(e){var t=j.b.Datastore.DatastoreEditPage.CommonFields.SubscriptionId;return z.a.isRequired(e,t.ValidationErrors.Required)},U=a("+ftt"),W=a("3ahr"),G=a("ApYq"),H=a("AKjM"),Q={validateCreds:function(){var e=Object(o.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({status:b.a.Error}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},_=["AzureBlob","AzureFile","AzureDataLake","AzureDataLakeGen2"],Y=function(){var e=Object(o.a)(n.a.mark((function e(t,a){var r,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Q.validateCreds(t,a);case 3:s=e.sent,r=Object(w.c)(s),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r=Object(w.d)(e.t0);case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),X=a("WC4d"),K=a("s+9k"),J=a("WYY7"),Z=a("HLY3"),$=a("FINz"),ee=a("GGXT"),te=a("LWCo"),ae=a("YlIK"),re=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).onClick=Object(o.a)(n.a.mark((function e(){var t,a,s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,a=t.constructPayload,s=t.values,r.setState({busy:!0,statusMsg:void 0}),e.next=4,Y(a(s),s.credentialType);case 4:o=e.sent,r.setState({busy:!1,statusMsg:o});case 6:case"end":return e.stop()}}),e)}))),r.validateTooltipMsg=function(e){return e.title.length>0||e.message.length>0||!!e.link&&!!e.link.href&&e.link.href.length>0&&e.link.text.length>0},r.statusTooltipContent=function(e){return r.validateTooltipMsg(e)?p.a.createElement(p.a.Fragment,null,e.title.length>0&&p.a.createElement("b",null,"".concat(e.title,": ")),e.message.length>0&&"".concat(e.message," "),e.link&&e.link.href&&e.link.href.length>0&&p.a.createElement(X.a,{href:e.link.href},e.link.text),p.a.createElement("br",null)):null},r.getStatus=function(){var e=r.state.statusMsg,t=Object(F.X)(),a=j.b.Datastore.DatastoreEditPage.TestConnection.Status;if(e){if(e.messageType===D.c.Success)return p.a.createElement(te.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:"s1"},style:{paddingRight:"9px"}},p.a.createElement(K.a,{name:J.a.SkypeCircleCheck,styles:{root:{color:t.semanticColors.successIcon}}}),p.a.createElement("div",null,a.Success));if(e.messageType===D.c.Error){var n=r.statusTooltipContent(e);return p.a.createElement(te.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:"s1"},style:{paddingRight:"9px"}},p.a.createElement(K.a,{name:J.a.StatusErrorFull,styles:{root:{color:t.semanticColors.errorIcon}}}),p.a.createElement("div",null,a.Failure),n&&p.a.createElement(ae.a,{content:n},p.a.createElement(X.a,null,a.FailureReasonLinkText)))}}return null},r.state={busy:!1,statusMsg:void 0},r}return Object(c.a)(a,[{key:"render",value:function(){var e=j.b.Datastore.DatastoreEditPage.TestConnection.Button;return this.state.busy?p.a.createElement(Z.a,{size:$.a.medium,label:e.BusyText,labelPosition:"right",style:{paddingBottom:"5px"}}):p.a.createElement(te.a,{horizontalAlign:"end",tokens:{childrenGap:"s1"}},p.a.createElement(te.a.Item,null,this.getStatus()),p.a.createElement(te.a.Item,null,p.a.createElement(ee.a,{text:e.ButtonText,buttonType:ee.b.Action,iconName:J.a.Attach,onClick:this.onClick,style:{height:"32px"},disabled:this.props.disabled})))}}]),a}(p.a.Component),ne=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;Object(i.a)(this,a),(r=t.call(this,e)).initialFormValues=void 0,r.sharedArmClient=void 0,r.renderTestConnectionButton=function(e){return r.props.expContext.isEnabled(f.a.TestDatastoreConnectionButton)&&_.includes(e.values.datastoreType)?p.a.createElement(re,{disabled:!e.isValid,values:e.values,constructPayload:a.constructPayload}):null},r.renderAzureSubscriptionFields=function(){return"AzureSubscription"===r.state.selectedAccountSelectionMethod&&p.a.createElement(p.a.Fragment,null,p.a.createElement(M.a,{disabled:r.props.creatingDatastore}),p.a.createElement(B.a,{resourceLabel:r.getResourceLabelForStorageType(r.state.selectedDatastoreType),disabled:r.props.creatingDatastore,resourceList:r.state.resourceList,loading:r.state.resourceLoading}))},r.onChange=function(){var e=Object(o.a)(n.a.mark((function e(t,a,o){var i,c,u,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.onChangeCallBack(t),t.datastoreType!==r.state.selectedDatastoreType&&(i=N.a[t.datastoreType],r.setState({selectedDatastoreType:t.datastoreType,selectedAccountSelectionMethod:"AzureSubscription",selectedAuthType:i&&i.length?i[0]:void 0,selectedResource:void 0,regionInfoMessage:[]}),r.loadArmResources(t),c="AzurePostgreSql"===t.datastoreType?"5432":"3306",a(Object(s.a)(Object(s.a)({},t),{},{portNumber:c,resourceName:void 0,credentialType:i&&i.length?i[0]:void 0,accountSelectionMethod:r.initialFormValues.accountSelectionMethod,storageServiceName:r.initialFormValues.storageServiceName,storageUrl:r.initialFormValues.storageUrl,serverName:r.initialFormValues.serverName,storeName:r.initialFormValues.storeName,databaseName:r.initialFormValues.databaseName,credential:r.initialFormValues.credential,userId:r.initialFormValues.userId,userPassword:r.initialFormValues.userPassword,enableSSL:r.initialFormValues.enableSSL,serviceDataAccessAuthIdentity:r.initialFormValues.serviceDataAccessAuthIdentity,resourceGroupName:r.initialFormValues.resourceGroupName,saveCredentials:r.initialFormValues.saveCredentials,clientId:r.initialFormValues.clientId,tenantId:r.initialFormValues.tenantId,clientSecret:r.initialFormValues.clientSecret,authorityUrl:r.initialFormValues.authorityUrl}))),t.accountSelectionMethod!==r.state.selectedAccountSelectionMethod&&(r.setState({selectedAccountSelectionMethod:t.accountSelectionMethod,regionInfoMessage:r.getRegionWarningMessage(t)}),r.initialFormValues.resourceName=r.state.selectedResource,r.initialFormValues.storageServiceName=r.state.storageServiceName,r.initialFormValues.storageUrl=r.state.storageUrl,r.initialFormValues.serverName=r.state.serverName,r.initialFormValues.storeName=r.state.storeName,a(Object(s.a)(Object(s.a)({},t),{},{resourceName:r.initialFormValues.resourceName,storageServiceName:r.initialFormValues.storageServiceName,storageUrl:r.initialFormValues.storageUrl,serverName:r.initialFormValues.serverName,storeName:r.initialFormValues.storeName,resourceGroupName:r.initialFormValues.resourceGroupName,saveCredentials:r.initialFormValues.saveCredentials}))),t.subscriptionId!==r.state.selectedSubscriptionId?(r.setState({selectedSubscriptionId:t.subscriptionId,selectedResource:void 0,storageServiceName:void 0,regionInfoMessage:[]}),r.loadArmResources(t),o(Object(s.a)(Object(s.a)({},r.initialFormValues),{},{serviceDataAccessAuthIdentity:t.serviceDataAccessAuthIdentity,datastoreName:t.datastoreName,datastoreType:t.datastoreType,accountSelectionMethod:t.accountSelectionMethod,subscriptionId:t.subscriptionId,credentialType:t.credentialType,resourceName:void 0}))):t.resourceName!==r.state.selectedResource?r.setState({selectedResource:t.resourceName,storageServiceName:void 0,regionInfoMessage:r.getRegionWarningMessage(t)}):t.storageServiceName!==r.state.storageServiceName?r.setState({storageServiceName:t.storageServiceName}):t.storageUrl!==r.state.storageUrl?r.setState({storageUrl:t.storageUrl}):t.serverName!==r.state.serverName?r.setState({serverName:t.serverName}):t.storeName!==r.state.storeName?r.setState({storeName:t.storeName}):t.credentialType!==r.state.selectedAuthType&&(r.setState({selectedAuthType:t.credentialType}),o(Object(s.a)(Object(s.a)({},t),{},{credential:""}))),(u=r.getBooleanEquivalentOf(t.serviceDataAccessAuthIdentity))!==r.state.selectedGrantWSAccess&&r.setState({selectedGrantWSAccess:u}),t.saveCredentials!==r.state.saveCredentials&&(l=N.a[t.datastoreType],r.setState({saveCredentials:t.saveCredentials}),a(Object(s.a)(Object(s.a)({},t),{},{tenantId:r.initialFormValues.tenantId,clientId:r.initialFormValues.clientId,clientSecret:r.initialFormValues.clientSecret,authorityUrl:r.initialFormValues.authorityUrl,enableSSL:r.initialFormValues.enableSSL,userId:r.initialFormValues.userId,userPassword:r.initialFormValues.userPassword,credential:r.initialFormValues.credential,credentialType:l&&l.length?l[0]:void 0})));case 7:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),r.onChangeCallBack=function(e){r.props.onChange&&!O.a.isEqual(e,r.initialFormValues)&&r.props.onChange(e)},r.validate=function(e){var t=Object(s.a)(Object(s.a)({datastoreName:A.a.validate(e.datastoreName)},a.validateByDatastoreType(e)),x.a.validate(e));return"AzureSubscription"===r.state.selectedAccountSelectionMethod&&(t.subscriptionId=V(e.subscriptionId),t.resourceName=L(e.datastoreType,e.resourceName)),O.a.pickBy(t,(function(e){return void 0!==e}))},r.onSubmit=function(){var e=Object(o.a)(n.a.mark((function e(t,s){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=a.constructPayload(t),E.a.trackEvent(g.a.DatastoreCreateSubmit,void 0,{method:r.state.selectedAccountSelectionMethod,type:"".concat(o.dataStoreType)}),r.props.dispatchPayload(o,Boolean(r.state.selectedGrantWSAccess),s);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.getResourceLabelForStorageType=function(e){var t=Object(q.b)()[e];return void 0===t?"":t.resourceLabel},r.loadArmResources=function(){var e=Object(o.a)(n.a.mark((function e(t){var a,s,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.subscriptionId){e.next=2;break}return e.abrupt("return");case 2:if(a=Object(q.b)()[t.datastoreType]){e.next=5;break}return e.abrupt("return");case 5:return r.setState({resourceLoading:!0}),s=a.resourceType,e.next=9,r.sharedArmClient.getResources(t.subscriptionId,void 0,s?[s]:[]);case 9:(o=e.sent).status===b.a.Ok?(i=Object(q.a)(t.datastoreType),r.setState({resourceList:o.data?o.data.filter(i):[],resourceLoading:!1})):o.status===b.a.Error&&r.props.messageContext.addMessage(T.a.addErrorCodeAndIsUserError("DatastoreCreate LoadArmResources",Object(w.a)(o.error,j.b.Data.Common.ErrorTitlePlaceholder)));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.getRegionWarningMessage=function(e){if("Manual"===e.accountSelectionMethod)return[{title:j.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.DifferentRegionWarning.Title,message:j.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.DifferentRegionWarning.GenericMessage,messageType:D.c.Info}];if(void 0===e.resourceName)return[];var t=r.props.workspaceContext.location;if(""===t)return[];var a=e.resourceName.split(":"),n=r.state.resourceList.find((function(e){return e.name===a[0]})),s=n&&n.location?n.location:"";return""===s?[]:s!==t?[{title:j.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.DifferentRegionWarning.Title,message:j.b.Datastore.DatastoreEditPage.CommonFields.StorageByType.DifferentRegionWarning.Message.replace("{resourceName}",a[0]).replace("{resourceLocation}",s).replace("{workspaceLocation}",t),messageType:D.c.Warning}]:[]},r.onRegionWarningDismiss=function(){r.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{regionInfoMessage:[]})}))},r.sharedArmClient=new S.a(r.props.authContext);var c=N.a.AzureBlob,u=r.props.authContext.getTenantId();return E.a.trackEvent(g.a.DatastoreCreateLaunch,void 0,{createProviderSource:r.props.createSource}),r.initialFormValues=r.props.initialFormValues||Object(s.a)(Object(s.a)({datastoreName:"",datastoreType:"AzureBlob",accountSelectionMethod:"AzureSubscription",credentialType:c&&c.length?c[0]:void 0,subscriptionId:r.props.workspaceContext.subscriptionId,saveCredentials:!0},U.a.getInitialFormValues()),x.a.getInitialFormValues(u)),r.state={selectedDatastoreType:r.initialFormValues.datastoreType,selectedAccountSelectionMethod:r.initialFormValues.accountSelectionMethod,selectedAuthType:r.initialFormValues.credentialType,selectedSubscriptionId:r.initialFormValues.subscriptionId,selectedResourceGroup:r.initialFormValues.resourceGroupName,saveCredentials:r.initialFormValues.saveCredentials,selectedResource:r.initialFormValues.resourceName,selectedGrantWSAccess:"None"!==r.initialFormValues.serviceDataAccessAuthIdentity,storageServiceName:r.initialFormValues.storageServiceName,storageUrl:r.initialFormValues.storageUrl,serverName:r.initialFormValues.serverName,storeName:r.initialFormValues.storeName,resourceLoading:!0,resourceList:[],regionInfoMessage:[]},r}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){this.sharedArmClient.dispose()}},{key:"componentWillMount",value:function(){this.loadArmResources(this.initialFormValues)}},{key:"render",value:function(){var e=this.props.disableDatastoreType||this.props.creatingDatastore,t=Object(F.db)({selectors:{"div.error-placeholder":{display:"none"}}});return p.a.createElement("div",{className:t},this.props.messages&&this.props.messages.length>0&&p.a.createElement(m.MessageBar,{messages:this.props.messages,onDismiss:this.props.onDismissCallback,maxContainerHeight:150}),p.a.createElement(h.a,{initialFormValues:this.initialFormValues,validate:this.validate,handleSubmit:this.onSubmit,handleCancel:this.props.onCancel,onValuesChange:this.onChange,style:{width:this.props.width||"500px"},primaryButtonText:this.props.primaryButtonText,resetOnSubmit:!1,showPrivacyDisclaimer:!0,customActionElements:this.renderTestConnectionButton,actionBarStyles:{alignItems:"flex-end"}},p.a.createElement(A.a,{disabled:this.props.creatingDatastore}),p.a.createElement(I.a,{datastoreTypeOptions:this.props.datastoreTypeCreateOptions,disabled:e}),p.a.createElement(R.a,{disabled:this.props.creatingDatastore}),this.renderAzureSubscriptionFields(),this.renderByDatastoreType(),p.a.createElement(x.a,{datastoreType:this.state.selectedDatastoreType,selectedAuthType:this.state.selectedAuthType,disabled:this.props.creatingDatastore,selectedSubscriptionId:this.state.selectedSubscriptionId,showSubAndRg:this.state.selectedGrantWSAccess&&"Manual"===this.state.selectedAccountSelectionMethod,saveCredentials:this.state.saveCredentials}),p.a.createElement(m.MessageBar,{messages:this.getFooterMessages()})))}},{key:"getFooterMessages",value:function(){return[{title:j.b.Datastore.DatastoreEditPage.CommonFields.SkipValidation.noteTitle,message:j.b.Datastore.DatastoreEditPage.CommonFields.SkipValidation.note,messageType:D.c.Info,unDismissable:!0}]}},{key:"renderByDatastoreType",value:function(){switch(this.state.selectedDatastoreType){case"AzureBlob":case"AzureFile":case"AzureDataLakeGen2":return p.a.createElement(p.a.Fragment,null,p.a.createElement(U.a,{subscriptionId:this.state.selectedSubscriptionId,accountName:this.state.selectedResource,accountSelectionMethod:this.state.selectedAccountSelectionMethod,datastoreType:this.state.selectedDatastoreType,disabled:this.props.creatingDatastore,regionMessage:this.state.regionInfoMessage,onRegionMessageDismiss:this.onRegionWarningDismiss}));case"AzureSqlDatabase":return p.a.createElement(W.a,{accountSelectionMethod:this.state.selectedAccountSelectionMethod,disabled:this.props.creatingDatastore,regionMessage:this.state.regionInfoMessage,onRegionMessageDismiss:this.onRegionWarningDismiss});case"AzurePostgreSql":case"AzureMySql":return p.a.createElement(G.a,{accountSelectionMethod:this.state.selectedAccountSelectionMethod,datastoreType:this.state.selectedDatastoreType,disabled:this.props.creatingDatastore,regionMessage:this.state.regionInfoMessage,onRegionMessageDismiss:this.onRegionWarningDismiss});case"AzureDataLake":return p.a.createElement(H.a,{accountSelectionMethod:this.state.selectedAccountSelectionMethod,disabled:this.props.creatingDatastore,regionMessage:this.state.regionInfoMessage,onRegionMessageDismiss:this.onRegionWarningDismiss});default:return!1}}},{key:"getBooleanEquivalentOf",value:function(e){return"WorkspaceSystemAssignedIdentity"===e}}],[{key:"constructPayload",value:function(e){return Object(s.a)({name:e.datastoreName,dataStoreType:e.datastoreType},a.getPayloadPropertiesByDatastoreType(e))}},{key:"getPayloadPropertiesByDatastoreType",value:function(e){switch(e.datastoreType){case"AzureBlob":case"AzureFile":case"AzureDataLakeGen2":return{azureStorageSection:U.a.getPayloadProperties(e)};case"AzureDataLake":return{azureDataLakeSection:H.a.getPayloadProperties(e)};case"AzurePostgreSql":return{azurePostgreSqlSection:G.a.getPayloadProperties(e)};case"AzureMySql":return{azureMySqlSection:G.a.getPayloadProperties(e)};case"AzureSqlDatabase":return{azureSqlDatabaseSection:W.a.getPayloadProperties(e)};default:return}}},{key:"validateByDatastoreType",value:function(e){switch(e.datastoreType){case"AzureBlob":case"AzureFile":case"AzureDataLakeGen2":return U.a.validate(e);case"AzureDataLake":return H.a.validate(e);case"AzurePostgreSql":case"AzureMySql":return G.a.validate(e);case"AzureSqlDatabase":return W.a.validate(e);default:return{}}}}]),a}(p.a.Component);ne.defaultProps={messages:[]};var se=Object(v.a)(Object(C.a)(Object(y.a)(Object(P.a)(ne))))},"a+Fo":function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("SnOo"),d=a("3q6J"),p=a("sOq8"),m=a("67aH"),h=a("oziZ"),f=a("D0BB"),g=a("nsO7"),b=a.n(g),D=a("d0cs"),S=a("mqYf"),v=a("FINz"),C=a("N8RY"),y=a("JnXU"),P=a("ERkP"),k=a("XpkB"),O=a("QlF2"),F=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).datastoreClient=void 0,r.toolTipStyle=Object(D.db)({selectors:{"div.ms-TooltipHost":{marginTop:0,display:"block"},".ms-ComboBox-container button.ms-Button":{display:"inline-block",position:"absolute",selectors:{".ms-Button-icon":{fontSize:"16px"}}}}}),r.onComboBoxValueChange=function(e,t){t&&r.props.onChange(t.data)},r.state={loading:!0,datastores:[],allDatastores:[]},r.datastoreClient=new p.a(r.props.authContext,r.props.workspaceContext),r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadDataStores();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(s.a)(n.a.mark((function e(t,a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.refreshDataStoreList&&this.props.selectedDataStore&&!a.loading&&((a.datastores||[]).includes(this.props.selectedDataStore)||this.loadDataStores()),this.state.selectedDatastore===this.props.selectedDataStore||this.state.selectedDatastore&&this.props.selectedDataStore&&this.state.selectedDatastore.name===this.props.selectedDataStore.name&&this.props.selectedDataStore.dataStoreType||this.props.onChange(this.state.selectedDatastore);case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.props.hideWhenLoading&&this.state.loading)return P.createElement(S.a,{label:k.b.Dataset.DatasetBasicsPage.LoadingDatastoreSpinner,size:v.a.small,labelPosition:"right"});var t=this.state.allDatastores.filter((function(t){return Object(O.c)(t.dataStoreType,e.props.filterDataStoreType)}));this.props.filterCredentialLessDataStore&&(t=t.filter((function(e){return e.azureStorageSection&&!b.a.isNil(e.azureStorageSection.credential)})));var r=a.getDataStoresOptions(t),n=this.state.selectedDatastore&&this.state.selectedDatastore.name||"",s=this.props.readOnly||this.props.applyGlobalParameter||this.state.loading,o=this.state.loading?l.b.Common_Loading_With_Ellipsis:this.props.placeholder;return this.props.applyGlobalParameter?P.createElement("div",{className:this.toolTipStyle},P.createElement(d.a,{content:k.b.Dataset.DatasetBasicsPage.ApplyGlobalParameterHint,directionalHint:C.a.bottomAutoEdge},P.createElement(y.a,{label:this.props.label,useComboBoxAsMenuWidth:!0,options:r,placeholder:o,selectedKey:n,text:this.props.text,onChange:this.onComboBoxValueChange,onBlur:this.props.onBlur,errorMessage:this.props.errorMessage,disabled:s,required:this.props.required,buttonIconProps:{iconName:"Unknown"}}))):P.createElement(y.a,{label:this.props.label,useComboBoxAsMenuWidth:!0,options:r,placeholder:o,selectedKey:n,text:this.props.text,onChange:this.onComboBoxValueChange,onBlur:this.props.onBlur,errorMessage:this.props.errorMessage,disabled:s,required:this.props.required})}},{key:"loadDataStores",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.onLoading&&this.props.onLoading(),e.next=3,this.datastoreClient.listDatastores(!0,!0);case 3:e.sent.serviceResponses.subscribe((function(e){if(e.data){var r=t.props.disableAzureMlGlobalDatasets?e.data.filter((function(e){return e.name&&"azureml_globaldatasets"!==e.name})):e.data;if(t.setState({loading:!1,datastores:r,allDatastores:r}),t.state.selectedDatastore){var n=a.getSelectedDatastoreByName(t.state,t.state.selectedDatastore.name);t.setState({selectedDatastore:n}),t.props.onStart&&t.props.onStart(n)}t.props.onLoaded&&t.props.onLoaded()}else e.status===m.a.Error&&t.datastoreClient.abort()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.selectedDataStore?e.text&&e.text!==e.selectedDataStore.name?{selectedDatastore:a.getSelectedDatastoreByName(t,e.text)}:{selectedDatastore:e.selectedDataStore}:null}},{key:"getDataStoresOptions",value:function(e){return e.map((function(e){return{data:e,key:void 0!==e.name?e.name:"",text:void 0!==e.name?e.name:""}}))}}]),a}(P.Component);F.getSelectedDatastoreByName=function(e,t){return t?e.datastores.find((function(e){return e.name===t})):void 0};var E=Object(h.a)(Object(f.a)(F))},a5k3:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var r=a("zygG"),n=a("fGyu"),s=a("Czhu"),o=a("9fIP"),i=a("MMYH"),c=a("nsO7"),u=a.n(c),l=a("wgY5"),d=a("XpkB"),p=a("lwe2"),m=a("lnmi"),h=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,null,[{key:"mapToColumnDefinitionField",value:function(e,t,a,r){var n=this;if(!e.schema)return[];var s=new Set(e.columnsToRemove||[]),o=this.buildShortPreview(t),i=this.getColumnToDatasetTraitsMap(a);return e.schema.map((function(e){var t=e.columnName||"",a=o[t],c=p.a.find(e.type)||p.a.Unknown;return{name:t,columnType:c,include:!s.has(t),preview:a&&a.preview,columnParsingError:r?void 0:n.getColumnParsingError(a,c),traits:i.get(t)}}))}},{key:"reduceSchemaColumn",value:function(e,t,a,r,o){if(!e.schema)return e;var i=e.schema.find((function(e){return e.columnName===t})),c=e.columnsToRemove||[];if(!i)return e;switch(a){case"include":var u=c.indexOf(t)>=0;return this.updateTraitsStatusOnColumnInclude(t,u,o),this.handlePathColumn(t,u,e),Object(s.a)(Object(s.a)({},e),{},{columnsToRemove:u?c.filter((function(e){return e!==t})):[].concat(Object(n.a)(c),[t])});case"columnType":var l=r,d=l.Name===p.a.Date.Name;return this.updateTimeSeriesTraitsStatusOnColumnType(t,d,o),i.type===l.Name?e:(i.type=l.Name,Object(s.a)({},e));case"traits":return this.updateTraitPropertiesMap(t,r,o),e;default:return e}}},{key:"buildShortPreview",value:function(t){var a={};if(!t||!t.schema||!t.rows)return a;for(var r=Math.min(t.rows.length,e.PREVIEW_ITEMS_TO_SHOW),n=0;n<t.schema.length;n++){var s=t.schema[n];if(s.id){for(var o="",i=!1,c=0;c<r;c++){var d=t.rows[c][n];if(d.value&&d.value.errorCode){o=JSON.stringify(d.value),i=!0;break}"Date"===d.type&&u.a.isString(d.value)?o+="".concat(l.utc(d.value).format("YYYY-MM-DD HH:mm:ss"),", "):o+="".concat(d.value,", ")}var m=p.a.find(s.type)||p.a.DefaultSelection;a[s.id]=i?{error:o,inferredType:m}:{preview:o.slice(0,-2),inferredType:m}}}return a}},{key:"newTraitPropertiesMap",value:function(e){var t=new Map;return e&&Object.entries(e).forEach((function(e){if("string"===typeof e[1]&&e[1].length>0){var a=Object(m.b)(e[0],e[1]);a&&t.set("".concat(e[0],"=>").concat(e[1]),a)}})),t}},{key:"mergeRequestSchema",value:function(e,t){if(e.schema&&e.schema.length>0&&t.schema&&t.schema.length>0){var a=u.a.keyBy(t.schema,"columnName"),r=new Set(t.columnsToRemove);return Object(s.a)(Object(s.a)({},e),{},{schema:e.schema.map((function(e){return e.columnName&&a[e.columnName]?Object(s.a)(Object(s.a)({},e),a[e.columnName]):e})),columnsToRemove:e.schema.filter((function(e){return e.columnName&&r.has(e.columnName)})).map((function(e){return e.columnName}))})}return e}},{key:"updateTimeSeriesTraitsStatusOnColumnType",value:function(e,t,a){a&&a.forEach((function(a){e===a.columnName&&-1!==a.traitType.indexOf("TimeSeries")&&(a.isActive=t)}))}},{key:"updateTraitsStatusOnColumnInclude",value:function(e,t,a){a&&a.forEach((function(a){e===a.columnName&&(a.isActive=t)}))}},{key:"updateTraitPropertiesMap",value:function(e,t,a){var n=new Set(t);a&&(a.forEach((function(t,s){var o=s.split("=>"),i=Object(r.a)(o,2),c=i[0];i[1]===e&&(n.has(c)?n.delete(c):a.delete(s))})),n.forEach((function(t){var r=Object(m.b)(t,e);r&&a.set("".concat(t,"=>").concat(e),r)})))}},{key:"getColumnToDatasetTraitsMap",value:function(e){var t=new Map;return e&&e.forEach((function(e,a){if(e.columnName){var n=a.split("=>"),s=Object(r.a)(n,2),o=s[0],i=s[1];void 0!==t.get(i)?t.get(i).push(o):t.set(i,[o])}})),t}},{key:"getColumnParsingError",value:function(e,t){if(e)return e.error?e.error:e.inferredType.Name!==t.Name?d.b.Data.DatasetCreateFromDatastore.Steps.Schema.ColumnParsingTypeError.replace("{expectedType}",t.Title).replace("{actualType}",e.inferredType.Title):void 0}},{key:"handlePathColumn",value:function(e,t,a){var r,n=a.schema&&"Path"===a.schema[0].columnName&&a.dataPath&&(!(r=a.dataPath.sqlDataPath)||!r.sqlTableName&&!r.sqlQuery&&!r.sqlStoredProcedureName&&!r.sqlStoredProcedureParams&&!r.queryTimeout);"Path"===e&&n&&(a.general=Object(s.a)(Object(s.a)({},a.general),{},{includePath:t}))}}]),e}();h.PREVIEW_ITEMS_TO_SHOW=3},aoQp:function(e,t){},b6Fk:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return x}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("k0yv"),d=a("kgxj"),p=a("IX2Y"),m=a("V4bT"),h=a("nXXe"),f=a("+W+I"),g=a("yiDG"),b=a("1eWE"),D=a("IoOT"),S=a("3gSQ"),v=a("uMNk"),C=a("ERkP"),y=a.n(C),P=a("XpkB"),k=a("poBQ"),O=a("lnmi"),F=a("Q7Ad"),E=a("sTnw"),T=a("/1ND"),w=a("CHYx"),j=a("a5k3"),x=function(t){Object(c.a)(r,t);var a=Object(u.a)(r);function r(){var e;Object(o.a)(this,r);for(var t=arguments.length,i=new Array(t),c=0;c<t;c++)i[c]=arguments[c];return(e=a.call.apply(a,[this].concat(i))).containerRef=y.a.createRef(),e.shouldSetFocus=!0,e.validateStep=Object(s.a)(n.a.mark((function t(){var a,r,s,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],!e.props.datasetPropertyToTraitMap){t.next=13;break}return r=[],e.props.datasetPropertyToTraitMap.forEach((function(e){e.isActive&&r.push(e)})),t.next=6,Object(O.g)(r);case 6:a=t.sent,s=new Set(a),e.props.datasetTraitFailureMessages.forEach((function(t){e.props.messageContext.dismissMessage(t)})),o=[],s.forEach((function(e){var t={messageType:g.c.Error,title:P.b.DatasetTraits.Error.Title,message:e,errorCode:"DatasetTraitError SchemaStep",isUserError:!0};o.push(t)})),e.setState({errorMessages:o}),e.props.datasetTraitFailureMessagesChanged(o);case 13:return t.abrupt("return",!(a.length>0));case 14:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(r,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.datasetRequest,r=e.datasetPreview,n=e.datasetPropertyToTraitMap,s=e.loadingPreview,o=j.a.mapToColumnDefinitionField(a,r,n,s);return this.unsetWizardErrorState(),y.a.createElement(y.a.Fragment,null,y.a.createElement(l.a,{title:t},a.schema?y.a.createElement(D.a,{className:"dataset-schema-pane"},y.a.createElement(S.a,null,y.a.createElement(d.MessageBar,{messages:this.props.bannerMessages,onDismiss:this.props.bannerMessagesOnDismiss})),y.a.createElement(p.a,{tabIndex:0,variant:"medium"},P.b.Data.DatasetCreateFromDatastore.Steps.Schema.Subtitle),y.a.createElement(m.a,{hideFilter:!0,noSorting:!0,selectionMode:v.c.none,columns:this.getColumnsListSchema(),items:o,itemsPerPage:0,stickyHeader:!0,hidePagination:!0,shouldVirtualize:!0})):y.a.createElement(h.a,{resourcesName:P.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaNoResourceItemName,iconName:""},y.a.createElement("div",{className:"parse-error-container"},y.a.createElement(p.a,{variant:"large"},P.b.Data.DatasetCreateFromDatastore.Steps.Schema.UnableToParseDatasetError)))))}},{key:"componentDidMount",value:function(){var t=this;this.props.setValidateCallback(this.validateStep),e((function(){if(t.containerRef.current&&t.shouldSetFocus){var e=t.containerRef.current.querySelector("button.ms-Toggle-background");e&&e instanceof Element&&(e.focus(),t.shouldSetFocus=!1)}}))}},{key:"componentWillUnmount",value:function(){this.props.setValidateCallback()}},{key:"unsetWizardErrorState",value:function(){this.props.unsetWizardErrorState&&!this.props.datasetTraitFailureMessages.length&&this.props.unsetWizardErrorState(F.a.Schema)}},{key:"getColumnsListSchema",value:function(){var e=this;return[{field:"include",header:P.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.Include,maxWidth:80,render:function(t,a){return y.a.createElement(f.a,{checked:a.include,ariaLabel:P.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.Include,onChange:e.getOnColumnChangeEventForToggle(a.name,"include")})}},{field:"name",header:P.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.Name,maxWidth:200},{header:P.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.DatasetTraitsColumnTitle,field:"traits",maxWidth:245,render:function(t,a){return y.a.createElement(w.a,{columnType:a.columnType,selectedKeys:a.traits,onChange:e.getOnColumnChangeEvent(a.name,"traits"),disabled:!a.include})}},{field:"columnType",header:P.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.Type,maxWidth:150,render:function(t,a){return y.a.createElement(T.a,{columnType:a.columnType,onChange:e.getOnColumnChangeEvent(a.name,"columnType"),disabled:!a.include})}},{field:"format",header:P.b.Data.DatasetCreateFromDatastore.Steps.Schema.SchemaColumns.Format,render:function(e,t){return y.a.createElement(E.a,{columnDefinition:t})}}]}},{key:"onChange",value:function(e,t,a){var r=j.a.reduceSchemaColumn(this.props.datasetRequest,e,t,a,this.props.datasetPropertyToTraitMap),n=!1;switch(this.props.datasetPropertyToTraitMap&&this.props.datasetPropertyToTraitMap.forEach((function(t){e===t.columnName&&(n=!0)})),t){case"traits":this.props.datasetTraitChanged(F.a.Schema);break;case"include":case"columnType":n&&this.props.datasetTraitChanged(F.a.Schema)}this.props.datasetRequest!==r&&(this.props.contextProps&&Object(k.b)(b.a.DatasetWizardSchemaChange,{schemaColumnDefinitionFieldName:t.toString()}),"columnType"!==t&&"format"!==t||this.props.getPreview(this.props.datasetRequest,!1),this.props.onChange(r))}},{key:"getOnColumnChangeEvent",value:function(e,t){var a=this;return function(r){a.onChange(e,t,r)}}},{key:"getOnColumnChangeEventForToggle",value:function(e,t){var a=this;return function(r,n){a.onChange(e,t,n)}}}]),r}(y.a.Component)}).call(this,a("/Qos").setImmediate)},"bC+4":function(e,t,a){"use strict";var r=a("64Li");a.d(t,"a",(function(){return r.a}))},bTG4:function(e,t){},byG2:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("2D+B"),c=a("ERkP"),u=a("XpkB"),l=a("imaQ"),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onDataSourceSelectChange=function(t,a){void 0!==a&&e.props.onChange&&e.props.onChange(t,a)},e}return Object(n.a)(a,[{key:"render",value:function(){var e=a.getDataSourceOptions(),t=this.props.initialSelectedDataSource?this.props.initialSelectedDataSource.dataSourceType.toString():"",r=this.props.id||"";return c.createElement(i.a,{id:r,className:this.props.className,required:this.props.required,disabled:this.props.disabled,selectedKey:t,label:u.b.Dataset.DatasetBasicsPage.DataSourceField,options:e,onChange:this.onDataSourceSelectChange})}}],[{key:"getDataSourceOptions",value:function(){return[{dataSourceType:l.b.Http,dataSourceName:u.b.Dataset.DatasetBasicsPage.DataSources.Http.Name},{dataSourceType:l.b.AzureDatastore,dataSourceName:u.b.Dataset.DatasetBasicsPage.DataSources.AzureDatastore.Name}].map((function(e){return{data:e,key:e.dataSourceType.toString(),text:e.dataSourceName}}))}}]),a}(c.Component)},c7k5:function(e,t,a){"use strict";var r=a("p+CL");a.d(t,"b",(function(){return r.a}));var n=a("mYvi");a.d(t,"c",(function(){return n.a}));var s=a("PHYI");a.d(t,"d",(function(){return s.a}));var o=a("wU4H");a.d(t,"e",(function(){return o.a}));var i=a("Wgtx");a.d(t,"a",(function(){return i.a}))},"ckj/":function(e,t,a){"use strict";var r=a("z50s");a.d(t,"a",(function(){return r.a}))},ewNC:function(e,t,a){"use strict";var r=a("AKjM");a.d(t,"a",(function(){return r.a}));var n=a("gc7k");a.d(t,"b",(function(){return n.a}))},fEBu:function(e,t,a){"use strict";a.d(t,"a",(function(){return J}));var r=a("Czhu"),n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("k0yv"),p=a("kgxj"),m=a("d/Yy"),h=a("yiDG"),f=a("67aH"),g=a("tSJw"),b=a("Ya8k"),D=a("oziZ"),S=a("D0BB"),v=a("IoOT"),C=a("3gSQ"),y=a("ERkP"),P=a.n(y),k=a("7nmT"),O=a.n(k),F=a("NiBv"),E=a("XpkB"),T=a("J7yX"),w=a("60PN"),j=a("QlF2"),x=a("Q7Ad"),N=a("+IlW"),M=a("/zZg"),A=a("G3Bc"),I=a("QdS/"),R=function(e){var t=e.label||E.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Label,a=void 0===e.required||e.required;return P.a.createElement(I.a,{name:"datasetPath",label:t,title:E.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Title,placeholder:e.placeholder,suffix:e.suffix,required:a,value:e.datastorePath,errorMessage:e.errorMessage,onChange:function(t,a){e.onChange(a||"")},disabled:e.disabled,onBlur:e.onBlur})},B=a("d0cs"),q=a("mqYf"),z=a("FINz"),L=a("+/5p"),V=a("uMNk"),U=a("V4bT"),W=a("r9HT"),G=a("IX2Y"),H=a("GGXT"),Q=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).inputFileRef=P.a.createRef(),r.handleFileUpload=function(e){var t=e.target.files,a=r.calculateFilesSizeInMB(t);r.setState({files:t||void 0,totalSize:a}),r.props.onChange&&r.props.onChange(e)},r.openSelectFileDialog=function(){r.inputFileRef&&r.inputFileRef.current&&r.inputFileRef.current.click()},r.state={totalSize:0},r}return Object(c.a)(a,[{key:"getValue",value:function(){return this.state.files}},{key:"render",value:function(){var e=Object(B.X)(),t=Object(B.db)({color:e.semanticColors.errorText,fontSize:12,display:"block"}),a=Object(B.db)({display:"inline-block",marginLeft:6,marginTop:12,fontSize:13}),r=Object(B.db)({marginTop:10,marginBottom:6}),n=this.props.label?P.a.createElement(W.a,{required:this.props.required},this.props.label):void 0,s=this.props.inputButtonText||E.b.Data.FilesInputControl.DefaultButtonText;return P.a.createElement("div",{className:"filesInput"},n,P.a.createElement("input",{className:"fileInput",type:"file",multiple:this.props.multiple,onChange:this.handleFileUpload,style:{display:"none"},ref:this.inputFileRef}),P.a.createElement(G.a,{className:"selectFilesFieldText",variant:"medium",children:E.b.Data.DatasetCreateByUploadPage.SelectFilesFieldTextV3}),P.a.createElement(H.a,{text:s,className:r,onClick:this.openSelectFileDialog,disabled:this.props.disabled,primary:!0}),this.state.files&&this.state.files.length?P.a.createElement("div",{className:a},E.b.Data.FilesInputControl.fileSelectionMessage.replace("{numOfFiles}",this.state.files.length.toString()).replace("{sizeOfFiles}",this.state.totalSize.toPrecision(4)).replace("{numOfFilesUploaded}",(this.props.filesUploaded||0).toString()).replace("{numOfFiles}",this.state.files.length.toString())):void 0,this.props.errorMessage&&P.a.createElement("div",{className:t},this.props.errorMessage))}},{key:"calculateFilesSizeInMB",value:function(e){var t=0;return e&&e.length&&(Array.from(e).forEach((function(e){return t+=e.size})),t/=1048576),t}}]),a}(P.a.Component),_=Object(B.db)({display:"inline",margin:"10px",selectors:{"div.ms-DetailsList":{height:"100%"}}}),Y=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).onFileSelectionChange=function(t){var a=t.target.files;e.props.onFileSelectionChange(a)},e}return Object(c.a)(a,[{key:"render",value:function(){var e={columns:[{header:E.b.Data.DatasetCreateByUploadPage.FileGridName,field:"fileName",maxWidth:300,minWidth:200},{header:E.b.Data.DatasetCreateByUploadPage.FileGridSize,field:"fileSize",maxWidth:100,minWidth:100},{header:E.b.Data.DatasetCreateByUploadPage.FileGridPercentage,field:"percentComplete",maxWidth:100,minWidth:100},{header:E.b.Data.DatasetCreateByUploadPage.FileGridStatus,field:"status",maxWidth:100,minWidth:100,render:function(e,t){return t.status===m.FileUploadStatus.InProgress?P.a.createElement(q.a,{className:"fileStatusProgressIcon",size:z.a.small}):t.status===m.FileUploadStatus.Completed?P.a.createElement(L.a,{className:"fileStatusSuccessIcon",iconName:"SkypeCircleCheck"}):t.status===m.FileUploadStatus.Error?P.a.createElement(L.a,{className:"fileStatusFailureIcon",iconName:"StatusErrorFull"}):P.a.createElement(P.a.Fragment,null)}}],items:this.props.fileUploadStatusRows,selectionMode:V.c.none,hideFilter:!0,itemsPerPage:5},t=this.props.fileUploadStatusRows.filter((function(e){return e.status===m.FileUploadStatus.Completed}));return P.a.createElement(P.a.Fragment,null,P.a.createElement(Q,{label:E.b.Data.DatasetCreateByUploadPage.SelectFilesFieldLabel,required:!0,id:"dataSetFiles",multiple:!0,errorMessage:this.props.errorMessage,disabled:this.props.disabled,onChange:this.onFileSelectionChange,ref:this.props.filesInput,filesUploaded:t.length}),this.props.fileUploadStatusRows&&this.props.fileUploadStatusRows.length?P.a.createElement("div",{className:_},P.a.createElement(U.a,e)):void 0)}}]),a}(P.a.PureComponent),X=a("CNWI"),K=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),u=0;u<n;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).filesInput=P.a.createRef(),e.datastoreAccessClient=void 0,e.shouldSetFocus=!0,e.choiceGroupContainerRef=P.a.createRef(),e.onSkipValidationCheckboxChange=function(){e.props.onSkipValidationCheckboxChange()},e.onCreateNewDatastoreSuccess=function(){e.props.onCreateNewDatastoreSuccess()},e.onDatastoreSelectionChoiceChange=function(t){e.props.onDatastoreSelectionChoiceChange(t),t===M.b.Existing&&e.getOnChangeEvent("datastoreName")(e.props.datastore&&e.props.datastore.name||"")},e.onFileSelectionChange=function(t){if(e.props.onFileSelectionChange(t),null!==t){var a=[];Array.from(t).forEach((function(e){a.push({fileName:e.name,fileSize:(e.size/1048576).toPrecision(4),percentComplete:"",status:m.FileUploadStatus.Selected})})),e.props.onFileUploadStatusChange(a)}else e.props.onFileUploadStatusChange([])},e.onExistingDatastoreChange=function(){var t=Object(o.a)(s.a.mark((function t(a){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||!a.dataStoreType){t.next=16;break}if(e.props.onDatastoreSelected(a),"AzureBlob"!==a.dataStoreType||!a.azureStorageSection){t.next=9;break}if(a.azureStorageSection.credential){t.next=8;break}return t.next=6,e.props.authContext.getToken(Object(j.d)());case 6:r=t.sent,e.props.onGetCredentiallessToken(r);case 8:(a.azureStorageSection.credential||r)&&(e.datastoreAccessClient&&e.datastoreAccessClient.abort(),e.datastoreAccessClient=new m.BlobDatastoreAccessClient(e.props.authContext,e.props.workspaceContext,a,r));case 9:if("AzureDataLakeGen2"!==a.dataStoreType||!a.azureStorageSection){t.next=16;break}if(a.azureStorageSection.clientCredentials&&a.azureStorageSection.clientCredentials.clientId&&a.azureStorageSection.clientCredentials.clientSecret&&a.azureStorageSection.clientCredentials.tenantId){t.next=15;break}return t.next=13,e.props.authContext.getToken(Object(j.d)());case 13:n=t.sent,e.props.onGetCredentiallessToken(n);case 15:(a.azureStorageSection.clientCredentials&&a.azureStorageSection.clientCredentials.clientId&&a.azureStorageSection.clientCredentials.clientSecret&&a.azureStorageSection.clientCredentials.tenantId||n)&&(e.datastoreAccessClient&&e.datastoreAccessClient.abort(),e.datastoreAccessClient=new m.AdlsGen2DatastoreAccessClient(e.props.authContext,e.props.workspaceContext,a,n));case 16:e.getOnChangeEvent("datastoreName",a&&a.dataStoreType)(a&&a.name||"");case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.detectFileRemoved=function(t){Array.from(t).forEach((function(t){if(0===t.size){var a={messageType:h.c.Error,title:E.b.Data.DatasetCreateByUploadPage.FilesSelectionFailureTitle,message:E.b.Data.DatasetCreateByUploadPage.FilesSelectionFailure},r=E.b.Data.DatasetCreateByUploadPage.FilesSelectionFailure;throw e.props.onError({datastoreSelectionErrors:{},fileErrors:r}),a}}))},e.clearFilesErrorState=function(){var t=e.props.fileUploadStatusRows.map((function(e){return e.status===m.FileUploadStatus.Error?Object(r.a)(Object(r.a)({},e),{},{status:m.FileUploadStatus.InProgress}):Object(r.a)({},e)}));e.props.onFileUploadStatusChange(t)},e.getUploadPercentage=function(t){return function(a){var n=e.props.fileUploadStatusRows.map((function(e){if(e.fileName!==t.name)return e;if(e.status===m.FileUploadStatus.Error)return Object(r.a)(Object(r.a)({},e),{},{percentComplete:""});var n=a.bytesUploaded/a.fileSize*100;return a.status!==m.FileUploadStatus.Completed&&(n=Math.min(n,99.9)),Object(r.a)(Object(r.a)({},e),{},{percentComplete:n.toPrecision(3),status:a.status})}));e.props.onFileUploadStatusChange(n)}},e.setFailedFilesState=function(){var t=e.props.fileUploadStatusRows.map((function(e){return e.status!==m.FileUploadStatus.Completed?Object(r.a)(Object(r.a)({},e),{},{status:m.FileUploadStatus.Error,percentComplete:""}):Object(r.a)({},e)}));t=t.sort((function(e,t){return e.status===m.FileUploadStatus.Completed&&t.status===m.FileUploadStatus.Error||e.status===t.status&&e.fileName.toLowerCase()>t.fileName.toLowerCase()?1:-1})),e.props.onFileUploadStatusChange(t)},e.uploadDatasetFiles=function(){var t=Object(o.a)(s.a.mark((function t(a){var r,n,o,i,c,u,l;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.datastoreAccessClient||!e.props.datastore){t.next=7;break}if(!e.props.datastore.azureStorageSection||e.props.datastore.azureStorageSection.credential){t.next=6;break}return t.next=4,e.props.authContext.getToken(Object(j.d)());case 4:r=t.sent,e.props.onGetCredentiallessToken(r);case 6:e.datastoreAccessClient=new m.BlobDatastoreAccessClient(e.props.authContext,e.props.workspaceContext,e.props.datastore,r);case 7:if(a.datastore.azureStorageSection&&a.datastore.azureStorageSection.accountName&&a.datastore.azureStorageSection.containerName&&e.datastoreAccessClient){t.next=9;break}return t.abrupt("return");case 9:t.prev=9,e.props.onUploadStatusChange(!0),e.detectFileRemoved(a.files),e.clearFilesErrorState(),n={filesPath:[],datastore:a.datastore},o=0;case 15:if(!(o<a.files.length)){t.next=30;break}return i=a.files[o],c="".concat(a.uploadPath).concat(i.name),t.next=20,e.datastoreAccessClient.uploadFile(c,i,e.getUploadPercentage(i));case 20:if((u=t.sent).status===f.a.Ok){t.next=25;break}throw l=void 0,u.status===f.a.Error&&u.error&&(l=Object(T.a)(u.error,E.b.Data.Common.ErrorTitlePlaceholder,{replaceStorageAuthorizationMessage:!0}),e.props.onRequestError(l)),l;case 25:n.filesPath.push(c),e.getUploadPercentage(i)({fileSize:i.size,bytesUploaded:i.size,status:m.FileUploadStatus.Completed});case 27:o++,t.next=15;break;case 30:e.props.onFileUpload(n),e.props.onUploadStatusChange(!1),t.next=39;break;case 34:throw t.prev=34,t.t0=t.catch(9),e.setFailedFilesState(),e.props.onUploadStatusChange(!1),t.t0;case 39:case"end":return t.stop()}}),t,null,[[9,34]])})));return function(e){return t.apply(this,arguments)}}(),e.validateAndUpload=Object(o.a)(s.a.mark((function t(){var a,n,o,i,c,u,l,d,p;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(j.i)(e.props.datasetRequest),n=e.props.datastore&&e.props.datastore.dataStoreType,o=e.props.datastore&&e.props.datastore.name,t.next=5,A.a.validateAll(a,e.props.datastoreSelectionChoice,o,n,!0);case 5:if(i=t.sent,(c=e.props.files)&&c.length?Array.from(c).forEach((function(e){0===e.size&&(u=E.b.Data.DatasetCreateByUploadPage.FilesSelectionFailure)})):u=E.b.Data.FilesInputControl.Validation.RequiredField,e.props.onError({datastoreSelectionErrors:i||{},fileErrors:u}),!i&&!u){t.next=11;break}return t.abrupt("return",{request:void 0,success:!1});case 11:if(e.props.datasetRequest.general||e.props.datasetRequest.schema||e.props.datasetRequest.columnsToRemove){t.next=19;break}if(d={files:e.props.files||new FileList,uploadPath:e.getUploadPath(a.datastorePath,e.props.uploadPathTimeStampSuffix),datastore:e.props.datastore||{},uploadPathTimeStampSuffix:e.props.uploadPathTimeStampSuffix},!(p=e.getDataPathForDatasetService(d))){t.next=19;break}return l=Object(r.a)(Object(r.a)({},e.props.datasetRequest),{},{dataPath:Object(r.a)(Object(r.a)({},e.props.datasetRequest.dataPath),{},{relativePath:p.relativePath})}),e.props.onChange(l),t.next=19,e.uploadDatasetFiles(d);case 19:return t.abrupt("return",{request:l,success:!0});case 20:case"end":return t.stop()}}),t)}))),e.parse=function(){var t=Object(o.a)(s.a.mark((function t(a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.parseDataset(a);case 2:return r=t.sent,t.abrupt("return",!!r);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validateStep=Object(o.a)(s.a.mark((function t(){var a,n,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.validateAndUpload();case 3:a=t.sent,t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:if(!e.props.skipValidation&&e.props.credentiallessAccessToken&&(n={messageType:h.c.Info,title:E.b.Data.DatasetCreateByUploadPage.CredentiallessRequireSkipValidation.Title,message:E.b.Data.DatasetCreateByUploadPage.CredentiallessRequireSkipValidation.Message},e.props.onRequestError(n),e.props.onSkipValidationCheckboxChange()),e.props.skipValidation||!a.request||e.props.datasetRequest.datasetType!==F.a.datasetTypes().TabularDataset.Enum){t.next=14;break}return t.abrupt("return",e.parse(a.request));case 14:e.props.skipValidation&&(e.props.datasetRequest.sourceProperties||((o=Object(r.a)({},e.props.datasetRequest)).sourceProperties={dataSourceType:w.a.Plain.Name},e.props.onChange(o)));case 15:if(!a.success){t.next=17;break}return t.abrupt("return",!0);case 17:return t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[0,6]])}))),e.getDataPathForDatasetService=function(e){var t={datastoreName:e.datastore.name},a=e.uploadPath;return 1===e.files.length&&(a+=e.files[0].name),t.relativePath=a,t},e.getUploadPath=function(e,t){var a=e.replace(new RegExp("^[/]+"),"");""!==a&&(a=a.replace(new RegExp("[/]+$"),"").concat("/"));var r=a.split(t);return r.length>1&&(a=r[0]),a="".concat(a).concat(t,"/")},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.datasetRequest,r=e.errors,n=e.loading,s=e.validating,o=e.datastoreSelectionChoice,i=Object(j.i)(a),c=r.datastoreSelectionErrors.datastorePath,u=this.props.uploadPathTimeStampSuffix,l=E.b.Data.DatasetCreateByUploadPage.PathPlaceHolder.replace("{uploadPath}",E.b.Data.DatasetCreateByUploadPage.PathField).replace("{timeStamp}",this.props.uploadPathTimeStampSuffix),m=n||this.props.uploadingFiles||s,h=F.a.SupportedDatastoreTypesForDatasetCreateByUpload;this.props.expContext.isEnabled(g.a.AdlsGen2DatastoreBrowsing)||(h=h.filter((function(e){return"AzureDataLakeGen2"!==e})));var f=this.datastoreAccessClient&&this.datastoreAccessClient.getUserAccessToken();return this.unsetWizardErrorState(),P.a.createElement(d.a,{title:t},P.a.createElement(v.a,{className:"datastore-selection-step-pane"},P.a.createElement(C.a,null,P.a.createElement(N.a,{datastore:this.props.datastore,accessToken:f,warnFor:N.b.Upload}),P.a.createElement(p.MessageBar,{messages:this.props.bannerMessages,onDismiss:this.props.bannerMessagesOnDismiss})),P.a.createElement("div",{className:"datastore-selection-upload-step-content"},P.a.createElement("div",{ref:this.choiceGroupContainerRef},P.a.createElement(M.a,{defaultDatastore:this.props.defaultDatastore,workspaceblobstore:this.props.workspaceblobstore,datastore:this.props.datastore,disableDatastoreTypeInNewForm:!1,disableExistingDatastoreField:m,hideSqlDatastoreNotSupportedMessage:!0,datastoreSelectionChoice:o,onDatastoreSelectionChoiceChange:this.onDatastoreSelectionChoiceChange,allowedDatastoreTypes:h,onCancel:this.props.onCancel,onExistingDatastoreChange:this.onExistingDatastoreChange,existingDatastoreName:i.datastoreName,onCreateNewDatastoreSuccess:this.onCreateNewDatastoreSuccess,onCreateNewDatastoreError:this.props.onCreateNewDatastoreError,onDatastoreCreateFormValuesChange:this.props.onDatastoreCreateFormValuesChange,datastoreCreateFormValues:this.props.datastoreCreateFormValues,datasetType:a.datasetType,isValidating:this.props.isValidating,datastoreChoiceErrorMessage:this.props.errors.datastoreSelectionErrors.datastoreName})),P.a.createElement(Y,{errorMessage:r.fileErrors,onFileSelectionChange:this.onFileSelectionChange,fileUploadStatusRows:this.props.fileUploadStatusRows,filesInput:this.filesInput,disabled:m}),P.a.createElement(R,{required:!1,label:E.b.Data.DatasetCreateByUploadPage.PathField,datastorePath:i.userDatastorePath,onChange:this.getOnChangeEvent("userDatastorePath"),errorMessage:c,disabled:m,placeholder:u,suffix:l}),this.props.datasetRequest.datasetType===F.a.datasetTypes().TabularDataset.Enum&&P.a.createElement(X.a,{checked:this.props.skipValidation,onChange:this.onSkipValidationCheckboxChange,disabled:m}))))}},{key:"componentDidMount",value:function(){if(this.shouldSetFocus&&this.choiceGroupContainerRef.current){var e=O.a.findDOMNode(this.choiceGroupContainerRef.current);if(e&&e instanceof Element){var t=e.querySelector("div.previous-datastore-choice-group > label");t&&(t.focus(),this.shouldSetFocus=!1)}}this.props.setValidateCallback(this.validateStep)}},{key:"componentWillUnmount",value:function(){this.props.setValidateCallback(),this.datastoreAccessClient&&this.datastoreAccessClient.dispose()}},{key:"unsetWizardErrorState",value:function(){if(this.props.unsetWizardErrorState){var e=!1;Object.values(this.props.errors.datastoreSelectionErrors).forEach((function(t){e=e||!!t})),(e=e||!!this.props.errors.fileErrors)||this.props.unsetWizardErrorState(x.a.DatastoreSelection)}}},{key:"getOnChangeEvent",value:function(e,t){var a=this;return function(){var n=Object(o.a)(s.a.mark((function n(o){var i,c;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.props.setDatasetRequest((function(t){return Object(j.b)(t,e,o)})),i=a.props.datastore&&a.props.datastore.name,n.next=4,A.a.errorsReducer(a.props.errors.datastoreSelectionErrors,e,o,a.props.datastoreSelectionChoice,i,t);case 4:(c=n.sent)!==a.props.errors.datastoreSelectionErrors&&a.props.onError(Object(r.a)(Object(r.a)({},a.props.errors),{},{datastoreSelectionErrors:c}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}}]),a}(P.a.Component),J=Object(b.a)(Object(D.a)(Object(S.a)(K)))},feRm:function(e,t,a){"use strict";var r=a("XJB9");a.d(t,"a",(function(){return r.a}))},fvIy:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o}));var r="workspaceblobstore",n="workspacefilestore",s={DefaultBlobDatastore:r,DefaultFileDatastore:n,WellKnownDatastores:new Set([r,n]),MaxDataStoreNameLength:255},o=RegExp("^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$")},gc7k:function(e,t,a){"use strict";var r=a("zWVw");a.d(t,"a",(function(){return r.a}))},h2hN:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("VUR1"),n=a("Atrt");function s(e){return Object(r.a)(n.a.reactPlugin,e,e.displayName,"engagement-tracking-container")}},hEKJ:function(e,t,a){"use strict";var r=a("2CWc");a.d(t,"c",(function(){return r.a})),a.d(t,"e",(function(){return r.b})),a.d(t,"f",(function(){return r.c})),a.d(t,"i",(function(){return r.d})),a.d(t,"j",(function(){return r.e}));var n=a("hVC/");a.d(t,"a",(function(){return n.a})),a.d(t,"b",(function(){return n.b})),a.d(t,"d",(function(){return n.c})),a.d(t,"g",(function(){return n.d})),a.d(t,"h",(function(){return n.e}))},"hVC/":function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p}));var r=a("nsO7"),n=a.n(r),s=a("2P7l");function o(e,t){var a=n.a.isNil(t)?void 0:t.find((function(t){return t.id===e}));return a?a.type:void 0}var i=function(e,t){return"Value_IsNull"===e.condition||"Value_IsError"===e.condition?{r:["Invoke",[{r:["Identifier",e.condition]},[{r:["RecordField",[{r:["Identifier","row"]},{r:["Value",e.featureName]}]]}]]]}:t===s.a.Date?{r:["Invoke",[{r:["Identifier",e.condition]},[{r:["RecordField",[{r:["Identifier","row"]},{r:["Value",e.featureName]}]]},{r:["Value",{d:e.value}]}]]]}:{r:["Invoke",[{r:["Identifier",e.condition]},[{r:["RecordField",[{r:["Identifier","row"]},e.featureName]]},e.value]]]}},c=function(e,t,a){return{featureName:e,condition:t,value:1e4*a.getTime()+621355968e9}},u=function(e,t){switch(e.condition){case"Value_Not_Equal":return{r:["Not",i({featureName:e.featureName,condition:"Value_Equals",value:e.value},t)]};case"Value_Is_Not_Null":return{r:["Not",i({featureName:e.featureName,condition:"Value_IsNull",value:e.value})]};case"Value_Is_Not_Error":return{r:["Not",i({featureName:e.featureName,condition:"Value_IsError",value:e.value})]};default:return i(e,t)}},l=function(e,t,a){return{r:[e,[t,a]]}},d=function(e,t,a){if(n.a.isNil(e)||e.length<2||n.a.isNil(t))throw new Error("Attempted to create an invalid condition");var r=u(e[0],o(e[0].featureName,a));return e.forEach((function(e,n){0!==n&&(r=l(t,r,u(e,o(e.featureName,a))))})),{expression:r}},p=function(e,t){return{expression:u(e,t)}}},i89y:function(e,t,a){"use strict";var r=a("a5k3");a.d(t,"a",(function(){return r.a}));var n=a("b6Fk");a.d(t,"b",(function(){return n.a}))},ialG:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("WC4d"),c=a("s+9k"),u=a("WYY7"),l=a("LsED"),d=a("ERkP"),p=a.n(d),m=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e,t=this.props,a=t.storageObj;switch(t.datastoreType){case"AzureMySql":e="Microsoft.DBforMySQL";break;case"AzureSqlDatabase":e="Microsoft.Sql";break;case"AzurePostgreSql":e="Microsoft.DBforPostgreSQL";break;default:e=void 0}var r=a.serverName&&a.endpoint?"".concat(a.serverName,".").concat(a.endpoint):"";if(!a.subscriptionId||!a.resourceGroup||!a.serverName||!e)return p.a.createElement(p.a.Fragment,null,r);var n="".concat(l.a.config.azurePortal,"/#resource/subscriptions/").concat(a.subscriptionId,"/resourceGroups/").concat(a.resourceGroup,"/providers/").concat(e,"/servers/").concat(a.serverName,"/overview");return p.a.createElement(i.a,{href:n,openNewWindow:!0},r," ",p.a.createElement(c.a,{name:u.a.NavigateExternalInline}))}}]),a}(p.a.Component)},imaQ:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return o}));var r,n=a("XpkB");!function(e){e.Http="Http",e.AzureDatastore="AzureDatastore"}(r||(r={}));var s={dataSourceType:r.Http,dataSourceName:n.b.Dataset.DatasetBasicsPage.DataSources.Http.Name},o={dataSourceType:r.AzureDatastore,dataSourceName:n.b.Dataset.DatasetBasicsPage.DataSources.AzureDatastore.Name}},iuUd:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var r=a("kgxj"),n=a("SnOo"),s=a("qnky"),o=a("kjXB"),i=a("KjDR"),c=a("U1a3"),u=a("ERkP"),l=a("d0cs"),d=Object(l.db)({display:"inline-block",verticalAlign:"middle",marginLeft:5}),p=Object(l.db)({position:"absolute",backgroundColor:"transparent",height:240,width:"100%"}),m=Object(l.db)({width:"calc(100% - 25px)",marginBottom:10,paddingTop:16,paddingLeft:8}),h=function(e){var t=u.useContext(o.a),a=u.useMemo((function(){return{base:i.a.getMonacoTheme(t.theme),inherit:!0,colors:{},rules:[]}}),[t.theme]),l=u.createElement(u.Fragment,null,e.headerTitle,u.createElement("div",{className:d},u.createElement(r.CopyIcon,{text:e.sampleCode,hoverTip:n.b.Common_ClickToCopy})));return u.createElement("div",{className:m},u.createElement(s.a,{height:"260px",collapsible:!1,header:l},u.createElement("div",{className:p},u.createElement(c.a,{theme:a,createOptions:{value:e.sampleCode,language:e.language,minimap:{enabled:!1},automaticLayout:!0,renderLineHighlight:"none",scrollBeyondLastLine:!1,showUnused:!1,readOnly:!0,autoIndent:!1,wordWrap:"on",scrollBeyondLastColumn:0,lineNumbers:"on",codeLens:!1,contextmenu:!1,cursorBlinking:"Hidden"}}))))}},jSBj:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("QdS/"),n=a("ERkP"),s=a.n(n),o=a("XpkB"),i=function(e){var t=e.version||"1";return s.a.createElement(r.a,{label:o.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.LatestVersion.Label,value:t,disabled:!0})}},jdtm:function(e,t){},jk8v:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return c}));var r=a("Czhu"),n=a("NiBv"),s=a("lnmi");function o(e,t){}function i(e){return Boolean(e.general&&e.general.sourcePropertiesOverride&&!e.general.sourcePropertiesOverride.dataSourceType||e.sourceProperties&&!e.sourceProperties.dataSourceType&&e.general&&!e.general.sourcePropertiesOverride)}var c={Prepare:function(e,t){var a=Object(s.a)(e,t);return e.datasetType===n.a.datasetTypes().TabularDataset.Enum?Object(r.a)(Object(r.a)({},e),{},{general:Object(r.a)(Object(r.a)({},e.general),{},{properties:a})}):{name:e.name,dataPath:Object(r.a)(Object(r.a)({},e.dataPath),{},{partitionFormat:void 0,partitionFormatIgnoreError:!1}),datasetType:e.datasetType,description:e.description,isVisible:e.isVisible,general:{sourcePropertiesOverride:{delimiter:"n",dataSourceType:"dne"},properties:a},schema:void 0,columnsToRemove:void 0}}}},k4Cn:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("ERkP"),d=a("FABw"),p=a("nmZI"),m=a("kgxj"),h=a("67aH"),f=a("yiDG"),g=a("lSvA"),b=a("oziZ"),D=a("7vdV"),S=a("JywU"),v=a("XpkB"),C=a("J7yX"),y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).storageAccountClient=void 0,r.loadBlobContainers=Object(s.a)(n.a.mark((function e(){var t,a,s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.props.subscriptionId||!r.props.accountName){e.next=7;break}return r.state.loading||r.setState({loading:!0}),t=r.props.accountName.split(":"),e.next=5,r.storageAccountClient.listAllContainers(t[1],r.props.subscriptionId,t[0]);case 5:(a=e.sent).status===h.a.Ok?(s=r.mapBlobContainers(a.data||[]),o={loading:!1,options:s,messages:[]},0===s.length&&(o.messages=[{messageType:f.c.Warning,title:v.b.Datastore.DatastoreEditPage.AzureBlob.ContainerField.NoContainersTitle,message:v.b.Datastore.DatastoreEditPage.AzureBlob.ContainerField.NoContainersMessage}]),r.setState(o)):(a.status===h.a.Error&&r.props.messageContext.addMessage(S.a.addErrorCodeAndIsUserError("AzureContainersField LoadBlobContainers",Object(C.a)(a.error,v.b.Data.Common.ErrorTitlePlaceholder))),r.setState({loading:!1}));case 7:case"end":return e.stop()}}),e)}))),r.storageAccountClient=new g.a(r.props.authContext),r.state={loading:!1,options:[],messages:[]},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadBlobContainers()}},{key:"componentWillUnmount",value:function(){this.storageAccountClient.dispose()}},{key:"componentDidUpdate",value:function(e,t){e.subscriptionId===this.props.subscriptionId&&e.accountName===this.props.accountName||this.loadBlobContainers()}},{key:"render",value:function(){return this.state.loading?l.createElement(d.a,null):l.createElement(l.Fragment,null,l.createElement(p.a,{name:"storageServiceName",label:this.props.label,required:!0,options:this.state.options,multiSelect:!1,disabled:this.props.disabled}),l.createElement(m.MessageBar,{messages:this.state.messages}))}},{key:"mapBlobContainers",value:function(e){return e.map((function(e){return{key:e.name||"",text:e.name||"",ariaLabel:e.name||""}}))}}]),a}(l.Component),P=Object(b.a)(Object(D.a)(y))},kSZ9:function(e,t,a){"use strict";a.d(t,"a",(function(){return r.a})),a.d(t,"b",(function(){return n.a})),a.d(t,"h",(function(){return s.b})),a.d(t,"c",(function(){return s.a})),a.d(t,"f",(function(){return o.a})),a.d(t,"d",(function(){return i.a})),a.d(t,"g",(function(){return c.b})),a.d(t,"e",(function(){return c.a}));var r=a("/ZmK"),n=a("TSkZ"),s=a("8W3t"),o=a("TUpj"),i=a("V4Kj"),c=a("5ciz")},kXcn:function(e,t,a){"use strict";a.d(t,"c",(function(){return g})),a.d(t,"b",(function(){return b})),a.d(t,"a",(function(){return D}));var r=a("VtSi"),n=a.n(r),s=a("zjfJ"),o=a("Czhu"),i=a("QsI/"),c=a("9fIP"),u=a("MMYH"),l=a("1vim"),d=a("67aH"),p=a("3nK6"),m=a("NiBv"),h=a("XpkB"),f=a("Y9LQ");function g(e){return"".concat(e).match(/\s+$/)?h.b.Data.Common.Validation.DatasetNoTrailingWhitespace:void 0}function b(e){return"".concat(e).match(/^\s+/)?h.b.Data.Common.Validation.DatasetNoLeadingWhitespace:void 0}var D=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,null,[{key:"errorsReducer",value:function(){var e=Object(i.a)(n.a.mark((function e(t,a,r,i,c){var u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validateField(a,r,i,c);case 2:if(u=e.sent,t[a]!==u){e.next=5;break}return e.abrupt("return",t);case 5:return e.abrupt("return",Object(o.a)(Object(o.a)({},t),{},Object(s.a)({},a,u)));case 6:case"end":return e.stop()}}),e,this)})));return function(t,a,r,n,s){return e.apply(this,arguments)}}()},{key:"validateAll",value:function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var s,o,c=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},o=!1,e.next=4,Promise.all(Object.keys(t).map(function(){var e=Object(i.a)(n.a.mark((function e(i){var u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.validateField(i,t[i],a,r);case 2:u=e.sent,s[i]=u,o=o||!!u;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return e.abrupt("return",o?s:void 0);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"validateHttpWebUrl",value:function(e){var t=h.b.Data.DatasetCreateFromWebUrl,a=l.a.isRequired(e,f.a.getFieldError("FieldIsRequired",t.Steps.BasicInfo.Fields.HttpUrl.Label));return a||(a=l.a.matchesRegEx(e,p.a.Regex.uri,h.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Validation.WebUrlCharacters.replace("{httpUrl}",h.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Fields.HttpUrl.Label)))}},{key:"validateField",value:function(){var t=Object(i.a)(n.a.mark((function t(a,r,s,o){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=a,t.next="datasetName"===t.t0?3:"datasetType"===t.t0?4:5;break;case 3:return t.abrupt("return",e.datasetName(r,s,o));case 4:return t.abrupt("return",e.datasetType(r));case 5:return t.abrupt("return",void 0);case 6:case"end":return t.stop()}}),t)})));return function(e,a,r,n){return t.apply(this,arguments)}}()},{key:"datasetType",value:function(t){var a=l.a.isRequired(t,e.errorMessages.datasetTypeIsRequired);if(a)return a}},{key:"datasetName",value:function(){var t=Object(i.a)(n.a.mark((function t(a,r,s){var o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==(o=l.a.isRequired(a,e.errorMessages.datasetNameIsRequired)||l.a.withinLengthRange(a,0,m.a.MaxDatasetNameLength,e.errorMessages.datasetNameMaxLength))||s){t.next=8;break}if(t.t0=b(a)||g(a),t.t0){t.next=7;break}return t.next=6,this.datasetExists(a,r,e.errorMessages.datasetExists);case 6:t.t0=t.sent;case 7:o=t.t0;case 8:return t.abrupt("return",o);case 9:case"end":return t.stop()}}),t,this)})));return function(e,a,r){return t.apply(this,arguments)}}()},{key:"datasetExists",value:function(){var e=Object(i.a)(n.a.mark((function e(t,a,r){var s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.exists(t);case 2:return o=e.sent,s=o.status===d.a.Ok&&o.data&&o.data.body,e.abrupt("return",s?r:void 0);case 5:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}()},{key:"errorMessages",get:function(){return{datasetNameIsRequired:f.a.getFieldError("FieldIsRequired",h.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Name.Label),datasetNameMaxLength:f.a.getErrorMessage("FieldMaxLength",{fieldName:h.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Name.Label,maxLength:m.a.MaxDatasetNameLength}),datasetExists:f.a.getFieldError("DatasetExists",h.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Name.Label),datasetTypeIsRequired:f.a.getFieldError("FieldIsRequired",h.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.DatasetType.Label)}}}]),e}()},klJQ:function(e,t,a){"use strict";a.d(t,"a",(function(){return G}));var r=a("Czhu"),n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("2h71"),c=a("9fIP"),u=a("MMYH"),l=a("8K1b"),d=a("AqVP"),p=a("YFUp"),m=a("1khS"),h=a("+W+I"),f=a("WC4d"),g=a("uG5m"),b=a("GGXT"),D=a("V4bT"),S=a("67aH"),v=a("yiDG"),C=a("7vdV"),y=a("plz7"),P=a("D0BB"),k=a("oziZ"),O=a("nsO7"),F=a("ctLR"),E=a("N8RY"),T=a("7RgY"),w=a("3LKS"),j=a("+U0a"),x=a("uMNk"),N=a("ERkP"),M=a.n(N),A=a("JywU"),I=a("J7yX"),R=a("yjIu"),B=a("XpkB"),q=a("D+ST"),z=a("Mrdb"),L=function(e,t){var a,r,n=null===(a=t.latest)||void 0===a||null===(r=a.createdBy)||void 0===r?void 0:r.userName;return M.a.createElement(p.a,{userName:n,tooltip:n})},V=function(e,t){var a,r,n,s,o=(null===(a=t.latest)||void 0===a||null===(r=a.dataPath)||void 0===r?void 0:r.relativePath)||(null===(n=t.latest)||void 0===n||null===(s=n.dataPath)||void 0===s?void 0:s.httpUrl);return M.a.createElement(M.a.Fragment,null,o||"--")},U=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).datasetClient=void 0,n.pendingWork=void 0,n.getColumns=function(){var e,t,r=[{header:B.b.Data.DatasetSelectOrCreate.ColumnNames.Name,field:"name",render:n.renderPreviewLink},{header:B.b.Data.DatasetSelectOrCreate.ColumnNames.Type,field:"datasetType",render:n.renderDataSetType}],s=Object(i.a)(null!==(e=n.props.additionalColumns)&&void 0!==e?e:a.defaultAdditionalColumns);try{for(s.s();!(t=s.n()).done;){switch(t.value){case"createdTime":r.push({header:B.b.Data.DatasetSelectOrCreate.ColumnNames.CreatedTime,field:"createdTime"});break;case"modifiedTime":r.push({header:B.b.Data.DatasetSelectOrCreate.ColumnNames.ModifiedTime,field:"modifiedTime"});break;case"createdBy":r.push({header:B.b.Data.DatasetSelectOrCreate.ColumnNames.CreatedBy,field:"name",render:L});break;case"relativePath":r.push({header:B.b.Data.DatasetSelectOrCreate.ColumnNames.RelativePath,field:"name",render:V})}}}catch(o){s.e(o)}finally{s.f()}return r},n.getData=Object(o.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isDataLoaded:!1}),e.next=3,n.datasetClient.listDatasets();case 3:(t=e.sent).data?n.setState({allDatasets:t.data,isDataLoaded:!0,isDisplayingSupportedDatasetsOnly:!0}):(n.setState({allDatasets:[],isDataLoaded:!0,isDisplayingSupportedDatasetsOnly:!0}),t.status===S.a.Error&&(t.error?n.props.messageContext.addMessage(A.a.addErrorCodeAndIsUserError("DatasetSelectOrCreate GetData",Object(I.a)(t.error,B.b.Data.Common.ErrorTitlePlaceholder),["UserError"])):(a=A.a.addErrorCodeAndIsUserError("DatasetSelectOrCreate GetData",{title:B.b.Data.DatasetSelectOrCreate.DefaultError.Title,messageType:v.c.Error,message:B.b.Data.DatasetSelectOrCreate.DefaultError.Message},["Error"]),n.props.messageContext.addMessage(a))));case 5:case"end":return e.stop()}}),e)}))),n.onNewDatasetCreated=function(e){n.props.onNewDatasetCreated&&n.props.onNewDatasetCreated(e),n.getData()},n.renderDataSetType=function(e,t){switch(t.datasetType){case"tabular":return B.b.Data.DatasetSelectOrCreate.DatasetTypes.Tabular;case"file":return B.b.Data.DatasetSelectOrCreate.DatasetTypes.File;default:return B.b.Data.DatasetSelectOrCreate.DatasetTypes.Tabular}},n.getUseableDatasetsToggleProps=function(){return[Object(r.a)({},Object(m.b)()),{key:"toggleDatasets",onRender:function(e){return M.a.createElement(h.a,{checked:n.state.isDisplayingSupportedDatasetsOnly,onChange:n.setDataset,onText:B.b.Data.DatasetSelectOrCreate.Toggle.Text,offText:B.b.Data.DatasetSelectOrCreate.Toggle.Text,styles:{root:{margin:e.renderedInOverflow?"5px":"auto"}}})}}]},n.setDataset=function(){var e=n.state.isDisplayingSupportedDatasetsOnly;n.setState({isDisplayingSupportedDatasetsOnly:!e})},n.renderPreviewLink=function(e,t){var a=n.props.datasetPreview?M.a.createElement(f.a,{onClick:function(){n.setState({previewDataSet:t})},"data-automation-id":"datasetLink"},e):M.a.createElement(F.a,null,e);return n.props.datasetSupportedFilter(t)?a:M.a.createElement(M.a.Fragment,null,a," ".concat(B.b.Data.DatasetSelectOrCreate.DatasetNotSupported),n.props.showUnsupportedDatasetTooltip&&M.a.createElement(g.a,{buttonType:b.b.Action,tooltip:B.b.Data.DatasetSelectOrCreate.UnsupportedDatasetTooltip,ariaLabel:B.b.Data.DatasetSelectOrCreate.UnsupportedDatasetTooltip,iconName:"Info",style:{height:"16px"},directionalHint:E.a.rightCenter}))},n.closePreview=function(){n.setState({previewDataSet:void 0})},n.onOptionsSelection=function(e){e&&e[0]?n.props.onDatasetSelected(e[0]):n.props.onDatasetSelected(void 0)},n.renderHeader=function(e){var t=e?Object(O.merge)(e.selection,{toggleAllSelected:function(){}}):void 0,a=n.props.datasetPreview?T.a.visible:T.a.none;return M.a.createElement(w.a,Object.assign({},e,{layoutMode:j.e.justified,ariaLabelForSelectAllCheckbox:void 0,onRenderDetailsCheckbox:function(){return M.a.createElement(M.a.Fragment,null)},selectAllVisibility:a,selection:t}))},n.datasetClient=new q.a(n.props.authContext,n.props.workspaceContext),n.state={isDisplayingSupportedDatasetsOnly:!0,allDatasets:[],previewDataSet:void 0,isDataLoaded:!1},n.pendingWork=e.scenarioContext.registerPendingWork("LoadDatasetSelectOrCreate"),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentDidUpdate",value:function(){this.state.isDataLoaded&&this.pendingWork.complete()}},{key:"componentWillUnmount",value:function(){this.datasetClient.dispose()}},{key:"render",value:function(){var e=this,t=this.props.datasetPreview,a={overflowX:"hidden"},r=this.props.datasetPreview?j.a.always:j.a.hidden;return M.a.createElement(M.a.Fragment,null,this.props.children,M.a.createElement(z.a,Object.assign({disableTypeSelection:this.props.disableTypeSelection,onDatasetCreated:this.onNewDatasetCreated},this.props),(function(t){return M.a.createElement(D.a,{commandItems:t(e.getUseableDatasetsToggleProps(),0),enableShimmer:!e.state.isDataLoaded,initialFocusedIndex:0,isLoading:!e.state.isDataLoaded,columns:e.getColumns(),noResourcesName:B.b.Data.DatasetSelectOrCreate.ResourceName,checkboxVisibility:r,items:e.getCurrentlyVisibleDatasets(),selectionMode:x.c.single,onSelect:e.onOptionsSelection,canSelectItem:e.props.datasetSupportedFilter,renderHeader:e.renderHeader,styles:{root:a}})})),this.state.previewDataSet&&t&&M.a.createElement(t,{dataset:this.state.previewDataSet,onClose:this.closePreview}))}},{key:"getCurrentlyVisibleDatasets",value:function(){return this.state.isDisplayingSupportedDatasetsOnly?this.state.allDatasets.filter(this.props.datasetSupportedFilter):this.state.allDatasets}}]),a}(M.a.Component);U.defaultAdditionalColumns=["createdTime","modifiedTime"];var W=Object(C.a)(Object(y.a)("DatasetSelectOrCreate.Load",U,R.a)),G=Object(P.a)(Object(k.a)(W))},"le+F":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("XpkB"),c=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,null,[{key:"ASCII",get:function(){return new a("ASCII",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Encoding.ASCII)}},{key:"ISO",get:function(){return new a("ISO88591",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Encoding.ISO)}},{key:"Latin",get:function(){return new a("LATIN1",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Encoding.Latin)}},{key:"UTF8",get:function(){return new a("UTF8",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Encoding.UTF8)}},{key:"UTF8Bom",get:function(){return new a("UTF8BOM",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Encoding.UTF8Bom)}},{key:"UTF16",get:function(){return new a("UTF16",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Encoding.UTF16)}},{key:"UTF32",get:function(){return new a("UTF32",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Encoding.UTF32)}},{key:"Windows",get:function(){return new a("WINDOWS1252",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.Encoding.Windows)}},{key:"DefaultSelection",get:function(){return a.UTF8}},{key:"All",get:function(){return[a.ASCII,a.ISO,a.Latin,a.UTF8,a.UTF8Bom,a.UTF16,a.UTF32,a.Windows]}}]),a}(a("WTLv").a)},lnmi:function(e,t,a){"use strict";a.d(t,"d",(function(){return D})),a.d(t,"f",(function(){return S})),a.d(t,"c",(function(){return v})),a.d(t,"e",(function(){return C})),a.d(t,"a",(function(){return y})),a.d(t,"g",(function(){return P})),a.d(t,"b",(function(){return F}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("Czhu"),i=a("zygG"),c=a("9fIP"),u=a("XpkB");function l(){return{"_TimeSeries_Column:FineGrainTimestamp_":{Label:u.b.DatasetTraits.TimeSeriesFineGrain,isTimeseries:!0},"_TimeSeries_Column:CoarseGrainTimestamp_":{Label:u.b.DatasetTraits.TimeSeriesCoarseGrain,isTimeseries:!0},"_Label_Column:Label_":{Label:u.b.DatasetTraits.Labeled,isTimeseries:!1}}}var d=function e(t){var a=this;Object(c.a)(this,e),this.exclusionTraitSet=void 0,this.validate=function(){var e=Object(s.a)(n.a.mark((function e(t,r){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],r.forEach((function(e){if(e.columnName===t.columnName&&a.exclusionTraitSet.has(e.traitType)){var r=[l()[e.traitType].Label.ColumnsLabel,l()[t.traitType].Label.ColumnsLabel].sort();s.push(u.b.DatasetTraits.Error.MutualExclusionError.replace("{columnName}",e.columnName).replace("{trait1}",r[0]).replace("{trait2}",r[1]))}})),e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.exclusionTraitSet=new Set(t)},p=function e(t){var a=this;Object(c.a)(this,e),this.prerequisiteTraits=void 0,this.validate=function(){var e=Object(s.a)(n.a.mark((function e(t,r){var s,o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],o=new Set,r.forEach((function(e){o.add(e.traitType)})),a.prerequisiteTraits.forEach((function(e){o.has(e)||s.push(u.b.DatasetTraits.Error.PrerequisiteRuleError.replace("{preTrait}",l()[e].Label.ColumnsLabel).replace("{currTrait}",l()[t.traitType].Label.ColumnsLabel))})),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),this.prerequisiteTraits=t},m=function e(){Object(c.a)(this,e),this.validate=function(){var e=Object(s.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a.forEach((function(e){e.traitType===t.traitType&&r.push(u.b.DatasetTraits.Error.SingleOnlyRuleError.replace("{sameTrait}",l()[e.traitType].Label.ColumnsLabel))})),e.abrupt("return",r);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},h=a("8yP9"),f=function e(t){var a=this;Object(c.a)(this,e),this.traitRules=void 0,this.columnName=void 0,this.isActive=void 0,this.traitType=void 0,this.validate=function(){var e=Object(s.a)(n.a.mark((function e(t){var r,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],o=t.filter((function(e){return a!==e})),i=a.traitRules.map(function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.validate(a,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(i);case 5:return e.sent.forEach((function(e){e.forEach((function(e){r.push(e)}))})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.columnName=t,this.isActive=!0,this.traitType=h.a.CoarseGrainTimestamp;var r=new d([h.a.FineGrainTimestamp]),o=new p([h.a.FineGrainTimestamp]);this.traitRules=[r,new m,o]},g=function e(t){var a=this;Object(c.a)(this,e),this.traitRules=void 0,this.columnName=void 0,this.isActive=void 0,this.traitType=void 0,this.validate=function(){var e=Object(s.a)(n.a.mark((function e(t){var r,o,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],o=t.filter((function(e){return a!==e})),i=a.traitRules.map(function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.validate(a,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=5,Promise.all(i);case 5:return e.sent.forEach((function(e){e.forEach((function(e){r.push(e)}))})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.columnName=t,this.isActive=!0;var r=new d([h.a.CoarseGrainTimestamp]);this.traitType=h.a.FineGrainTimestamp,this.traitRules=[r,new m]},b=function(e){return Object.keys(l()).includes(e)};function D(e){var t=[];if(e.latest&&e.latest.properties)for(var a=0,r=Object.entries(e.latest.properties);a<r.length;a++){var n=Object(i.a)(r[a],1)[0];b(n)&&t.push(l()[n].Label.DatasetLabel)}return Array.from(new Set(t))}function S(e,t){return!(!e.latest||!e.latest.properties)&&Object.keys(e.latest.properties).some((function(e){return e===t}))}function v(e,t){var a=[];if(e.latest&&e.latest.properties)for(var r=0,n=Object.entries(e.latest.properties);r<n.length;r++){var s=Object(i.a)(n[r],2),o=s[0],c=s[1];O(o)&&t.id&&c===t.id&&b(o)&&a.push(l()[o].Label.ColumnsLabel)}return Array.from(new Set(a))}function C(e){var t=[];if(e)for(var a=0,r=Object.entries(e);a<r.length;a++){var n=Object(i.a)(r[a],2),s=n[0],o=n[1];b(s)&&l()[s].isTimeseries&&t.push(o)}return Array.from(new Set(t))}function y(e,t){var a={};return e.general&&(a=Object(o.a)({},e.general.properties||[]),t.forEach((function(e,t){if(e.isActive){var r=t.split("=>"),n=Object(i.a)(r,2),s=n[0],o=n[1];a[s]=o}}))),a}function P(e){return k.apply(this,arguments)}function k(){return(k=Object(s.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],r=t.map(function(){var e=Object(s.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.validate(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(r);case 4:return e.sent.forEach((function(e){e.forEach((function(e){a.push(e)}))})),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){var t=e.split(":")[0].split("_");return"Column"===Object(i.a)(t,3)[2]}function F(e,t){switch(e){case h.a.FineGrainTimestamp:return new g(t);case h.a.CoarseGrainTimestamp:return new f(t);default:return}}},lwe2:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("XpkB"),c=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,null,[{key:"String",get:function(){return new a("String",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.String)}},{key:"Boolean",get:function(){return new a("Boolean",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.Boolean)}},{key:"Integer",get:function(){return new a("Integer",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.Integer)}},{key:"Decimal",get:function(){return new a("Decimal",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.Decimal)}},{key:"Date",get:function(){return new a("Date",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.Date)}},{key:"Unknown",get:function(){return new a("Unknown",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.Unknown)}},{key:"Error",get:function(){return new a("Error",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.Error)}},{key:"Null",get:function(){return new a("Null",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.Null)}},{key:"DataRow",get:function(){return new a("DataRow",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.DataRow)}},{key:"List",get:function(){return new a("List",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.List)}},{key:"Stream",get:function(){return new a("Stream",i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Options.ColumnType.Stream)}},{key:"All",get:function(){return[a.String,a.Boolean,a.Integer,a.Decimal,a.Date,a.Unknown,a.Null,a.DataRow,a.List,a.Stream,a.Error]}},{key:"DefaultSelection",get:function(){return a.String}},{key:"VisibleToTheUser",get:function(){return[a.String,a.Boolean,a.Integer,a.Decimal,a.Date]}}]),a}(a("WTLv").a)},m7Gs:function(e,t,a){"use strict";a.d(t,"a",(function(){return T}));var r=a("VtSi"),n=a.n(r),s=a("Czhu"),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("Daup"),p=a("k0yv"),m=a("kgxj"),h=a("ERkP"),f=a.n(h),g=a("NiBv"),b=a("60PN"),D=a("QlF2"),S=a("CNWI"),v=a("Q7Ad"),C=a("kXcn"),y=a("0qJz"),P=a("Y2j4"),k=a("QdRb"),O=a("QdS/"),F=a("XpkB"),E=function(e){return f.a.createElement(O.a,{label:F.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Fields.HttpUrl.Label,placeholder:F.b.Data.DatasetCreateFromWebUrl.Steps.BasicInfo.Fields.HttpUrl.Placeholder,required:!0,value:e.httpUrl,onChange:e.onChange,errorMessage:e.errorMessage,disabled:e.disabled,readOnly:e.readOnly,multiline:!0,autoFocus:!0})},T=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(e=t.call.apply(t,[this].concat(c))).onSkipValidationCheckboxChange=function(){e.props.onSkipValidationCheckboxChange()},e.onHttpUrlChange=function(t){var a=t.target.value,r=C.a.validateHttpWebUrl(a);e.props.onHttpUrlChange(a,r)},e.validateStep=Object(o.a)(n.a.mark((function t(){var a,r,o,i,c;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(D.h)(e.props.datasetRequest),r=e.props.datasetRequest.dataPath?e.props.datasetRequest.dataPath.httpUrl:"",t.next=4,C.a.validateAll(a,e.props.datasetClient,!!e.props.datasetName);case 4:if(o=t.sent,i=C.a.validateHttpWebUrl(r),e.props.onError({basicErrors:o||{},httpUrlError:i}),!o&&!i){t.next=9;break}return t.abrupt("return",!1);case 9:if(!e.shouldParse()){t.next=17;break}return t.next=12,e.props.parseDataset(e.props.datasetRequest);case 12:if(t.sent){t.next=15;break}return t.abrupt("return",!1);case 15:t.next=18;break;case 17:e.props.skipValidation&&(e.props.datasetRequest.sourceProperties||((c=Object(s.a)({},e.props.datasetRequest)).sourceProperties={dataSourceType:b.a.Plain.Name},e.props.onChange(c)));case 18:return t.abrupt("return",!0);case 19:case"end":return t.stop()}}),t)}))),e.shouldParse=function(){return e.props.isSchemaUpdate||!e.props.skipValidation&&e.props.datasetRequest.datasetType===g.a.datasetTypes().TabularDataset.Enum&&!e.props.datasetRequest.general&&!e.props.datasetRequest.schema&&!e.props.datasetRequest.columnsToRemove},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.bannerMessages,a=e.bannerMessagesOnDismiss,r=e.title,n=e.datasetName,s=e.datasetRequest,o=e.datasetVersion,i=e.disableTypeSelection,c=e.errors,u=e.loading,l=e.isSchemaUpdate,h=e.disableWebUrl,b=e.skipValidation,v=s.dataPath&&s.dataPath.httpUrl||"",C=Object(D.h)(s),P=u||!!i;return this.unsetWizardErrorState(),f.a.createElement("div",{className:"basic-info-step-from-web-url"},f.a.createElement(d.a,null),f.a.createElement(p.a,{title:r},f.a.createElement(m.MessageBar,{messages:t,onDismiss:a}),f.a.createElement(E,{httpUrl:v,onChange:this.onHttpUrlChange,readOnly:u||h,disabled:u||h,errorMessage:c.httpUrlError}),this.renderName(C,n,o),f.a.createElement(k.a,{selectedType:C.datasetType,onChange:this.getOnChangeEvent("datasetType"),errorMessage:c.basicErrors.datasetType,disabled:P}),f.a.createElement(y.a,{description:C.datasetDescription,onChange:this.getOnChangeEvent("datasetDescription"),errorMessage:c.basicErrors.datasetDescription,disabled:u,autoAdjustHeight:!0}),s.datasetType===g.a.datasetTypes().TabularDataset.Enum&&f.a.createElement(S.a,{hidden:l,checked:b,disabled:u,onChange:this.onSkipValidationCheckboxChange})))}},{key:"componentDidMount",value:function(){this.props.setValidateCallback(this.validateStep)}},{key:"componentWillUnmount",value:function(){this.props.setValidateCallback()}},{key:"unsetWizardErrorState",value:function(){if(this.props.unsetWizardErrorState){var e=!1;Object.values(this.props.errors.basicErrors).forEach((function(t){e=e||!!t})),(e=e||!!this.props.errors.httpUrlError)||this.props.unsetWizardErrorState(v.a.BasicInfo)}}},{key:"renderName",value:function(e,t,a){var r=this.props.loading||Boolean(t&&a),n=t||e.datasetName,s=a?"".concat(+a+1):"1";return f.a.createElement(P.a,{datasetName:n,datasetVersion:s,errorMessage:this.props.errors.basicErrors.datasetName,onNameChange:this.getOnChangeEvent("datasetName"),disabled:r})}},{key:"getOnChangeEvent",value:function(e){var t=this;return function(){var a=Object(o.a)(n.a.mark((function a(r){var o;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.props.setDatasetRequest((function(t){return Object(D.a)(t,e,r)})),a.next=3,C.a.errorsReducer(t.props.errors.basicErrors,e,r,t.props.datasetClient,!t.props.datasetName);case 3:(o=a.sent)!==t.props.errors.basicErrors&&t.props.onError(Object(s.a)(Object(s.a)({},t.props.errors),{},{basicErrors:o}));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}]),a}(f.a.Component)},mGHB:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return l})),a.d(t,"f",(function(){return d}));var r=a("tSJw"),n=a("XpkB");function s(e,t){var a=e.name||"";return a+=" (".concat(o(e.dataStoreType),")"),t&&t.name===e.name&&(a+=" (".concat(n.b.Data.Common.Default,")")),a}function o(e){if(!e)return"";switch(e){case"AzureBlob":return n.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options.AzureBlob;case"AzureDataLake":return n.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options.AzureDataLake;case"AzureDataLakeGen2":return n.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options.AzureDataLakeGen2;case"AzureFile":return n.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options.AzureFile;case"AzureMySql":return n.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options.AzureMySql;case"AzurePostgreSql":return n.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options.AzurePostgreSql;case"AzureSqlDatabase":return n.b.Datastore.DatastoreEditPage.CommonFields.DatastoreType.Options.AzureSqlDatabase;default:return e}}function i(e){var t=e.azureStorageSection;if(!t)return"";var a="";switch(e.dataStoreType){case"AzureBlob":t.protocol&&t.accountName&&t.endpoint&&t.containerName&&(a="".concat(t.protocol,"://").concat(t.accountName,".blob.").concat(t.endpoint,"/").concat(t.containerName));break;case"AzureDataLakeGen2":t.protocol&&t.accountName&&t.endpoint&&t.containerName&&(a="".concat(t.protocol,"://").concat(t.accountName,".dfs.").concat(t.endpoint,"/").concat(t.containerName));break;case"AzureFile":t.protocol&&t.accountName&&t.endpoint&&t.containerName&&(a="".concat(t.protocol,"://").concat(t.accountName,".file.").concat(t.endpoint,"/").concat(t.containerName))}return a}function c(e){return"AzureBlob"===e||"AzureDataLake"===e||"AzureSqlDatabase"===e||"AzureDataLakeGen2"===e}function u(e,t){var a;switch(e.dataStoreType){case"AzureBlob":return!0;case"AzureDataLakeGen2":return t.isEnabled(r.a.AdlsGen2DatastoreBrowsing)&&"None"===(null===(a=e.azureStorageSection)||void 0===a?void 0:a.credentialType);default:return!1}}function l(e){var t;switch(e.dataStoreType){case"AzureBlob":return"None"===(null===(t=e.azureStorageSection)||void 0===t?void 0:t.credentialType);default:return!1}}function d(e){switch(e){case"AzureBlob":case"AzureDataLake":case"AzureDataLakeGen2":case"AzureFile":case"AzurePostgreSql":case"AzureSqlDatabase":return!0;default:return!1}}},mWHq:function(e,t,a){"use strict";a.d(t,"a",(function(){return ee}));var r=a("zygG"),n=a("fGyu"),s=a("zjfJ"),o=a("Czhu"),i=a("VtSi"),c=a.n(i),u=a("QsI/"),l=a("9fIP"),d=a("MMYH"),p=a("8K1b"),m=a("AqVP"),h=a("kgxj"),f=a("67aH"),g=a("1eWE"),b=a("yiDG"),D=a("jeyl"),S=a("LuYi"),v=a("sOq8"),C=a("Ippe"),y=a("zQeN"),P=a("oziZ"),k=a("fGUH"),O=a("D0BB"),F=a("7vdV"),E=a("/YEa"),T=a("fTZT"),w=a("47ii"),j=a("wgY5"),x=a.n(j),N=a("ERkP"),M=a.n(N),A=a("JywU"),I=a("NiBv"),R=a("fvIy"),B=a("yjIu"),q=a("XpkB"),z=a("D+ST"),L=a("J7yX"),V=a("poBQ"),U=a("60PN"),W=a("jk8v"),G=a("1wVX"),H=a("QlF2"),Q=a("Q7Ad"),_=a("VvDS"),Y=a("fEBu"),X=a("CPUY"),K=a("b6Fk"),J=a("/zZg"),Z=a("DHBr"),$=(a("gyse"),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var r,i;Object(l.a)(this,a),(i=t.call(this,e)).validateBasicInfoStep=void 0,i.validateSettingsStep=void 0,i.validateSchemaStep=void 0,i.validateDatastoreSelectionStep=void 0,i.datasetsClient=void 0,i.datastoreClient=void 0,i.telemetryProps=void 0,i.datastoreCreateFormValues=void 0,i.wizardRef=M.a.createRef(),i.errorManager=void 0,i.dismissMessage=function(e){i.setState((function(t){return{errorMessages:t.errorMessages.filter((function(t){return t!==e})),datasetTraitFailureMessages:t.datasetTraitFailureMessages.filter((function(t){return t!==e})),datastoreCreateErrors:t.datastoreCreateErrors.filter((function(t){return t!==e}))}}))},i.getDefaultDatastoreOrUndefined=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.state.defaultDatastore){e.next=2;break}return e.abrupt("return",i.state.defaultDatastore);case 2:return e.next=4,i.datastoreClient.getDefault(!0,!1);case 4:return e.sent.serviceResponses.subscribe((function(e){t=e.status===f.a.Ok&&e.data?e.data:void 0})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),i.getWorkspaceBlobStoreOrUndefined=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.state.workspaceblobstore){e.next=2;break}return e.abrupt("return",i.state.workspaceblobstore);case 2:return e.next=4,i.datastoreClient.getWorkspaceBlobStore(!0,!0);case 4:return e.sent.serviceResponses.subscribe((function(e){t=e.status===f.a.Ok&&e.data?e.data:void 0})),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)}))),i.tabularDatasetWizardChildren=function(){return[i.basicInfoStep(),i.datastoreSelectionFromUploadStep(),i.settingsAndPreviewStep(),i.schemaStep(),i.verificationStep()]},i.fileDatasetWizardChildren=function(){return[i.basicInfoStep(),i.datastoreSelectionFromUploadStep(),i.verificationStep()]},i.onDatastoreLoading=function(){i.setState({loadingDatastore:!0})},i.onDatastoreLoaded=function(){i.setState({loadingDatastore:!1})},i.onDatastoreSelected=function(e){if(e){var t=e?e.dataStoreType:void 0;i.setState({datastore:e,datastoreType:t,datastoreSelectionChoice:J.b.Selected})}},i.onDatastoreCreateFormValuesChange=function(e){i.datastoreCreateFormValues=e},i.onCreateNewDatastoreSuccess=function(){i.setState({datastoreSelectionChoice:J.b.Selected,datastoreCreateErrors:[]}),i.datastoreCreateFormValues=void 0},i.onCreateNewDatastoreError=function(e){i.setState((function(t){return{datastoreCreateErrors:t.datastoreCreateErrors.concat(e)}}))},i.onDatastoreSelectionChoiceChange=function(e){e&&i.setState({datastoreSelectionChoice:e})},i.unsetWizardErrorState=function(e){i.setState((function(t){return t.stepState[e]===h.WizardStepState.Error?Object(o.a)(Object(o.a)({},t),{},{stepState:Object(o.a)(Object(o.a)({},t.stepState),{},Object(s.a)({},e,h.WizardStepState.CurrentStep))}):null}))},i.onSkipValidationCheckboxChange=function(){i.setState((function(e){return{skipValidation:!e.skipValidation}}))},i.onProfileCheckboxChange=function(){i.setState((function(e){return{generateProfileAfterCreation:!e.generateProfileAfterCreation}}))},i.basicInfoError=function(e){i.setState((function(t){return{errors:Object(o.a)(Object(o.a)({},t.errors),{},Object(s.a)({},Q.a.BasicInfo,e))}}))},i.datastoreSelectionStepError=function(e){i.setState((function(t){return{errors:Object(o.a)(Object(o.a)({},t.errors),{},Object(s.a)({},Q.a.DatastoreSelection,e))}}))},i.datasetTraitChanged=function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.validateSchemaStep,!e.t0){e.next=5;break}return e.next=4,i.validateSchemaStep();case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}i.setState((function(e){return{stepState:Object(o.a)(Object(o.a)({},e.stepState),{},Object(s.a)({},t,h.WizardStepState.Error))}}));case 7:i.setState((function(e){return{traitChangeToggle:!e.traitChangeToggle}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.setDatasetRequest=function(e){i.setState((function(t){var a=e(t.datasetRequest);return a===t.datasetRequest?null:{datasetRequest:a}}))},i.onFileSelectionChange=function(e){!e||e.length<1||i.setState((function(t){var a=Object(o.a)({},t.errors.DatastoreSelection);a.fileErrors=void 0,Array.from(e).some((function(e){return 0===e.size}))&&(a.fileErrors=q.b.Data.DatasetCreateByUploadPage.FilesSelectionFailure);var r=Object(o.a)({},t.datasetRequest),n=t.uploadPathTimeStampSuffix;if(r.dataPath&&r.dataPath.relativePath){var i=r.dataPath.relativePath.split(n);i.length>1&&(r.dataPath.relativePath=i[0]),n="".concat(x()().utc().format("MM-DD-YYYY_hhmmss"),"_UTC")}return r.schema=void 0,r.general=void 0,r.columnsToRemove=void 0,{files:e,errors:Object(o.a)(Object(o.a)({},t.errors),{},Object(s.a)({},Q.a.DatastoreSelection,a)),datasetRequest:r,uploadPathTimeStampSuffix:n,traitChangeToggle:!t.traitChangeToggle,datasetPropertyToTraitMap:new Map}}))},i.onFileUploadStatusChange=function(e){e.length>0&&i.setState({fileUploadStatusRows:e})},i.setStepValidateCallback=function(e){i.validateBasicInfoStep=e},i.setSettingsValidateCallback=function(e){i.validateSettingsStep=e},i.setSchemaStepValidateCallback=function(e){i.validateSchemaStep=e},i.setDatastoreSelectionStepValidateCallback=function(e){i.validateDatastoreSelectionStep=e},i.onStepLeaving=function(){var e=Object(u.a)(c.a.mark((function e(t){var a,r,n,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.setState({isValidating:!0}),a=t.currentStepKey,void 0!==t.nextStepIndex&&void 0!==t.nextStepKey&&a&&!i.state.parsingDataset){e.next=5;break}return i.setState({isValidating:!1}),e.abrupt("return");case 5:if(r=t.nextStepIndex,n=t.currentStepIndex,u=r<n){e.next=41;break}if(e.t3=a===Q.a.BasicInfo&&i.validateBasicInfoStep,!e.t3){e.next=14;break}return e.next=13,i.validateBasicInfoStep();case 13:e.t3=!e.sent;case 14:if(e.t2=e.t3,e.t2){e.next=22;break}if(e.t4=a===Q.a.SettingsAndPreview&&i.validateSettingsStep,!e.t4){e.next=21;break}return e.next=20,i.validateSettingsStep();case 20:e.t4=!e.sent;case 21:e.t2=e.t4;case 22:if(e.t1=e.t2,e.t1){e.next=30;break}if(e.t5=a===Q.a.DatastoreSelection&&i.validateDatastoreSelectionStep,!e.t5){e.next=29;break}return e.next=28,i.validateDatastoreSelectionStep();case 28:e.t5=!e.sent;case 29:e.t1=e.t5;case 30:if(e.t0=e.t1,e.t0){e.next=38;break}if(e.t6=a===Q.a.Schema&&i.validateSchemaStep,!e.t6){e.next=37;break}return e.next=36,i.validateSchemaStep();case 36:e.t6=!e.sent;case 37:e.t0=e.t6;case 38:if(!e.t0){e.next=41;break}return i.setState((function(e){return{stepState:Object(o.a)(Object(o.a)({},e.stepState),{},Object(s.a)({},a,h.WizardStepState.Error)),isValidating:!1}})),e.abrupt("return");case 41:l=u?h.WizardStepState.NotStarted:h.WizardStepState.Completed,d=t.nextStepKey,i.trackEvent(g.a.DatasetCreateNavigate,{currentStepKey:t.currentStepKey,nextStepKey:t.nextStepKey}),i.trackEvent(Object(H.e)(d)),i.setState((function(e){var t;return Object(o.a)(Object(o.a)({},e),{},{currentStepIndex:r,errorMessages:[],datastoreCreateErrors:[],stepState:Object(o.a)(Object(o.a)({},e.stepState),{},(t={},Object(s.a)(t,a,l),Object(s.a)(t,d,h.WizardStepState.CurrentStep),t)),isValidating:!1})}));case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.onDatastoreStepCancel=function(){i.setState({datastoreSelectionChoice:J.b.Selected})},i.onCancel=function(){i.trackEvent(g.a.DatasetCreateCancel,{onWizardStep:i.state.currentStepIndex.toString()}),i.props.onDismiss()},i.onDone=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=W.a.Prepare(i.state.datasetRequest,i.state.datasetPropertyToTraitMap),i.createDataset(t);case 2:case"end":return e.stop()}}),e)}))),i.parseDataset=function(){var e=Object(u.a)(c.a.mark((function e(t){var a,r,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.setState((function(e){return{parsingDataset:e.parsingDataset+1}})),i.datasetsClient.abort(),e.next=4,i.datasetsClient.parseDataset(t);case 4:if((a=e.sent).status!==f.a.Ok||!a.data){e.next=18;break}if(!a.data.sourceProperties||a.data.sourceProperties.dataSourceType!==U.a.JSON.Name&&a.data.sourceProperties.dataSourceType!==U.a.Excel.Name&&a.data.sourceProperties.dataSourceType!==U.a.Binary.Name){e.next=11;break}a.data.sourceProperties.dataSourceType=U.a.Plain.Name,a.data.schema=void 0,e.next=18;break;case 11:if(r=!1,a.data.general&&!a.data.general.skipMode&&a.data.sourceProperties&&(a.data.general.sourcePropertiesOverride||(a.data.general.sourcePropertiesOverride=a.data.sourceProperties),a.data.general.sourcePropertiesOverride.skipLinesCount=0,a.data.general.skipMode="None",a.data.schema=void 0,r=!0),a.data.general&&!a.data.general.promoteHeadersMode&&a.data.sourceProperties&&(a.data.general.sourcePropertiesOverride||(a.data.general.sourcePropertiesOverride=a.data.sourceProperties),a.data.general.sourcePropertiesOverride.promoteHeaders=!1,a.data.general.promoteHeadersMode="None",a.data.schema=void 0,r=!0),!r){e.next=18;break}return e.next=17,i.datasetsClient.parseDataset(a.data);case 17:a=e.sent;case 18:if(a.status!==f.a.Ok||!a.data){e.next=23;break}return i.setState((function(e){return{parsingDataset:e.parsingDataset-1,datasetRequest:Object(o.a)(Object(o.a)({},a.data),{},{userDatastorePath:e.datasetRequest.userDatastorePath,customDelimiter:e.datasetRequest.customDelimiter}),isParseFailed:!1}})),e.abrupt("return",a.data);case 23:if(a.status!==f.a.Error){e.next=27;break}return s=i.errorManager.getParseResponseErrorMessages(a.error,q.b.Data.Common.ErrorTitlePlaceholder),i.setState((function(e){return{errorMessages:Object(n.a)(e.errorMessages.concat(s)),parsingDataset:e.parsingDataset-1,isParseFailed:!0}})),e.abrupt("return",void 0);case 27:return i.setState((function(e){return{parsingDataset:e.parsingDataset-1,isParseFailed:!0}})),e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.getPreview=function(){var e=Object(u.a)(c.a.mark((function e(t,a){var r,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.state.skipValidation){e.next=4;break}return i.datasetsClient.abort(),i.setState({loadingPreview:0,parsingDataset:0,datasetPreview:void 0}),e.abrupt("return");case 4:if(!(r=Object(W.b)(t,i.props.flightContext))){e.next=9;break}return i.datasetsClient.abort(),i.setState((function(e){return{datasetPreview:void 0,errorMessages:Object(n.a)(e.errorMessages.concat(r))}})),e.abrupt("return");case 9:if(i.setState((function(e){return{loadingPreview:e.loadingPreview+1}})),i.datasetsClient.abort(),s=t,!a){e.next=16;break}return e.next=15,i.parseDataset(t);case 15:s=e.sent;case 16:if(s){e.next=19;break}return i.setState((function(e){return{datasetPreview:void 0,loadingPreview:e.loadingPreview-1}})),e.abrupt("return");case 19:return e.next=21,i.datasetsClient.getPreview(Object(o.a)(Object(o.a)({},s),{},{columnsToRemove:[]}));case 21:(u=e.sent).status===f.a.Ok&&u.data?i.setState((function(e){return{datasetPreview:u.data,loadingPreview:e.loadingPreview-1}})):u.status===f.a.Error?i.setState((function(e){return u.error?{loadingPreview:e.loadingPreview-1,datasetPreview:void 0,errorMessages:Object(n.a)(e.errorMessages.concat(A.a.addErrorCodeAndIsUserError("DatasetCreateByUpload PreviewDataset",Object(L.a)(u.error,q.b.Data.Common.ErrorTitlePlaceholder,{errorOverride:"ServiceErrorCodeDatasetCreationOverrides"}),["UserError"],u.httpStatus)))}:{loadingPreview:e.loadingPreview-1,datasetPreview:void 0,errorMessages:Object(n.a)(e.errorMessages)}})):i.setState((function(e){return{loadingPreview:e.loadingPreview-1}}));case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),i.createDataset=function(){var e=Object(u.a)(c.a.mark((function e(t){var a,r,s,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.setState({creatingDataset:!0}),i.datasetsClient.abort(),e.next=4,i.datasetsClient.registerDatasetFromDataPath(t,!0,i.state.skipValidation);case 4:if(a=e.sent,r={},a.status!==f.a.Ok||!a.data){e.next=19;break}if(i.state.datasetRequest.datasetType!==I.a.datasetTypes().TabularDataset.Enum||!i.state.generateProfileAfterCreation){e.next=10;break}return e.next=10,i.generateProfile(a.data);case 10:i.setState({lastUploadedFiles:void 0}),i.props.messageContext.dismissAllMessages(),o=q.b.Data.DatasetCreateByUploadPage.SuccessMessage.replace("{datasetName}",t.name||""),u={title:q.b.Data.DatasetCreateByUploadPage.SuccessTitle,messageType:b.c.Success,message:o},t.name&&(null===(s=a.data.latest)||void 0===s?void 0:s.versionId)&&(u.link={text:q.b.Data.DatasetCreateFromDatastore.ClickHereToJumpTo,to:i.props.routeContext.getFullPathTo(D.a.DatasetRegisterDetailsRoute,{datasetName:t.name,version:null===(l=a.data.latest)||void 0===l?void 0:l.versionId})}),i.props.messageContext.addMessage(u),i.props.onCreate({datasetId:a.data.datasetId||"",datasetName:a.data.name||"",versionId:a.data.latest&&a.data.latest.versionId||""}),e.next=20;break;case 19:a.status===f.a.Error&&i.setState((function(e){return a.error?{creatingDataset:!1,errorMessages:Object(n.a)(e.errorMessages.concat(A.a.addErrorCodeAndIsUserError("DatasetCreateByUpload Create Dataset",Object(L.a)(a.error,q.b.Data.Common.ErrorTitlePlaceholder),["DatasetVersionExists"])))}:{creatingDataset:!1,errorMessages:Object(n.a)(e.errorMessages)}}));case 20:r.datasetType=t.datasetType,r.datasetVersion=a.data&&a.data.latest&&a.data.latest.versionId||"",r.datastoreType=i.state.datastoreType,r.status=a.status.toString(),r.wasGenerateProfileSelected=i.state.generateProfileAfterCreation.toString(),i.trackEvent(g.a.DatasetCreateResult,r);case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.generateProfile=function(){var e=Object(u.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.props.flightContext.isEnabled(S.a.DatastoreSelectForProfile),r=Boolean(!a||i.state.targetDatastoreForProfiling),!i.state.targetComputeForProfiling||!r){e.next=5;break}return e.next=5,i.props.datasetServiceClient.generateProfileWithPreview(t.latest&&t.latest.savedDatasetId?t.latest.savedDatasetId:"",{computeTarget:i.state.targetComputeForProfiling,datastoreName:i.state.targetDatastoreForProfiling&&i.state.targetDatastoreForProfiling.name});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.trackEvent=function(e,t){var a,r=t||{};r.method="Upload",r.createProviderSource=i.props.createProviderSource,r.wizardSessionId=null===(a=i.wizardRef.current)||void 0===a?void 0:a.getWizardSessionId(),Object(V.b)(e,r)},i.addErrorMessage=function(e){i.setState((function(t){return{errorMessages:[].concat(Object(n.a)(t.errorMessages),[e])}}))},i.telemetryProps=Object(o.a)({},i.props),i.datasetsClient=new z.a(e.authContext,e.workspaceContext),i.datastoreClient=new v.a(e.authContext,e.workspaceContext);var d=!i.props.authorizationContext.hasPermission(C.a.DatasetsRegisteredPreviewRead);return i.errorManager=new G.a("DatasetCreateByUpload"),i.state={uploadPathTimeStampSuffix:"".concat(x()().utc().format("MM-DD-YYYY_hhmmss"),"_UTC"),files:null,datasetRequest:{isVisible:!0,dataPath:{datastoreName:R.a.DefaultBlobDatastore,relativePath:"UI"},datastorePath:"",datasetType:e.datasetType||I.a.datasetTypes().TabularDataset.Enum,name:e.datasetName,userDatastorePath:"UI"},errors:(r={},Object(s.a)(r,Q.a.BasicInfo,{}),Object(s.a)(r,Q.a.DatastoreSelection,{datastoreSelectionErrors:{},fileErrors:void 0}),r),stepState:{BasicInfo:h.WizardStepState.CurrentStep,DatastoreSelection:h.WizardStepState.NotStarted,SettingsAndPreview:h.WizardStepState.NotStarted,Schema:h.WizardStepState.NotStarted,VerificationStep:h.WizardStepState.NotStarted},currentStepIndex:0,parsingDataset:0,skipValidation:d,loadingPreview:0,creatingDataset:!1,uploadingFiles:!1,isParseFailed:!1,fileUploadStatusRows:[],datasetPropertyToTraitMap:new Map,traitChangeToggle:!1,datasetTraitFailureMessages:[],generateProfileAfterCreation:!1,targetComputeForProfiling:void 0,isValidating:!1,errorMessages:[],datastoreSelectionChoice:J.b.Selected,datastoreCreateErrors:[],targetDatastoreForProfiling:void 0,loadingDatastore:!1},i}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,a,n,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getDefaultDatastoreOrUndefined(),this.getWorkspaceBlobStoreOrUndefined()]);case 2:t=e.sent,a=Object(r.a)(t,2),n=a[0],s=a[1],o=s?s.dataStoreType:void 0,this.setState({defaultDatastore:n,workspaceblobstore:s,datastore:s,datastoreType:o}),this.trackEvent(g.a.DatasetCreateWizardLaunch),this.trackEvent(g.a.DatasetCreateWizardLaunchFromUpload);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.datasetRequest.datasetType===I.a.datasetTypes().TabularDataset.Enum?this.tabularDatasetWizardChildren:this.fileDatasetWizardChildren;return M.a.createElement("div",{className:"dataset-create-from-upload"},M.a.createElement(h.Wizard,{currentStepIndex:this.state.currentStepIndex,onCancel:this.onCancel,onDone:this.onDone,onStepWillLeave:this.onStepLeaving,buttonsOptions:{navigationDisabled:this.isNavigationDisabled(),doneDisabled:this.state.creatingDataset},ref:this.wizardRef},e()))}},{key:"basicInfoStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.errors,r=e.parsingDataset,n=e.stepState,s=e.datastoreType,o=e.errorMessages,i=this.state.isValidating||r>0,c=i?q.b.Data.DatasetCreateFromDatastore.ValidatingSpinner:void 0;return M.a.createElement(_.a,{bannerMessages:o,loadingMessage:c,bannerMessagesOnDismiss:this.dismissMessage,disableTypeSelection:this.props.disableTypeSelection,datasetClient:this.datasetsClient,key:Q.a.BasicInfo,title:q.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Title,datasetRequest:t,datastoreType:s,errors:a.BasicInfo,onChange:this.changeStateAction("datasetRequest"),onError:this.basicInfoError,setValidateCallback:this.setStepValidateCallback,loading:i,state:n.BasicInfo,datasetName:this.props.datasetName,datasetVersion:this.props.datasetVersion,unsetWizardErrorState:this.unsetWizardErrorState})}},{key:"datastoreSelectionFromUploadStep",value:function(){var e,t=this.state,a=t.datasetRequest,r=t.errors,n=t.errorMessages,s=t.parsingDataset,o=t.skipValidation,i=t.stepState,c=t.uploadPathTimeStampSuffix,u=t.files,l=t.fileUploadStatusRows,d=t.uploadingFiles,p=t.datastoreType,m=t.isValidating,h=t.datastoreSelectionChoice,f=t.datastoreCreateErrors,g=t.datastore,b=t.defaultDatastore,D=t.workspaceblobstore,S=t.credentiallessAccessToken,v=n.concat(f);return s>0?e=q.b.Data.DatasetCreateByUploadPage.ParsingDatasetMessage:d&&(e=q.b.Data.DatasetCreateByUploadPage.SpinnerUploading),M.a.createElement(Y.a,{loadingMessage:e,bannerMessages:v,bannerMessagesOnDismiss:this.dismissMessage,onCancel:this.onDatastoreStepCancel,defaultDatastore:b,workspaceblobstore:D,datasetClient:this.datasetsClient,uploadPathTimeStampSuffix:c,files:u,key:Q.a.DatastoreSelection,datastoreType:p,title:q.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.TitleFromUpload,datasetRequest:a,skipValidation:o,errors:r.DatastoreSelection,datastore:g,onFileSelectionChange:this.onFileSelectionChange,onFileUploadStatusChange:this.onFileUploadStatusChange,fileUploadStatusRows:l,onChange:this.changeStateAction("datasetRequest"),onError:this.datastoreSelectionStepError,onDatastoreSelected:this.onDatastoreSelected,setValidateCallback:this.setDatastoreSelectionStepValidateCallback,loading:s>0,state:i.DatastoreSelection,parseDataset:this.parseDataset,uploadingFiles:d,onUploadStatusChange:this.changeStateAction("uploadingFiles"),setDatasetRequest:this.setDatasetRequest,onFileUpload:this.changeStateAction("lastUploadedFiles"),unsetWizardErrorState:this.unsetWizardErrorState,validating:this.state.isValidating,onSkipValidationCheckboxChange:this.onSkipValidationCheckboxChange,onRequestError:this.addErrorMessage,datastoreSelectionChoice:h,datastoreCreateErrors:f,onCreateNewDatastoreSuccess:this.onCreateNewDatastoreSuccess,onCreateNewDatastoreError:this.onCreateNewDatastoreError,onDatastoreSelectionChoiceChange:this.onDatastoreSelectionChoiceChange,onDatastoreCreateFormValuesChange:this.onDatastoreCreateFormValuesChange,datastoreCreateFormValues:this.datastoreCreateFormValues,isValidating:m,credentiallessAccessToken:S,onGetCredentiallessToken:this.changeStateAction("credentiallessAccessToken")})}},{key:"settingsAndPreviewStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.datasetPreview,n=e.loadingPreview,s=e.datastoreType,o=e.errorMessages,i=e.skipValidation;return M.a.createElement(X.a,{skipValidation:i,bannerMessages:o,bannerMessagesOnDismiss:this.dismissMessage,key:Q.a.SettingsAndPreview,title:q.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Title,state:a.SettingsAndPreview,datastoreType:s||"AzureBlob",datasetRequest:t,datasetPreview:r,loadingPreview:n>0,onChange:this.changeStateAction("datasetRequest"),setValidateCallback:this.setSettingsValidateCallback,getPreview:this.getPreview,contextProps:this.telemetryProps,isParseFailed:this.state.isParseFailed})}},{key:"schemaStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.datasetPreview,n=e.datasetPropertyToTraitMap,s=e.loadingPreview,o=e.errorMessages,i=e.datasetTraitFailureMessages,c=o.concat(i);return M.a.createElement(K.a,{bannerMessages:c,bannerMessagesOnDismiss:this.dismissMessage,key:Q.a.Schema,title:q.b.Data.DatasetCreateFromDatastore.Steps.Schema.Title,state:a.Schema,datasetRequest:t,datasetPropertyToTraitMap:n,datasetPreview:r,onChange:this.changeStateAction("datasetRequest"),setValidateCallback:this.setSchemaStepValidateCallback,getPreview:this.getPreview,datasetTraitChanged:this.datasetTraitChanged,datasetTraitFailureMessagesChanged:this.changeStateAction("datasetTraitFailureMessages"),messageContext:this.props.messageContext,loadingPreview:s>0,datasetTraitFailureMessages:i,unsetWizardErrorState:this.unsetWizardErrorState})}},{key:"verificationStep",value:function(){var e=this.state,t=e.datasetRequest,a=e.stepState,r=e.targetComputeForProfiling,n=e.files,s=e.datastoreType,o=e.generateProfileAfterCreation,i=e.errorMessages,c=e.targetDatastoreForProfiling,u=e.loadingDatastore,l=e.creatingDataset,d=l?q.b.Data.DatasetCreateFromDatastore.CreatingDatasetMessage:void 0;return M.a.createElement(Z.a,{bannerMessages:i,loadingMessage:d,creatingDataset:l,bannerMessagesOnDismiss:this.dismissMessage,datasetRequest:t,files:n,key:Q.a.VerificationStep,title:q.b.Data.DatasetCreateFromDatastore.Steps.VerificationStep.Title,state:a.VerificationStep,generateProfileAfterCreation:o,onProfileCheckboxChange:this.onProfileCheckboxChange,onComputeForProfilingChange:this.changeStateAction("targetComputeForProfiling"),selectedCompute:r,datasetVersion:this.props.datasetVersion,datastoreType:s,selectedDataStore:c,loadingDatastore:u,onDatastoreForProfilingLoading:this.onDatastoreLoading,onDatastoreForProfilingLoaded:this.onDatastoreLoaded,onDataStoreForProfilingChange:this.changeStateAction("targetDatastoreForProfiling"),onDatastoreForProfilingStart:this.changeStateAction("targetDatastoreForProfiling")})}},{key:"changeStateAction",value:function(e){var t=this;return function(a){t.props.onChange(),t.setState((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(s.a)({},e,a))}))}}},{key:"isNavigationDisabled",value:function(){return this.state.uploadingFiles||this.state.loadingPreview>0||this.state.parsingDataset>0||this.state.isValidating||this.state.creatingDataset}}]),a}(M.a.PureComponent)),ee=Object(T.a)(Object(y.a)(Object(P.a)(Object(k.a)(Object(O.a)(Object(F.a)(Object(E.a)($)))))),{datasetServiceClient:w.a},B.a)},mYvi:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("in70"),n=a("Co5R"),s=a("ERkP"),o=a("XpkB"),i=a("p+CL"),c=(a("ELzw"),function(e){return s.createElement(r.a,{isOpen:e.isOpen,onDismiss:e.onDismiss,className:"mount-create-panel",panelType:n.a.large,headerText:o.b.ComputeDetails.MountCreate.Wizard.DatasetHeaderText,closeButtonAriaLabel:o.b.ComputeDetails.MountCreate.Wizard.ClosePanel},s.createElement(i.a,e))})},"o5+l":function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var r=a("fGyu"),n=a("Czhu"),s=a("VtSi"),o=a.n(s),i=a("QsI/"),c=a("9fIP"),u=a("MMYH"),l=a("8K1b"),d=a("AqVP"),p=a("nsO7"),m=a.n(p),h=a("ERkP"),f=a.n(h),g=a("FABw"),b=a("EDzT"),D=a("ytdN"),S=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).loadedItems=[],r.continuationToken=void 0,r.loadingInProgress=0,r.searchText=void 0,r.orderBy=void 0,r.isDescendingOrder=!1,r.isFullyLoaded=!1,r.eTag=(new Date).getTime(),r.lastDeleteEtag=(new Date).getTime(),r.debounceRefresh=void 0,r.timeoutInstanceIds=[],r.refresh=function(){r.clearQuietReload(),r.reset(),r.getNextDataPage()},r.onNextPage=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState((function(e){var a=e.currentPage+1;return r.loadedItems.length>a*r.props.itemsPerPage&&!r.continuationToken||r.loadedItems.length>(a+1)*r.props.itemsPerPage?{currentPage:a}:(r.continuationToken&&(t=a),null)}),Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t){e.next=3;break}return e.next=3,r.getNextDataPage(t);case 3:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)}))),r.onPreviousPage=function(){r.setState((function(e){return e.currentPage>0?{currentPage:e.currentPage-1}:null}))},r.onSearchTextChanged=function(e){r.searchText=e,r.debounceRefresh()},r.onColumnHeaderClicked=function(e,t){if(t){var a=void 0!==t.isSortedDescending&&!t.isSortedDescending;r.orderBy=t.field,r.isDescendingOrder=a,r.isFullyLoaded?r.loadedItems=m.a.orderBy(r.loadedItems,[t.field],a?"desc":"asc"):r.refresh(),r.setState({columns:r.mapColumns(t.field,a)})}},r.quietReload=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.props.quietReloadProps)try{n=r.props.quietReloadProps.shouldReloadCheck,s=[],t.forEach((function(e,t){n(e)&&s.push({index:t+a,row:e})})),s.length>0&&s.forEach((function(e){r.reloadRequiredRow(e.row,e.index)}))}catch(o){}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.reloadRequiredRow=function(){var e=Object(i.a)(o.a.mark((function e(t,a){var n,s,i,c,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.props.quietReloadProps||!r.props.quietReloadProps.loadSingleItemForQuietReload){e.next=13;break}return e.prev=1,n=r.props.quietReloadProps,s=n.shouldReloadCheck,i=n.reloadInterval,c=n.loadSingleItemForQuietReload,e.next=5,c(t);case 5:u=e.sent,r.loadedItems[a]=u,r.forceUpdate(),s(u)&&(l=setTimeout(r.reloadRequiredRow,i,u,a),r.timeoutInstanceIds.push(l)),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,a){return e.apply(this,arguments)}}(),r.state={currentPage:0,loading:!1,columns:r.mapColumns(e.sortColumnFieldName,e.sortDescending||!1),uniqueIds:new Set,loadError:!1},r.debounceRefresh=e.searchFilterDebounceDelayMs&&e.searchFilterDebounceDelayMs>0?m.a.debounce(r.refresh,e.searchFilterDebounceDelayMs):r.refresh,r}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"componentWillUnmount",value:function(){this.clearQuietReload()}},{key:"componentDidUpdate",value:function(e){this.props.refreshToken!==e.refreshToken&&this.refresh(),m.a.isEqual(this.props.columns,e.columns)||this.setState({columns:Object(D.a)(this.state.columns,this.props.columns)})}},{key:"render",value:function(){var e=this.props,t=e.loadingMessage,a=e.selectionMode,r=e.checkboxVisibility,n=e.onSelect,s=e.stickyHeader,o=e.noResourcesName,i=e.noResourcesIconName,c=e.noSorting,u=e.commandItems,l=e.noResourcesRender,d=e.disableSearchBox,p=e.onRenderRow,m=this.state,h=m.currentPage,D=m.loading,S=m.columns,v=this.getItemsPage(h),C=this.getPaginationProps(),y=(!v||!v.length)&&!!this.searchText;if(this.props.ctaSettings&&0===this.state.uniqueIds.size){if(D)return f.a.createElement(g.a,null);if(!this.state.loadError)return this.props.ctaSettings.ctaRender()}return f.a.createElement(b.a,{items:v,columns:S,paginationProps:C,isLoading:D,loadingMessage:t,selectionMode:a,checkboxVisibility:r,onSearchTextChange:this.onSearchTextChanged,onSelect:n,stickyHeader:s,noResourcesName:o,noResourcesIconName:i,noSorting:c,onColumnHeaderClick:this.onColumnHeaderClicked,onRenderRow:p,commandItems:u,noResourcesRender:l,noResultsToDisplay:y,disableSearchBox:d})}},{key:"mapColumns",value:function(e,t){return this.orderBy=e,this.isDescendingOrder=t,this.props.columns.map((function(a){var r=e&&a.field===e;return Object(n.a)(Object(n.a)({},a),{},{isSorted:r,isSortedDescending:!r||t})}))}},{key:"getItemsPage",value:function(e){var t=e*this.props.itemsPerPage;return 0===this.loadedItems.length?[]:this.loadedItems.length<=t?this.loadedItems.slice(Math.max(this.loadedItems.length-this.props.itemsPerPage,0)):this.loadedItems.slice(t,Math.min(t+this.props.itemsPerPage,this.loadedItems.length))}},{key:"getNextDataPage",value:function(){var e=Object(i.a)(o.a.mark((function e(t){var a,n,s,i,c,u,l,d=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadingInProgress+=1,a=!1,n=this.eTag,this.setState({loading:!0}),e.prev=4,s={itemsPerPage:this.props.itemsPerPage+this.props.prefetchCount,filter:this.searchText,orderBy:this.orderBy?{columnName:this.orderBy,descending:this.isDescendingOrder}:void 0};case 6:return s.continuationToken=this.continuationToken,e.next=9,this.props.getDataPage(s);case 9:i=e.sent,this.continuationToken=i.continuationToken,a=i.hasError,!i.data||!i.data.length||this.eTag!==n||s.continuationToken&&s.continuationToken===this.continuationToken||(u=this.loadedItems.length,(c=this.loadedItems).push.apply(c,Object(r.a)(i.data)),this.quietReload(i.data,u)),this.isFullyLoaded=!this.continuationToken;case 14:if(this.loadedItems.length<this.props.itemsPerPage*((t||0)+1)&&this.continuationToken&&this.eTag===n){e.next=6;break}case 15:return e.prev=15,this.loadingInProgress-=1,0===this.loadingInProgress&&(l=this.state.uniqueIds,this.props.ctaSettings&&(l=new Set(this.state.uniqueIds),this.loadedItems.map((function(e){return d.props.ctaSettings.getUniqueId(e)})).forEach((function(e){return l.add(e)}))),this.props.sortOnFirstLoad&&this.orderBy&&(this.loadedItems=m.a.orderBy(this.loadedItems,[this.orderBy],this.isDescendingOrder?"desc":"asc")),this.setState((function(e){return{uniqueIds:l,loading:!1,currentPage:t||e.currentPage,loadError:a}}))),e.finish(15);case 19:case"end":return e.stop()}}),e,this,[[4,,15,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPaginationProps",value:function(){return{isFirstPage:0===this.state.currentPage,isLastPage:this.state.currentPage+1>=this.loadedItems.length/this.props.itemsPerPage&&!this.continuationToken,nextPage:this.onNextPage,previousPage:this.onPreviousPage,disablePaginationButtons:this.props.disablePaginationButtons}}},{key:"reset",value:function(){this.loadedItems=[],this.continuationToken=void 0,this.eTag=(new Date).getTime();var e=this.state.uniqueIds;this.props.ctaSettings&&this.props.ctaSettings.lastDeleted&&this.lastDeleteEtag<this.props.ctaSettings.lastDeleted.deleteEtag&&(this.lastDeleteEtag=this.props.ctaSettings.lastDeleted.deleteEtag,(e=new Set(e)).delete(this.props.ctaSettings.lastDeleted.uniqueId)),this.setState({currentPage:0,uniqueIds:e})}},{key:"clearQuietReload",value:function(){this.timeoutInstanceIds&&this.timeoutInstanceIds.length>0&&this.timeoutInstanceIds.forEach((function(e){clearTimeout(e)}))}}]),a}(f.a.Component);S.defaultProps={itemsPerPage:50,searchFilterDebounceDelayMs:500,noSorting:!1,prefetchCount:0}},o9Up:function(e,t,a){"use strict";a.d(t,"a",(function(){return z}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("ERkP"),c=a.n(i),u=a("aWnM"),l=a("LsED"),d=a("mGHB"),p=a("fvIy"),m=a("XpkB"),h=a("/58v"),f=a("1vim"),g=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(h.a,{name:"credential",type:"password",label:m.b.Datastore.DatastoreEditPage.Authentication.AccountKey.label,required:this.props.required,tooltip:m.b.Datastore.DatastoreEditPage.Authentication.AccountKey.HelpText,tooltipAriaLabel:m.b.Datastore.DatastoreEditPage.Authentication.AccountKey.HelpText,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return f.a.isRequired(e,m.b.Datastore.DatastoreEditPage.Authentication.AccountKey.ValidationErrors.Required)}}]),a}(i.Component);g.defaultProps={required:!0};var b=a("3nK6"),D=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(h.a,{name:"authorityUrl",label:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.AuthorityURLField.label,placeholder:l.a.config.azureActiveDirectory.endpoint,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return e?f.a.matchesRegEx(e,b.a.Regex.uri,m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.AuthorityURLField.ValidationErrors.RegeX):void 0}}]),a}(i.Component),S=a("WC4d"),v=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.tooltip.split("{azurePortal}");return c.a.createElement(c.a.Fragment,null,e[0],c.a.createElement(S.a,{href:l.a.config.azurePortal},m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.AzurePortalText),e[1])}}]),a}(c.a.Component),C=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(h.a,{name:"clientId",label:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientIdField.label,required:this.props.required,tooltip:i.createElement(v,{tooltip:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientIdField.HelpText}),tooltipAriaLabel:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientIdField.HelpTextAriaLabel,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return f.a.isRequired(e,m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientIdField.ValidationErrors.Required)||f.a.matchesRegEx(e,b.a.Regex.uuid4,m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientIdField.ValidationErrors.RegeX)}}]),a}(i.Component);C.defaultProps={required:!0};var y=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(h.a,{name:"clientSecret",type:"password",label:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientSecretField.label,required:this.props.required,tooltip:i.createElement(v,{tooltip:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientSecretField.HelpText}),tooltipAriaLabel:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientSecretField.HelpTextAriaLabel,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return f.a.isRequired(e,m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.ClientSecretField.ValidationErrors.Required)}}]),a}(i.Component);y.defaultProps={required:!0};var P=a("z/dm"),k=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).getTooltip=function(t){var a=t.map((function(t){return e.getHelp(t)}));return 0===(a=a.filter((function(e){return!!e}))).length?void 0:i.createElement(i.Fragment,null,a)},e.getHelp=function(e){var t=m.b.Datastore.DatastoreEditPage.Authentication.AuthTypeField,a=t.Options[e].Description,r=t.Options[e].Link;return!r&&a?void 0:i.createElement(i.Fragment,null,i.createElement("b",null,"".concat(t.Options[e].Name,": ")),a&&a.length>0?"".concat(a," "):void 0,r&&r.length>0?i.createElement(S.a,{href:r},t.DefaultLinkText):void 0,i.createElement("br",null))},e}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props.options;return!(!e||!e.length)&&i.createElement(P.a,{name:"credentialType",label:m.b.Datastore.DatastoreEditPage.Authentication.AuthTypeField.label,placeholder:m.b.Datastore.DatastoreEditPage.Authentication.AuthTypeField.Options.Default.Name,required:this.props.required,tooltip:this.getTooltip(e),options:e.map((function(e){return{key:e,text:m.b.Datastore.DatastoreEditPage.Authentication.AuthTypeField.Options[e].Name,ariaLabel:m.b.Datastore.DatastoreEditPage.Authentication.AuthTypeField.Options[e].Name}})),disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return"None"===e?m.b.Datastore.DatastoreEditPage.Authentication.AuthTypeField.ValidationErrors.Required:void 0}}]),a}(i.Component);k.defaultProps={required:!0};var O=a("Bxmo"),F=a("TUpj"),E=a("5ciz"),T=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){if(!Object(d.g)(this.props.datastoreType))return c.a.createElement(c.a.Fragment,null);var e,t;switch(this.props.datastoreType){case"AzureBlob":e=m.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.DatastoreType.AzureStorage.label,t=m.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.DatastoreType.AzureStorage.tooltip;break;case"AzureSqlDatabase":e=m.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.DatastoreType.AzureSQL.label,t=m.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.DatastoreType.AzureSQL.tooltip;break;case"AzureDataLakeGen2":e=m.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.DatastoreType.AzureStorage.label,t=m.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.DatastoreType.AzureDataLake.tooltip;break;case"AzureDataLake":e=m.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.DatastoreType.AzureDataLake.label,t=m.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.DatastoreType.AzureDataLake.tooltip}return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{name:"serviceDataAccessAuthIdentity",label:e,leftText:m.b.Datastore.DatastoreEditPage.CommonFields.GrantMSIWorkspaceAccess.No,leftValue:"None",rightText:m.b.Datastore.DatastoreEditPage.CommonFields.GrantMSIWorkspaceAccess.Yes,rightValue:"WorkspaceSystemAssignedIdentity",disabled:this.props.disabled,tooltip:t}),this.props.showSubAndRg&&c.a.createElement(c.a.Fragment,null,c.a.createElement(F.a,{disabled:this.props.disabled}),c.a.createElement(E.a,{disabled:this.props.disabled,subscriptionId:this.props.subscriptionId})))}}]),a}(c.a.Component),w=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(h.a,{name:"credential",type:"password",label:m.b.Datastore.DatastoreEditPage.Authentication.SasToken.label,required:this.props.required,disabled:this.props.disabled,tooltip:m.b.Datastore.DatastoreEditPage.CommonFields.SasToken.Tooltip})}}],[{key:"validate",value:function(e){return f.a.isRequired(e,m.b.Datastore.DatastoreEditPage.Authentication.SasToken.ValidationErrors.Required)}}]),a}(i.Component);w.defaultProps={required:!0};var j=a("pCdE"),x=a("tSJw"),N=function(e){return Object(i.useContext)(j.a).isEnabled(x.a.CredentialLessDatastore)?c.a.createElement(O.a,{name:"saveCredentials",label:m.b.Datastore.DatastoreEditPage.CommonFields.SaveCredentials.label,leftText:m.b.Datastore.DatastoreEditPage.CommonFields.SaveCredentials.No,leftValue:!1,rightText:m.b.Datastore.DatastoreEditPage.CommonFields.SaveCredentials.Yes,rightValue:!0,disabled:e.disabled,tooltip:m.b.Datastore.DatastoreEditPage.CommonFields.SaveCredentials.Tooltip,tooltipAriaLabel:m.b.Datastore.DatastoreEditPage.CommonFields.SaveCredentials.Tooltip}):null},M=a("O+BM"),A=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(h.a,{name:"tenantId",label:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.TenantIdField.label,required:this.props.required,tooltip:i.createElement(v,{tooltip:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.TenantIdField.HelpText}),tooltipAriaLabel:m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.TenantIdField.HelpTextAriaLabel,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return f.a.isRequired(e,m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.TenantIdField.ValidationErrors.Required)||f.a.matchesRegEx(e,b.a.Regex.uuid4,m.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.TenantIdField.ValidationErrors.RegeX)}}]),a}(i.Component);A.defaultProps={required:!0};var I=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return c.a.createElement(O.a,{name:"enableSSL",label:m.b.Datastore.DatastoreEditPage.Authentication.SSLToggle.Title,leftText:m.b.Datastore.DatastoreEditPage.Authentication.SSLToggle.Off,leftValue:!1,rightText:m.b.Datastore.DatastoreEditPage.Authentication.SSLToggle.On,rightValue:!0,disabled:this.props.disabled})}}]),a}(c.a.Component),R=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(h.a,{name:"userId",label:m.b.Datastore.DatastoreEditPage.AzurePostgresMySql.UserIdField.label,required:!this.props.required||this.props.required,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return f.a.isRequired(e,m.b.Datastore.DatastoreEditPage.AzurePostgresMySql.UserIdField.ValidationErrors.Required)}}]),a}(i.Component),B=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(h.a,{name:"userPassword",type:"password",label:m.b.Datastore.DatastoreEditPage.AzurePostgresMySql.UserPasswordField.label,required:this.props.required,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return f.a.isRequired(e,m.b.Datastore.DatastoreEditPage.AzurePostgresMySql.UserPasswordField.ValidationErrors.Required)}}]),a}(i.Component);B.defaultProps={required:!0};var q=function(e,t){t.clientId=e.clientId,t.tenantId=e.tenantId,t.isCertAuth=!!e.isCertAuth,t.certificate=e.certificate,t.thumbprint=e.thumbprint,t.clientSecret=e.clientSecret,t.authorityUrl=e.authorityUrl||l.a.config.azureActiveDirectory.endpoint,t.resourceUri=e.resourceUri},z=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).renderByAuthType=function(t,a){switch(t){case"AccountKey":return i.createElement(g,{disabled:e.props.disabled,required:e.props.saveCredentials});case"Sas":return i.createElement(w,{disabled:e.props.disabled,required:e.props.saveCredentials});case"ClientCredentials":case"ServicePrincipal":return i.createElement(i.Fragment,null,i.createElement(A,{disabled:e.props.disabled,required:e.props.saveCredentials}),i.createElement(C,{disabled:e.props.disabled,required:e.props.saveCredentials}),i.createElement(y,{disabled:e.props.disabled,required:e.props.saveCredentials}),i.createElement(u.a,{title:m.b.Datastore.DatastoreEditPage.Advanced,children:i.createElement(i.Fragment,null,i.createElement(D,{disabled:e.props.disabled})),disabled:e.props.disabled}));case"SqlAuthentication":return i.createElement(i.Fragment,null,i.createElement(R,{disabled:e.props.disabled,required:e.props.saveCredentials}),i.createElement(B,{disabled:e.props.disabled,required:e.props.saveCredentials}),"AzurePostgreSql"===a&&i.createElement(I,{disabled:e.props.disabled}));default:return!1}},e}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props,t=e.datastoreType,a=e.selectedAuthType,r=e.saveCredentials,n=e.disabled,s=e.showSubAndRg,o=void 0!==s&&s,c=e.selectedSubscriptionId,u=Object(d.g)(t);return Object(M.b)(t)?i.createElement(i.Fragment,null,u&&i.createElement(N,{disabled:this.props.disabled}),r&&i.createElement(i.Fragment,null,i.createElement(k,{options:M.a[t],disabled:this.props.disabled,required:this.props.saveCredentials}),a&&this.renderByAuthType(a,t)),u&&i.createElement(T,{disabled:n,datastoreType:t,showSubAndRg:o,subscriptionId:c})):null}}],[{key:"getInitialFormValues",value:function(e){var t=!1;return e&&(t=p.b.test(e)),{credential:"",clientId:"",tenantId:t?e:"",clientSecret:"",userId:"",userPassword:"",enableSSL:!1,authorityUrl:"",serviceDataAccessAuthIdentity:"None"}}},{key:"getAuthProperties",value:function(e,t){var a=m.b.Datastore.DatastoreEditPage,r={},n=e.credentialType||"ServicePrincipal";switch("AzureBlob"!==t&&"AzureDataLake"!==t&&"AzureDataLakeGen2"!==t&&"AzureSqlDatabase"!==t||(r[a.CommonFields.WorkspaceManagedIdentity.PropertyLabel]="WorkspaceSystemAssignedIdentity"===e.serviceDataAccessAuthIdentity?a.CommonFields.GrantMSIWorkspaceAccess.Yes:a.CommonFields.GrantMSIWorkspaceAccess.No),r[a.Authentication.AuthTypeField.label]=a.Authentication.AuthTypeField.Options[n].Name,n){case"ClientCredentials":e.clientCredentials&&(r[a.AzureDataLakeGen1.TenantIdField.label]=e.clientCredentials.tenantId||"",r[a.AzureDataLakeGen1.ClientIdField.label]=e.clientCredentials.clientId||"");break;case"ServicePrincipal":r[a.AzureDataLakeGen1.TenantIdField.label]=e.tenantId||"",r[a.AzureDataLakeGen1.ClientIdField.label]=e.clientId||"";break;case"SqlAuthentication":r[a.AzurePostgresMySql.UserIdField.label]=e.userId||"","enableSSL"in e&&(r[a.Authentication.SSLToggle.PropertyLabel]=e.enableSSL?a.Authentication.SSLToggle.On:a.Authentication.SSLToggle.Off)}return r}},{key:"getAuthSection",value:function(e){var t={};e.serviceDataAccessAuthIdentity&&(t.serviceDataAccessAuthIdentity=e.serviceDataAccessAuthIdentity);var a=e.credentialType;if(e.saveCredentials||(a="None"),a)switch(t.credentialType=a,a){case"AccountKey":case"Sas":(!e.credential||e.credential.length<1)&&(t.credentialType="None"),t.credential=e.credential;break;case"ClientCredentials":var r={};q(e,r),t.clientCredentials=r;break;case"SqlAuthentication":!function(e,t){t.userId=e.userId,t.userPassword=e.userPassword,"enableSSL"in e&&(t.enableSSL=e.enableSSL)}(e,t);break;case"ServicePrincipal":q(e,t)}else q(e,t);return t}},{key:"validate",value:function(e){var t={authorityUrl:D.validate(e.authorityUrl)};if(e.saveCredentials)switch(e.credentialType){case"AccountKey":t.credential=g.validate(e.credential);break;case"Sas":t.credential=w.validate(e.credential);break;case"ClientCredentials":case"ServicePrincipal":t.clientId=C.validate(e.clientId),t.tenantId=A.validate(e.tenantId),t.clientSecret=y.validate(e.clientSecret);break;case"SqlAuthentication":t.userId=R.validate(e.userId),t.userPassword=B.validate(e.userPassword);break;case"None":t.credentialType=k.validate(e.credentialType)}return t}}]),a}(i.Component)},"p+CL":function(e,t,a){"use strict";a.d(t,"a",(function(){return F}));var r,n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("zygG"),c=a("kgxj"),u=a("1eWE"),l=a("PXFs"),d=a("ERkP"),p=a.n(d),m=a("yjIu"),h=a("XpkB"),f=a("sM9X"),g=a("k0yv"),b=a("cqFV"),D=a("WC4d"),S=a("jfzg"),v=a("jeyl"),C=a("ctLR"),y=a("NiBv"),P=function(e){var t=d.useContext(S.a),a=d.useMemo((function(){return t.getFullPathTo(v.a.DatasetRegisterDetailsRoute,{datasetName:e.selectedDatasetName,version:y.a.Latest})}),[e.selectedDatasetName]);return d.createElement(g.a,{title:h.b.ComputeDetails.MountCreate.Steps.MountPath.Title},d.createElement(C.a,null,h.b.ComputeDetails.MountCreate.Steps.MountPath.Instructions),d.createElement(b.a,{text:h.b.ComputeDetails.MountCreate.Steps.SelectDataset.SelectedDataset,required:!0}),d.createElement(D.a,{href:a,openNewWindow:!0},e.selectedDatasetName),d.createElement(f.a,e))},k=a("klJQ"),O=function(e){var t=e.selectedDatasetName||h.b.ComputeDetails.MountCreate.Steps.SelectDataset.None;return d.createElement("div",null,d.createElement(g.a,{title:h.b.ComputeDetails.MountCreate.Steps.SelectDataset.Title},d.createElement(C.a,null,h.b.ComputeDetails.MountCreate.Steps.SelectDataset.Instructions),d.createElement(b.a,{text:h.b.ComputeDetails.MountCreate.Steps.SelectDataset.SelectedDataset}),d.createElement(C.a,null,t),d.createElement(k.a,{createProviderSource:"MountOnCi",disableTypeSelection:!0,datasetType:"file",onDatasetSelected:function(t){t&&t.name&&e.onSelect(t)},datasetSupportedFilter:function(e){return"file"===e.datasetType},additionalColumns:["relativePath","createdBy"],disableCreateFromOpenDatasets:!0})))};!function(e){e.SelectDataset="SelectDataset",e.MountPath="MountPath"}(r||(r={}));var F=function(e){var t=p.a.useState(0),a=Object(i.a)(t,2),n=a[0],d=a[1],g=p.a.useState(""),b=Object(i.a)(g,2),D=b[0],S=b[1],v=p.a.useState(""),C=Object(i.a)(v,2),y=C[0],k=C[1],F=p.a.useState(void 0),E=Object(i.a)(F,2),T=E[0],w=E[1],j=p.a.useState(c.WizardStepState.CurrentStep),x=Object(i.a)(j,2),N=x[0],M=x[1],A=p.a.useState(c.WizardStepState.NotStarted),I=Object(i.a)(A,2),R=I[0],B=I[1],q=p.a.useRef(null);p.a.useEffect((function(){var e;m.a.trackEvent(u.a.MountFromDatasetStart,void 0,{wizardSessionId:null===(e=q.current)||void 0===e?void 0:e.getWizardSessionId()})}),[]);var z=p.a.useMemo((function(){return e.existingMounts.map((function(e){return e.name}))}),[e.existingMounts]),L=function(){var e=Object(o.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={name:y,datasourceType:"Dataset",permissions:"Read",mountedPath:"MountPath",state:"MountRequested",createdOn:new Date,createdBy:"Service Principal"},l.a.log("Mount createdConvertedObj: ".concat(JSON.stringify(t))),e.abrupt("return",Promise.resolve(t));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var t=Object(o.a)(s.a.mark((function t(){var a,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:r=t.sent,m.a.trackEvent(u.a.MountFromDatasetDone,void 0,{wizardSessionId:null===(a=q.current)||void 0===a?void 0:a.getWizardSessionId()}),e.onDone(r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return p.a.createElement("div",{className:"mount-wizard"},p.a.createElement(c.Wizard,{currentStepIndex:n,onCancel:function(){var t;m.a.trackEvent(u.a.MountFromDatasetCancel,void 0,{wizardSessionId:null===(t=q.current)||void 0===t?void 0:t.getWizardSessionId()}),e.onCancel()},onDone:V,onStepWillLeave:function(e){var t;void 0!==e.nextStepIndex&&(d(e.nextStepIndex),m.a.trackEvent(1===e.nextStepIndex?u.a.MountFromDatasetPathStep:u.a.MountFromDatasetDatasetStep,void 0,{wizardSessionId:null===(t=q.current)||void 0===t?void 0:t.getWizardSessionId()}),0===e.currentStepIndex&&M(c.WizardStepState.Completed))},buttonsOptions:{navigationDisabled:0===n&&!D,doneDisabled:function(){var e=Boolean(D&&y);return T&&(e=!1),!e}()},ref:q},p.a.createElement(O,{title:h.b.ComputeDetails.MountCreate.Steps.SelectDataset.Title,key:r.SelectDataset,onSelect:function(e){S(e.name)},selectedDatasetName:D,state:N}),p.a.createElement(P,{selectedDatasetName:D,title:h.b.ComputeDetails.MountCreate.Steps.MountPath.Title,onChangeFriendlyName:function(e,t){var a=null!==t&&void 0!==t?t:"",r=Object(f.b)(z,a,!0);B(r?c.WizardStepState.Error:c.WizardStepState.CurrentStep),w(r),k(a)},friendlyName:y,friendlyNameErrorMessage:T,key:r.MountPath,state:R})))}},pIt4:function(e,t,a){"use strict";var r=a("k4Cn");a.d(t,"a",(function(){return r.a}))},pXM3:function(e,t,a){"use strict";var r=a("61CZ");a.d(t,"a",(function(){return r.a}))},poBQ:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return s}));var r=a("yjIu");function n(e,t){r.a.trackEvent(e,void 0,t)}function s(e){return e.data?e.data.value.length:void 0}},"q/cT":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return G}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("zjfJ"),i=a("Czhu"),c=a("9fIP"),u=a("MMYH"),l=a("8K1b"),d=a("AqVP"),p=a("WYY7"),m=a("cqFV"),h=a("67aH"),f=a("oziZ"),g=a("D0BB"),b=a("KodL"),D=a("7vdV"),S=a("d0cs"),v=a("auaj"),C=a("CjLF"),y=a("YlIK"),P=a("D2CC"),k=a("N8RY"),O=a("LeCu"),F=a("mqYf"),E=a("FINz"),T=a("+/5p"),w=a("ERkP"),j=a("XpkB"),x=a("D+ST"),N=a("J7yX"),M=a("byG2"),A=a("imaQ"),I=a("QlF2"),R=a("MfTv"),B=a("SF3I"),q=a("wlRP"),z=a("AjwC"),L=a("Bf+9"),V=(a("pkja"),a("ZIps")),U=a("Hsgl"),W=function(t){Object(l.a)(r,t);var a=Object(d.a)(r);function r(t){var u;return Object(c.a)(this,r),(u=a.call(this,t)).datasetClient=new x.a(u.props.authContext,u.props.workspaceContext),u.validationTimeout=void 0,u.updateParentDatasetRequestTimeout=void 0,u.updatePathFormField=function(e){if(void 0!==e){var t=u.state.formFields;t.path=e,u.onChangeFormFields(t)}},u.getState=function(e,t,a,r,n){if(!u.state||e!==u.state.nodeId){var s={nodeId:e,isValid:!1,showPreviewDatasetDialog:!1,showDatasetFileSettingsDialog:!1,parsingDataPath:!1,formFields:L.a.getDataPathProperties(t,a,r,n),datasetRequestDto:t};return s.formFields&&s.formFields.datastore&&u.state&&u.state.formFields&&u.state.formFields.datastore&&s.formFields.datastore.name===u.state.formFields.datastore.name&&(s.formFields.datastore=u.state.formFields.datastore),s}return u.state},u.onDataPathChange=function(e,t){u.updatePathFormField(t)},u.validateAndUpdateFormFields=function(t){u.validationTimeout&&clearTimeout(u.validationTimeout),u.updateParentDatasetRequestTimeout&&clearTimeout(u.updateParentDatasetRequestTimeout),u.datasetClient.abort();var a=u.validateFormFields(t);u.setState({isValid:!1,parsingDataPath:!1,parseDataPathError:void 0,formFields:t,errors:a}),a||(u.validationTimeout=e.setTimeout((function(){u.state.datasetRequestDto&&(u.state.datasetRequestDto.schema&&u.state.datasetRequestDto.schema.length>0?u.setState({isValid:!0,parsingDataPath:!1}):u.parseDataPath(u.state.datasetRequestDto))}),L.a.DATA_PATH_DEFERRED_VALIDATION_TIME))},u.onDataSourceChange=function(e,t){if(void 0!==t&&void 0!==t.data){var a=u.state.formFields;a.dataSource=t.data,a.datastore={},a.path="",u.onChangeFormFields(a)}},u.onBlur=function(e){var t=U.a.validateField(e,u.state.formFields[e],u.state.formFields.dataSource.dataSourceType,u.state.formFields.datastore.dataStoreType);t&&u.setState((function(a){return{errors:Object(i.a)(Object(i.a)({},a.errors),{},Object(o.a)({},e,t))}}))},u.validateFormFields=function(e){return U.a.validateAll(e,e.dataSource.dataSourceType,e.datastore.dataStoreType)},u.checkDatasetRequestDtoSize=function(e){L.a.isTooLongDatasetRequest(e)&&u.setState({isValid:!1,parsingDataPath:!1,parseDataPathError:j.b.Dataset.DatasetBasicsPage.TooManyColumnsMessage})},u.onChangeFormFields=function(){var t=Object(s.a)(n.a.mark((function t(a){var r,s;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u.validationTimeout&&clearTimeout(u.validationTimeout),u.updateParentDatasetRequestTimeout&&clearTimeout(u.updateParentDatasetRequestTimeout),u.datasetClient.abort(),r={dataPath:L.a.getDataPathForDatasetService(a)},s=u.validateFormFields(a),u.setState({isValid:!1,parsingDataPath:!1,parseDataPathError:void 0,formFields:a,datasetRequestDto:r,errors:s}),u.updateParentDatasetRequestTimeout=e.setTimeout((function(){u.props.onChanged(r,a.datastore.dataStoreType),u.checkDatasetRequestDtoSize(r)}),L.a.DATA_PATH_DEBOUNCE_TIME),s||(u.validationTimeout=e.setTimeout((function(){return u.parseDataPath(r)}),L.a.DATA_PATH_DEFERRED_VALIDATION_TIME));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u.parseDataPath=function(){var e=Object(s.a)(n.a.mark((function e(t){var a,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.setState({parsingDataPath:!0}),e.next=3,u.datasetClient.parseDataset(t);case 3:(a=e.sent).status===h.a.Ok&&a.data?(u.setState({isValid:!0,datasetRequestDto:a.data,parsingDataPath:!1}),u.props.onChanged(a.data,u.state.formFields.datastore.dataStoreType),u.checkDatasetRequestDtoSize(t)):(a.status===h.a.Error&&(r=Object(N.a)(a.error,j.b.Data.Common.ErrorTitlePlaceholder).message),u.setState({parsingDataPath:!1,parseDataPathError:r}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u.onPreviewButtonClick=function(){u.setState({showPreviewDatasetDialog:!0})},u.onDismissPreviewDialog=function(){u.setState({showPreviewDatasetDialog:!1})},u.onSavePreviewDialogChange=function(e){u.setState({showPreviewDatasetDialog:!1,datasetRequestDto:e}),u.props.onChanged(e,u.state.formFields.datastore.dataStoreType),u.checkDatasetRequestDtoSize(e)},u.onShowDatasetFileSettingDialog=function(){u.setState({showPreviewDatasetDialog:!1,showDatasetFileSettingsDialog:!0})},u.onApplyFileSettingChange=function(e){u.setState({datasetRequestDto:e,showDatasetFileSettingsDialog:!1,showPreviewDatasetDialog:!0}),u.props.onChanged(e,u.state.formFields.datastore.dataStoreType),u.checkDatasetRequestDtoSize(e)},u.onDismissFileSettingDialog=function(){u.setState({showDatasetFileSettingsDialog:!1,showPreviewDatasetDialog:!0})},u.state=u.getState(u.props.nodeId,u.props.datasetRequestDto,u.props.datastoreType,u.props.overrideDatastoreName,u.props.overrideDataPath),u}return Object(u.a)(r,[{key:"componentDidMount",value:function(){this.state&&this.state.formFields&&this.state.formFields.dataSource&&this.state.formFields.dataSource.dataSourceType===A.b.Http&&this.validateAndUpdateFormFields(this.state.formFields)}},{key:"componentWillReceiveProps",value:function(e){this.setState(this.getState(e.nodeId,e.datasetRequestDto,e.datastoreType,e.overrideDatastoreName,e.overrideDataPath)),e.overrideDataPath&&e.overrideDataPath!==this.state.formFields.path&&this.updatePathFormField(e.overrideDataPath)}},{key:"render",value:function(){var e,t=this.props.themeContext.themeStyles;return w.createElement("div",null,this.state.parseDataPathError&&this.renderMessageBar(),w.createElement("div",{className:"dataset-basics-setting ".concat((e=t,Object(S.db)({selectors:{".dataStoreSetting textarea.empty-database-query-input":{backgroundColor:e.semanticColors.bodyFrameBackground,border:"1px solid ".concat(e.semanticColors.inputBorder)},".dataStoreSetting .database-query-monaco-editor":{border:"1px solid ".concat(e.semanticColors.inputBorder)}}})))},w.createElement("div",{className:"form-container"},w.createElement(M.a,{id:"dataSourceSelector",className:"module-param",required:!0,disabled:this.props.readOnly,initialSelectedDataSource:this.state.formFields.dataSource,onChange:this.onDataSourceChange}),this.renderDataSourceTypeSpecificContent(),this.renderValidationStatus(),this.renderDatasetPreviewButton(),this.state.showPreviewDatasetDialog&&this.renderDatasetPreviewDialog(),this.state.showDatasetFileSettingsDialog&&this.renderDatasetFileSettingsDialog())))}},{key:"renderDataSourceTypeSpecificContent",value:function(){if(this.state.formFields.dataSource)switch(this.state.formFields.dataSource.dataSourceType){case A.b.Http:return this.renderHttpType();case A.b.AzureDatastore:return this.renderAzureDatastoreType();default:return}}},{key:"renderHttpType",value:function(){var e=this.state.errors&&this.state.errors.path,t=void 0!==this.props.overrideDataPath;return w.createElement(z.a,{textFieldLabel:j.b.Dataset.DatasetBasicsPage.DataPath.Http.PathField,value:this.state.formFields.path,gpElement:this.props.dataPathCommonParameterComponent,readOnly:this.props.readOnly,applyGlobalParameter:t,errorMessage:e,onChange:this.onDataPathChange})}},{key:"renderAzureDatastoreType",value:function(){return w.createElement(q.a,{readOnly:this.props.readOnly,overrideDatastoreName:this.props.overrideDatastoreName,overrideDataPath:this.props.overrideDataPath,datastoreCommonParameterComponent:this.props.datastoreCommonParameterComponent,dataPathCommonParameterComponent:this.props.dataPathCommonParameterComponent,formFields:this.state.formFields,errors:this.state.errors,updatePathFormField:this.updatePathFormField,onChangeFormFields:this.onChangeFormFields,validateAndUpdateFormFields:this.validateAndUpdateFormFields,onBlur:this.onBlur})}},{key:"renderMessageBar",value:function(){return w.createElement("div",{className:V.a},w.createElement(v.a,{messageBarType:C.a.error,isMultiline:!1,truncated:!0},this.state.parseDataPathError))}},{key:"renderDatasetPreviewButton",value:function(){var e=this.props.readOnly||!this.state.isValid,t=this.props.readOnly||this.state.isValid;return w.createElement(y.a,{content:j.b.Dataset.DatasetBasicsPage.PreviewButtonTooltip,id:"previewSchemaTooltip",delay:P.a.zero,directionalHint:k.a.topCenter,hidden:t},w.createElement(O.a,{text:j.b.Dataset.DatasetBasicsPage.PreviewButtonText,onClick:this.onPreviewButtonClick,disabled:e,className:"ds-prev-button",ariaLabel:j.b.Dataset.DatasetBasicsPage.PreviewButtonText}))}},{key:"renderDatasetPreviewDialog",value:function(){if(this.state.isValid&&this.state.datasetRequestDto){var e=Object(I.g)(this.state.formFields.datastore.dataStoreType);return w.createElement(B.a,{requestDto:this.state.datasetRequestDto,hideParsingOptionsButton:e,onSaveButtonClick:this.onSavePreviewDialogChange,onCancelButtonClick:this.onDismissPreviewDialog,onShowFileSettingDialog:this.onShowDatasetFileSettingDialog})}}},{key:"renderDatasetFileSettingsDialog",value:function(){if(this.state.isValid&&this.state.datasetRequestDto)return w.createElement(R.a,{datasetRequest:this.state.datasetRequestDto,onApply:this.onApplyFileSettingChange,onDiscard:this.onDismissFileSettingDialog})}},{key:"renderValidationStatus",value:function(){return this.state.parsingDataPath?w.createElement(F.a,{label:j.b.Dataset.DatasetBasicsPage.ValidatingSpinner,size:E.a.small,ariaLive:"assertive",labelPosition:"right"}):this.state.isValid?w.createElement("div",{className:"ms-Spinner"},w.createElement(T.a,{iconName:p.a.Checked,className:"icon-check"}),w.createElement(m.a,{text:j.b.Dataset.DatasetBasicsPage.ValidatedMessage,className:"ds-validation-success"})):void 0}}]),r}(w.Component),G=Object(f.a)(Object(g.a)(Object(b.a)(Object(D.a)(W))))}).call(this,a("fRV1"))},q6lQ:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return p}));var r=a("LWCo"),n=a("QdS/"),s=a("ERkP"),o=a.n(s),i=a("XpkB"),c=a("1jtT"),u=a("B8aL"),l=a("60PN"),d=(a("M5pg"),function(e){if(p(e.fileFormat))return null;var t=o.a.useMemo((function(){var t=e.selectedDelimiter.Name===c.a.Custom.Name?e.customDelimiter:e.selectedDelimiter.Delimiter;return t?i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.UsageExample.replace(/\{delimiter\}/g,t):""}),[e.selectedDelimiter.Delimiter,e.customDelimiter]);return o.a.createElement(r.a,{horizontal:!0,horizontalAlign:"stretch",className:"dataset-delimiter-field"},o.a.createElement(r.a.Item,{grow:!0},o.a.createElement(u.a,{label:i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.Label,title:i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.Title,disabled:e.disabled,options:c.a.All,selectedOption:e.selectedDelimiter,onChange:function(t){e.onDelimiterChange(t)}})),function(e){if(e.selectedDelimiter.Name!==c.a.Custom.Name)return;var t=function(t,a){a!==e.customDelimiter&&e.onCustomDelimiterChange(a||"")};return o.a.createElement(r.a.Item,{grow:!1},o.a.createElement(n.a,{label:i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.CustomLabel,title:i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.CustomTitle,value:e.customDelimiter,disabled:e.disabled,className:"delimiter-custom-value",onChange:t,maxLength:1,onGetErrorMessage:m}))}(e),o.a.createElement(r.a.Item,{grow:!1},o.a.createElement(n.a,{label:i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.ExampleLabel,title:i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.ExampleTitle,value:t,readOnly:!0,disabled:!0,className:"delimiter-usage-example"})))});function p(e){return e.Name!==l.a.Delimited.Name}function m(e){return e.length?"":i.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Delimiter.CustomValueRequired}},qnky:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var r=a("zygG"),n=a("ERkP"),s=a("nsO7"),o=a("d0cs"),i=a("ctLR"),c=a("LWCo"),u=a("auaj"),l=a("IoOT"),d=a("WYY7"),p=a("WC4d"),m=a("s+9k"),h=a("SnOo"),f=(a("jF7p"),function(e){var t=n.useState(!1),a=Object(r.a)(t,2),f=a[0],g=a[1];var b=Object(o.X)(),D=Object(o.db)({padding:b.spacing.s1,height:e.height,display:!e.collapsible||f?"block":"none"}),S=Object(o.db)({boxShadow:"inset 0 -1px 0 rgba(204, 204, 204, .4)",width:"100%",paddingBottom:b.spacing.s1,paddingTop:b.spacing.s1}),v=Object(o.db)({fontSize:"16px",fontWeight:500,paddingLeft:"12px"}),C=Object(o.db)({boxShadow:b.effects.elevation4,width:"100%"}),y=f?"expand":"",P=e.collapsible?n.createElement(p.a,{onClick:function(){g(!f)}},n.createElement(c.a,{horizontal:!0,verticalAlign:"center",styles:{root:{fontSize:"16px",fontWeight:500,paddingLeft:"12px"}}},n.createElement(m.a,{name:d.a.ChevronDown,className:"property-pane-icon ".concat(y)}),n.createElement(i.a,{styles:{root:{paddingLeft:10}}},e.header))):n.createElement(i.a,{block:!0,className:v},e.header),k=e.noDataMessage||h.b.Common_PropertyPane_NoData;return n.createElement("div",{className:C},n.createElement("div",{className:S},P),Object(s.isEmpty)(e.children)?n.createElement(u.a,null,k):n.createElement("div",{className:D},n.createElement(l.a,{styles:{root:{position:"relative",height:"100%"}}},e.children)))})},r3ai:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var r=a("Czhu"),n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("a2uE"),p=a("fN3Q"),m=a("LsED"),h=a("l1iB"),f=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return Object(i.a)(this,a),t.call(this,e,{retryCount:r})}return Object(c.a)(a,[{key:"addRoleAssignment",value:function(){var e=Object(o.a)(s.a.mark((function e(t,a){var r,n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=Object(o.a)(s.a.mark((function e(){var r,o,i,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(p.v4)(),o=n.getScope(t),i=o.scope,c=o.subscriptionId,e.next=4,n.getClient(c);case 4:return u=e.sent,e.next=7,u.roleAssignments.create(i,r,a.properties);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",this.execute(r,h.a.DatastoreAddRoleAssignment));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"removeRoleAssignments",value:function(){var e=Object(o.a)(s.a.mark((function e(t,a){var r,n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=Object(o.a)(s.a.mark((function e(){var r,o,i,c,u,l,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getScope(t),o=r.scope,i=r.subscriptionId,e.next=3,n.getClient(i);case 3:return c=e.sent,u="principalId eq '".concat(a,"'"),e.next=7,c.roleAssignments.listForScope(o,{filter:u});case 7:return l=e.sent,d=l.filter((function(e){return e.scope===o&&void 0!==e.id})).map((function(e){return e.id})),p=d.map((function(e){if(e)return c.roleAssignments.deleteById(e)})),e.next=12,Promise.all(p);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.abrupt("return",this.execute(r,h.a.DatastoreRemoveRoleAssignment));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getClient",value:function(){var e=Object(o.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d.a,e.next=3,this.getTokenCredentials();case 3:return e.t1=e.sent,e.t2=t,e.t3=Object(r.a)({baseUri:m.a.config.azureManagementEndpoint},this.serviceClientOptions),e.abrupt("return",new e.t0(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getScope",value:function(e){switch(e.dataStoreType){case"AzureBlob":case"AzureDataLakeGen2":return this.getStorageScope(e.azureStorageSection);case"AzureSqlDatabase":return this.getSqlScope(e.azureSqlDatabaseSection);case"AzureDataLake":return this.getDataLakeScope(e.azureDataLakeSection);default:throw new Error("Unrecognized dataStoreType found: ".concat(e.dataStoreType))}}},{key:"getStorageScope",value:function(e){var t=e||{},a=t.subscriptionId,r=t.resourceGroup,n=t.accountName;if(!a||!r||!n)throw new Error("Required parameters not set for azureStorageSection: ".concat(e));return{scope:"/subscriptions/".concat(a,"/resourceGroups/").concat(r,"/providers/Microsoft.Storage/StorageAccounts/").concat(n),subscriptionId:a}}},{key:"getSqlScope",value:function(e){var t=e||{},a=t.subscriptionId,r=t.resourceGroup,n=t.serverName;if(!a||!r||!n)throw new Error("Required parameters not set for azureSqlDatabaseSection: ".concat(e));return{scope:"/subscriptions/".concat(a,"/resourceGroups/").concat(r,"/providers/Microsoft.Sql/Servers/").concat(n),subscriptionId:a}}},{key:"getDataLakeScope",value:function(e){var t=e||{},a=t.subscriptionId,r=t.resourceGroup,n=t.storeName;if(!a||!r||!n)throw new Error("Required parameters not set for azureDataLakeSection: ".concat(e));return{scope:"/subscriptions/".concat(a,"/resourceGroups/").concat(r,"/providers/Microsoft.DataLakeStore/Accounts/").concat(n),subscriptionId:a}}}]),a}(a("oVcu").a)},r6fu:function(e,t,a){"use strict";a.r(t);var r=a("mWHq");a.d(t,"DatasetCreateByUpload",(function(){return r.a}));var n=a("UbA/");for(var s in n)["default","DatasetCreateByUpload"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);var o=a("J0T9");a.d(t,"DatasetCreateByUploadPanel",(function(){return o.a}))},rfBJ:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("Czhu"),n=a("9fIP"),s=a("MMYH"),o=a("8K1b"),i=a("AqVP"),c=a("ERkP"),u=a("Z4wB");function l(e){var t,a;return a=t=function(t){Object(o.a)(u,t);var a=Object(i.a)(u);function u(e){var t;return Object(n.a)(this,u),(t=a.call(this,e)).context=void 0,t}return Object(s.a)(u,[{key:"render",value:function(){var t=Object(r.a)({},this.props);return t.cesSurveyContext=t.cesSurveyContext||this.context,c.createElement(e,t)}}]),u}(c.Component),t.contextType=u.a,a}},s4c5:function(e,t,a){"use strict";var r=a("4js/");a.d(t,"a",(function(){return r.a}));var n=a("NmpN");a.d(t,"b",(function(){return n.a}))},sM9X:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return c}));var r=a("cqFV"),n=a("QdS/"),s=a("ERkP"),o=a("XpkB"),i=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=o.b.ComputeDetails.MountCreate.MountNameValiidation;if(t){if(!/^[a-zA-Z].*/.test(t))return r.StartWithLetter;if(!/^[0-9a-zA-Z_]*$/.test(t))return r.ValidCharacters;if(t.length<2||t.length>255)return r.Length;if(e.includes(t))return r.Duplicate}else if(a)return r.Required},c=function(e){return s.createElement(s.Fragment,null,s.createElement(r.a,{text:o.b.ComputeDetails.MountCreate.Steps.MountPath.MountFriendlyName,required:!0}),s.createElement(n.a,{ariaLabel:o.b.ComputeDetails.MountCreate.Steps.MountPath.MountFriendlyName,value:e.friendlyName,errorMessage:e.friendlyNameErrorMessage,onChange:e.onChangeFriendlyName,required:!0}))}},sTnw:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("ERkP"),n=a.n(r),s=a("3q6J"),o=a("XpkB"),i=function(e){var t=e.columnDefinition;return t.columnParsingError?n.a.createElement("span",{className:"ms-fontColor-error"},n.a.createElement(s.a,{content:t.columnParsingError},o.b.Data.DatasetCreateFromDatastore.Steps.Schema.ColumnParsingError)):n.a.createElement("span",null,t.preview)}},sgop:function(e,t){},"su4/":function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("WC4d"),c=a("s+9k"),u=a("WYY7"),l=a("LsED"),d=a("D0BB"),p=a("ERkP"),m=a.n(p),h=a("fvIy"),f=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props,t=e.storageObj,a=e.datastoreName,r=e.workspaceContext,n=t.subscriptionId,s=t.resourceGroup;if(a&&h.a.WellKnownDatastores.has(a)&&(n=r.subscriptionId,s=r.resourceGroupName),!n||!s||!t.accountName){var o=t.accountName||"";return m.a.createElement(m.a.Fragment,null,o)}var d="".concat(l.a.config.azurePortal,"/#resource/subscriptions/").concat(n,"/resourceGroups/").concat(s,"/providers/Microsoft.Storage/storageAccounts/").concat(t.accountName,"/overview");return m.a.createElement(i.a,{href:d,openNewWindow:!0},t.accountName," ",m.a.createElement(c.a,{name:u.a.NavigateExternalInline}))}}]),a}(m.a.Component),g=Object(d.a)(f)},tB83:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var r=a("3q6J"),n=a("d0cs"),s=a("N8RY"),o=a("QdS/"),i=a("ERkP"),c=a("XpkB"),u=function(e){var t=Object(n.db)({selectors:{"div.ms-TooltipHost":{marginTop:0,display:"block"}}}),a=e.readOnly||e.applyGlobalParameter;return e.applyGlobalParameter?i.createElement("div",{className:t},i.createElement(r.a,{content:c.b.Dataset.DatasetBasicsPage.ApplyGlobalParameterHint,directionalHint:s.a.bottomAutoEdge},i.createElement(o.a,{label:e.textFieldLabel,name:e.name,value:e.value,placeholder:e.placeholder,title:e.title,description:e.description,onChange:e.onChange,disabled:a,required:!0,errorMessage:e.errorMessage,onBlur:e.onBlur,iconProps:{iconName:"Unknown"}}))):i.createElement(o.a,{label:e.textFieldLabel,name:e.name,value:e.value,placeholder:e.placeholder,title:e.title,description:e.description,onChange:e.onChange,disabled:a,errorMessage:e.errorMessage,onBlur:e.onBlur,required:!0})}},tOCB:function(e,t,a){"use strict";var r=a("VvDS");a.d(t,"b",(function(){return r.a}));var n=a("kXcn");a.d(t,"c",(function(){return n.a})),a.d(t,"k",(function(){return n.b})),a.d(t,"l",(function(){return n.c}));var s=a("m7Gs");a.d(t,"a",(function(){return s.a}));var o=a("1EQY");a.d(t,"d",(function(){return o.a})),a.d(t,"e",(function(){return o.b})),a.d(t,"f",(function(){return o.c})),a.d(t,"g",(function(){return o.d})),a.d(t,"h",(function(){return o.e})),a.d(t,"i",(function(){return o.f})),a.d(t,"j",(function(){return o.g}))},tsep:function(e,t,a){"use strict";a.d(t,"a",(function(){return $}));var r=a("VtSi"),n=a.n(r),s=a("Czhu"),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("aWnM"),p=a("Opk0"),m=a("k0yv"),h=a("kgxj"),f=a("D0BB"),g=a("zQeN"),b=a("oziZ"),D=a("IoOT"),S=a("3gSQ"),v=a("ERkP"),C=a.n(v),y=a("7nmT"),P=a.n(y),k=a("NiBv"),O=a("XpkB"),F=a("60PN"),E=a("QlF2"),T=a("Q7Ad"),w=a("+IlW"),j=a("/zZg"),x=a("G3Bc"),N=a("QdS/"),M=a("3q6J"),A=function(e){var t=O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.HelpText.replace(/{ColumnVar}/g,O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.ColumnVar).replace(/{TimeVar}/g,O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.TimeVar).replace(/{NameVar}/g,O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.NameVar),a=O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.Placeholder.replace(/{ColumnVar}/g,O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.ColumnVar).replace(/{TimeVar}/g,O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.TimeVar).replace(/{NameVar}/g,O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.NameVar);return C.a.createElement(M.a,{content:t,calloutProps:{gapSpace:5,directionalHint:11,isBeakVisible:!0,beakWidth:16}},C.a.createElement(N.a,{label:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PathPattern.Label,placeholder:a,value:e.pathPattern,onChange:function(t,a){e.onChange(a||"")},errorMessage:e.errorMessage,disabled:e.disabled,readOnly:e.readOnly}))},I=a("cqFV"),R=a("GGXT"),B=a("tSJw"),q=a("Ya8k"),z=a("XX0W"),L=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).onChange=function(e,t){r.props.onChange(t||"")},r.openBrowseDialog=function(){r.setState({browseOpened:!0})},r.dismissBrowserDialog=function(){r.setState({browseOpened:!1})},r.selectBrowsedPath=function(e){r.dismissBrowserDialog(),r.props.onChange(e)},r.state={browseOpened:!1},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.required,a=e.datastorePath,r=e.errorMessage,n=e.disabled,s=this.props.label||O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Label,o=this.props.placeholder||O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Label;return C.a.createElement("div",{className:this.props.className},C.a.createElement(I.a,{text:s,required:t}),this.renderBrowseDialog(),C.a.createElement(N.a,{name:"datasetPath",title:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Title,placeholder:o,value:a,errorMessage:r,disabled:n,onChange:this.onChange,description:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.HelpText}))}},{key:"renderBrowseDialog",value:function(){if(("AzureDataLakeGen2"!==this.props.datastore.dataStoreType||this.props.expContext.isEnabled(B.a.AdlsGen2DatastoreBrowsing))&&Object(E.k)(this.props.datastore,this.props.userAccessToken)){var e=this.props.browseButtonText||O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.BrowseButtonText;return C.a.createElement(C.a.Fragment,null,C.a.createElement(R.a,{text:e,ariaLabel:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.BrowseButtonLabel,disabled:this.props.disabled,primary:!0,style:{marginBottom:"10px"},className:"browse-button",onClick:this.openBrowseDialog}),C.a.createElement(z.a,{isOpened:this.state.browseOpened,defaultSelectedPath:this.props.datastorePath,onSelected:this.selectBrowsedPath,onDismiss:this.dismissBrowserDialog,datastore:this.props.datastore,userAccessToken:this.props.userAccessToken}))}}}]),a}(C.a.Component),V=Object(q.a)(Object(g.a)(L)),U=function(e){if(!e.datastore||!e.datastore.dataStoreType)return null;var t=e.datastore.dataStoreType,a=e.basicInfo,r=a.sqlQuery,n=a.datastorePath;return Object(E.g)(t)?C.a.createElement(N.a,{name:"datasetSqlQuery",label:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.SqlQuery.Label,title:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.SqlQuery.Title,placeholder:"SELECT * FROM DataTable;",required:!0,multiline:!0,value:r,errorMessage:e.errorMessage,onChange:function(t,a){e.onChange(a||"")},disabled:e.disabled,autoAdjustHeight:!0}):C.a.createElement(V,{datastorePath:n,datastore:e.datastore,disabled:e.disabled,errorMessage:e.errorMessage,required:!0,onChange:e.onChange,userAccessToken:e.userAccessToken})},W=a("WYY7"),G=a("KodL"),H=a("d0cs"),Q=a("hFsQ"),_=a("LWCo"),Y=a("r9HT"),X=a("YlIK"),K=Object(G.a)((function(e){var t=O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.QueryTimeout,a=Object(Q.a)("label"),r="".concat(e.queryTimeout),n=t.Label,s=t.Tooltip;return C.a.createElement(N.a,{label:n,title:n,type:"number",min:1,value:r,required:!1,onChange:function(t,a){e.onChange(a||"")},onRenderLabel:function(){return C.a.createElement(_.a,{horizontal:!0,verticalAlign:"center"},C.a.createElement(Y.a,{className:(t=e.themeContext.themeStyles,Object(H.db)({display:"inline-block",color:t.semanticColors.bodySubtext})),required:!1,id:a},n),s&&C.a.createElement(X.a,{content:s,delay:0},C.a.createElement(R.a,{style:{marginLeft:"4px",verticalAlign:"middle",color:e.themeContext.themeStyles.semanticColors.infoIcon},iconButtonSize:14,buttonType:R.b.Icon,iconName:W.a.Info,text:s})));var t},disabled:e.disabled,"aria-labelledby":a})})),J=a("CNWI"),Z=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).shouldSetFocus=!0,r.choiceGroupContainerRef=C.a.createRef(),r.advancedSettings=function(e,t,a,n,s,o){return!e&&t&&a.datastoreName?C.a.createElement(d.a,{title:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.AdvancedSettings},C.a.createElement(A,{pathPattern:a.pathPattern,onChange:r.getOnChangeEvent("pathPattern"),disabled:n,errorMessage:o.pathPattern}),C.a.createElement(p.a,{checked:s,label:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.PartitionFormatIgnoreError.Label,onChange:r.partitionFormatIgnoreErrorOnChange,disabled:n})):e&&t&&a.datastoreName?C.a.createElement(d.a,{title:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.AdvancedSettings},C.a.createElement(K,{queryTimeout:a.queryTimeout,disabled:n,onChange:r.getOnChangeEvent("queryTimeout")})):null},r.onCreateNewDatastoreSuccess=function(){r.props.onCreateNewDatastoreSuccess()},r.onDatastoreSelectionChoiceChange=function(e){r.props.onDatastoreSelectionChoiceChange(e),e===j.b.Existing&&r.getOnChangeEvent("datastoreName")(r.props.datastore&&r.props.datastore.name||"")},r.validateStep=Object(o.a)(n.a.mark((function e(){var t,a,o,i,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.datastore&&r.props.datastore.dataStoreType,a=r.props.datastore&&r.props.datastore.name,o=Object(E.i)(r.props.datasetRequest,t),e.next=5,x.a.validateAll(o,r.props.datastoreSelectionChoice,a,t,!0);case 5:if(i=e.sent,r.props.onError(i||{}),!i){e.next=9;break}return e.abrupt("return",!1);case 9:if(!r.shouldParse()){e.next=17;break}return e.next=12,r.props.parseDataset(r.props.datasetRequest);case 12:if(e.sent){e.next=15;break}return e.abrupt("return",!1);case 15:e.next=18;break;case 17:r.props.skipValidation&&(r.props.datasetRequest.sourceProperties||((c=Object(s.a)({},r.props.datasetRequest)).sourceProperties={dataSourceType:F.a.Plain.Name},r.props.onChange(c)));case 18:return e.abrupt("return",!0);case 19:case"end":return e.stop()}}),e)}))),r.shouldParse=function(){return r.props.isSchemaUpdate||!r.props.skipValidation&&r.props.datasetRequest.datasetType===k.a.datasetTypes().TabularDataset.Enum&&!r.props.datasetRequest.general&&!r.props.datasetRequest.schema&&!r.props.datasetRequest.columnsToRemove},r.partitionFormatIgnoreErrorOnChange=function(){r.props.partitionFormatIgnoreErrorOnChange()},r.onExistingDatastoreChange=function(){var e=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.useUserCredentialsForDatastore(t)){e.next=5;break}return e.next=3,r.props.authContext.getToken(Object(E.d)());case 3:a=e.sent,r.setState({userAccessToken:a});case 5:r.props.onDatastoreSelected(t),r.getOnChangeEvent("datastoreName",t&&t.dataStoreType)(t&&t.name||"");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.useUserCredentialsForDatastore=function(e){return void 0!==e&&"AzureBlob"===e.dataStoreType&&void 0!==e.azureStorageSection&&"None"===e.azureStorageSection.credentialType&&!e.azureStorageSection.credential&&!e.azureStorageSection.clientCredentials},r.state={userAccessToken:void 0},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.datasetRequest,r=e.datastoreType,n=e.errors,s=e.loading,o=e.datastoreSelectionChoice,i=e.allowedDatastoreTypes,c=e.datastore,u=e.defaultDatastore,l=e.workspaceblobstore,d=e.isSchemaUpdate,p=e.allowDatastoreChange,f=Object(E.i)(a,r),g=Object(E.g)(r),b=a.datasetType===k.a.datasetTypes().TabularDataset.Enum,v=g?this.getOnChangeEvent("sqlQuery",r):this.getOnChangeEvent("datastorePath",r),y=g?n.sqlQuery:n.datastorePath,P=!!(a&&a.dataPath&&a.dataPath.partitionFormatIgnoreError);this.unsetWizardErrorState();var O=a.datasetType===k.a.datasetTypes().FileDataset.Enum?k.a.SupportedDatastoreTypesForFileTypeDataset:k.a.SupportedDatastoreTypesForTabularTypeDataset;i&&i.length>0&&(O=O.filter((function(e){return i.includes(e)})));var F=s,T=F||d||!p;return C.a.createElement(m.a,{title:t},C.a.createElement(D.a,{className:"datastore-selection-step-pane"},C.a.createElement(S.a,null,C.a.createElement(w.a,{datastore:c,accessToken:this.state.userAccessToken,warnFor:w.b.Browse}),C.a.createElement(h.MessageBar,{messages:this.props.bannerMessages,onDismiss:this.props.bannerMessagesOnDismiss})),C.a.createElement("div",{className:"datastore-selection-datastore-step-content"},C.a.createElement("div",{ref:this.choiceGroupContainerRef},C.a.createElement(j.a,{disableDatastoreTypeInNewForm:!p,defaultDatastore:u,workspaceblobstore:l,datastore:c,disableExistingDatastoreField:T,datastoreSelectionChoice:o,onDatastoreSelectionChoiceChange:this.onDatastoreSelectionChoiceChange,onExistingDatastoreChange:this.onExistingDatastoreChange,existingDatastoreName:f.datastoreName,onCreateNewDatastoreSuccess:this.onCreateNewDatastoreSuccess,onCreateNewDatastoreError:this.props.onCreateNewDatastoreError,datastoreChoiceErrorMessage:this.props.errors.datastoreName,onDatastoreCreateFormValuesChange:this.props.onDatastoreCreateFormValuesChange,datastoreCreateFormValues:this.props.datastoreCreateFormValues,datasetType:a.datasetType,allowedDatastoreTypes:O,isValidating:this.props.isValidating,onCancel:this.props.onCancel})),C.a.createElement(U,{basicInfo:f,datastore:c,onChange:v,errorMessage:y,disabled:F||d,userAccessToken:this.state.userAccessToken}),this.props.datasetRequest.datasetType===k.a.datasetTypes().TabularDataset.Enum&&C.a.createElement(J.a,{hidden:d,checked:this.props.skipValidation,onChange:this.props.onSkipValidationCheckboxChange,disabled:F}),this.advancedSettings(g,b,f,F,P,n))))}},{key:"componentDidMount",value:function(){var e=Object(o.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.shouldSetFocus&&this.choiceGroupContainerRef.current&&(t=P.a.findDOMNode(this.choiceGroupContainerRef.current))&&t instanceof Element&&(a=t.querySelector("div.previous-datastore-choice-group > label"))&&(a.focus(),this.shouldSetFocus=!1),!this.useUserCredentialsForDatastore(this.props.datastore)){e.next=8;break}return e.t0=this,e.next=5,this.props.authContext.getToken(Object(E.d)());case 5:e.t1=e.sent,e.t2={userAccessToken:e.t1},e.t0.setState.call(e.t0,e.t2);case 8:this.props.setValidateCallback(this.validateStep);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.setValidateCallback()}},{key:"unsetWizardErrorState",value:function(){if(this.props.unsetWizardErrorState){var e=!1;Object.values(this.props.errors).forEach((function(t){e=e||!!t})),e||this.props.unsetWizardErrorState(T.a.DatastoreSelection)}}},{key:"getOnChangeEvent",value:function(e,t){var a=this;return function(){var r=Object(o.a)(n.a.mark((function r(s){var o,i,c;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=Object(E.b)(a.props.datasetRequest,e,s,t),a.props.datasetRequest!==o&&a.props.onChange(o),i=a.props.datastore&&a.props.datastore.name,r.next=5,x.a.errorsReducer(a.props.errors,e,s,a.props.datastoreSelectionChoice,i,t);case 5:c=r.sent,a.props.clearDatasetTraitMap(),c!==a.props.errors&&a.props.onError(c);case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}}]),a}(C.a.Component),$=Object(f.a)(Object(g.a)(Object(b.a)(Z)))},uhdc:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var r,n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("q4h2"),p=a("r3ai"),m=a("67aH"),h=a("DvOE"),f=a("1eWE"),g=a("sOq8"),b=a("oziZ"),D=a("D0BB"),S=a("h2hN"),v=a("auaj"),C=a("CjLF"),y=a("ERkP"),P=a("yjIu"),k=a("XpkB"),O=a("J7yX"),F=a("ZYzI"),E=a("d0cs"),T=Object(E.db)("newds-modal new-ds-dialog",{selectors:{"div.ms-Modal-scrollableContent div.modal-content":{overflow:"hidden",selectors:{".modal-header":{paddingRight:"24px"},form:{width:"100%",selectors:{"> div:first-child":{right:"12px",overflow:"auto",height:"480px",selectors:{".ms-Stack.form-fields":{paddingBottom:"20px",width:"480px"}}},"> div:last-child":{borderTop:"none"},".form-action-bar":{selectors:{".ms-StackItem":{marginRight:"0",marginLeft:"8px"}}},".form-field .combo-box-container .error-placeholder":{display:"none"}}}}}}});!function(e){e.Preparing="Preparing",e.Creating="Creating",e.Success="Success",e.Failed="Failed"}(r||(r={}));var w=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).datastoreClient=void 0,n.getEditForm=function(){return y.createElement("div",null,n.state.status===r.Failed&&y.createElement(v.a,{messageBarType:C.a.error,className:"new-ds-error"},n.state.errorMessage),y.createElement(F.a,{createSource:"Designer",primaryButtonText:k.b.Datastore.NewDatastoreDialog.CreateButtonText,width:"100%",onCancel:n.onDismissDialog,dispatchPayload:n.dispatchPayload,onChange:n.onValueChange}))},n.addRoleAssignments=function(){var e=Object(o.a)(s.a.mark((function e(t,a){var o,i,c,u,l,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.workspaceContext.identityPrincipalId){e.next=3;break}return n.setState({status:r.Failed,errorMessage:k.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.ErrorMessage.LegacyWorkspace}),e.abrupt("return",!1);case 3:o=new p.a(n.props.authContext),i=0,c=Object.values(t);case 5:if(!(i<c.length)){e.next=17;break}return u=c[i],l={properties:{roleDefinitionId:"/subscriptions/".concat(n.props.workspaceContext.subscriptionId)+"/resourceGroups/".concat(n.props.workspaceContext.resourceGroupName)+"/providers/Microsoft.MachineLearningServices/workspaces/"+"".concat(n.props.workspaceContext.workspaceName)+"/providers/Microsoft.Authorization/roleDefinitions/".concat(u),principalId:n.props.workspaceContext.identityPrincipalId}},e.next=10,o.addRoleAssignment(a,l);case 10:if((d=e.sent)&&(d.status!==m.a.Error||d.errorResponse&&409===d.errorResponse.status)){e.next=14;break}return n.setState({status:r.Failed,errorMessage:k.b.Datastore.DatastoreEditPage.CommonFields.WorkspaceManagedIdentity.ErrorMessage.NoPermission}),e.abrupt("return",!1);case 14:i++,e.next=5;break;case 17:return e.abrupt("return",!0);case 18:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.dispatchPayload=function(){var e=Object(o.a)(s.a.mark((function e(t,a,o){var i,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({status:r.Creating}),!t.name){e.next=8;break}return e.next=4,n.datastoreClient.exists(t.name);case 4:if((i=e.sent).status!==m.a.Ok||!i.data||!i.data.body){e.next=8;break}return n.setState({status:r.Failed,errorMessage:k.b.Datastore.NewDatastoreDialog.CommonFields.DatastoreName.ValidationErrors.DatastoreExists.replace("{datastoreName}",t.name)}),e.abrupt("return");case 8:if(!a){e.next=26;break}e.t0=t.dataStoreType,e.next="AzureBlob"===e.t0?12:"AzureDataLakeGen2"===e.t0||"AzureDataLake"===e.t0||"AzureSqlDatabase"===e.t0?19:26;break;case 12:return e.next=14,n.addRoleAssignments([h.a.Reader,h.a.StorageBlobDataReader],t);case 14:if(e.sent||!o){e.next=18;break}return o(),e.abrupt("return");case 18:return e.abrupt("break",26);case 19:return e.next=21,n.addRoleAssignments([h.a.Reader],t);case 21:if(e.sent||!o){e.next=25;break}return o(),e.abrupt("return");case 25:return e.abrupt("break",26);case 26:return e.next=28,n.datastoreClient.createDatastore(t);case 28:(c=e.sent).status===m.a.Ok?(n.props.onCreateDataStoreSuccess(t),n.setState({status:r.Success})):(u=k.b.Datastore.NewDatastoreDialog.CreateFailedMessage,c.error&&(u=Object(O.a)(c.error,k.b.Data.Common.ErrorTitlePlaceholder).message),n.setState({status:r.Failed,errorMessage:u})),o&&o(),P.a.trackEvent(f.a.DatastoreCreateResult,void 0,{status:"".concat(c.status),type:"".concat(t.dataStoreType)});case 32:case"end":return e.stop()}}),e)})));return function(t,a,r){return e.apply(this,arguments)}}(),n.onDismissDialog=function(){n.setState({status:r.Preparing,errorMessage:void 0}),n.props.onDismiss()},n.onValueChange=function(){n.state.status!==r.Preparing&&n.setState({status:r.Preparing})},n.state={status:r.Preparing},n.datastoreClient=new g.a(n.props.authContext,n.props.workspaceContext),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.getEditForm(),t={title:k.b.Datastore.NewDatastoreDialog.Title};return y.createElement(d.a,{isOpen:this.props.showDialog,isBlocking:!0,content:e,localeText:t,onDismiss:this.onDismissDialog,className:T,width:"560px",height:"640px"})}}]),a}(y.Component),j=Object(b.a)(Object(D.a)(Object(S.a)(w)))},v2p0:function(e,t,a){"use strict";a.d(t,"b",(function(){return Z})),a.d(t,"a",(function(){return ue}));var r=a("2h71"),n=a("zjfJ"),s=a("Czhu"),o=a("VtSi"),i=a.n(o),c=a("QsI/"),u=a("9fIP"),l=a("MMYH"),d=a("8K1b"),p=a("AqVP"),m=a("kgxj"),h=a("67aH"),f=a("yiDG"),g=a("jeyl"),b=a("1eWE"),D=a("LuYi"),S=a("zQeN"),v=a("SiIB"),C=a("oziZ"),y=a("/YEa"),P=a("D0BB"),k=a("7vdV"),O=a("nsO7"),F=a.n(O),E=a("wgY5"),T=a.n(E),w=a("LWCo"),j=a("ERkP"),x=a.n(j),N=a("NTZG"),M=a("JywU"),A=a("XpkB"),I=a("D+ST"),R=a("J7yX"),B=a("poBQ"),q=a("QlF2"),z=(a("7K77"),a("Daup")),L=a("k0yv"),V=a("cqFV"),U=a("WC4d"),W=a("FABw"),G=a("VG0i"),H=a("LsED"),Q=a("ctLR"),_=a("QdS/"),Y=a("Y2j4"),X=a("Mdj6"),K=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).selectedSubPath=function(e,t){var a;if(t){var n=r.state.subPathOption.find((function(e){return e.key===t.key})),s="";n&&(a=n.key,s="https://azureopendatastorage.blob.".concat(H.a.config.azureStorageApiEndpoint,"/mnist/processed/dataset_filter=").concat(a,"/*.csv")),r.setState({subPathSelectedKey:t.key}),r.props.setDatasetHttpUrl(s),r.props.setFilters("dataset_filter",t.key)}},r.selectedDatasetRegisterType=function(e,t){t&&(r.setState({propertySelectedKey:t.key}),r.props.setDatasetRegisterType(t.key))},r.state={subPathOption:[{key:"all",text:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.SubSet.All},{key:"train",text:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.SubSet.Train},{key:"test",text:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.SubSet.Test}],subPathSelectedKey:"all",propertiesOption:[{key:"tabular",text:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.RegisterDataType.Tabular},{key:"file",text:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.RegisterDataType.File}],propertySelectedKey:"tabular"},r.props.setFilters("dataset_filter",r.state.subPathSelectedKey),r}return Object(l.a)(a,[{key:"render",value:function(){return x.a.createElement("div",{className:"datasetFilter",tabIndex:0},x.a.createElement(Q.a,{className:"filterTitle"},A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.FilterOptions),x.a.createElement(V.a,{text:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.FilterLabel}),x.a.createElement("div",{className:"csvSelectScope"},x.a.createElement(X.a,{label:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.SubSet.Title,options:this.state.subPathOption,onChange:this.selectedSubPath,selectedKey:this.state.subPathSelectedKey}),x.a.createElement(X.a,{label:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.RegisterDataType.Title,options:this.state.propertiesOption,onChange:this.selectedDatasetRegisterType,selectedKey:this.state.propertySelectedKey})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{subPathOption:t.subPathOption.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{disabled:e.creating})})),propertiesOption:t.propertiesOption.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{disabled:e.creating})}))}}}]),a}(x.a.Component),J=function(){function e(){Object(u.a)(this,e)}return Object(l.a)(e,null,[{key:"getSubPageTitleWithLink",value:function(e){return x.a.createElement("p",{className:"subTitleScope",tabIndex:0},x.a.createElement(U.a,{href:this.getSubTitleInfo("homepageLink"),openNewWindow:!0},this.getSubTitleInfo("homePageWords")),this.getSubTitleInfo("subTitlePart1"),x.a.createElement(U.a,{href:this.getSubTitleInfo("registerLinK"),openNewWindow:!0},this.getSubTitleInfo("registerWords")),this.getSubTitleInfo("subTitlePart2"),e.isEnabled(D.a.DatasheetsFlight)&&this.getSubTitleInfo("subTitlePart3"))}}]),e}();J.getSubTitleInfo=function(e){var t="".concat(H.a.config.docsBaseUrl,"/azure/machine-learning/service/how-to-create-register-datasets"),a="".concat(H.a.config.azureBaseUrl,"/services/open-datasets/");switch(e){case"homepageLink":return a;case"homePageWords":return A.b.Data.DatasetCreateFromOpenDatasets.PageSubTitle.WordsToHomepage;case"registerLinK":return t;case"registerWords":return A.b.Data.DatasetCreateFromOpenDatasets.PageSubTitle.WordsToRegister;case"subTitlePart1":return A.b.Data.DatasetCreateFromOpenDatasets.PageSubTitle.SubTitlePart1;case"subTitlePart2":return A.b.Data.DatasetCreateFromOpenDatasets.PageSubTitle.SubTitlePart2;case"subTitlePart3":return A.b.Data.DatasetCreateFromOpenDatasets.PageSubTitle.SubTitlePart3;default:return""}};var Z,$=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).defaultStartDate=void 0,r.setStartTime=function(e){r.props.setStartTime(e)},r.setEndTime=function(e){r.props.setEndTime(e)},r.onColumnScopeChanged=function(e,t){var a=e.columnName||"",n=t||"";r.props.setFilters(a,n)},r.state={startDateParameter:void 0,endDateParameter:void 0},r.defaultStartDate=T.a.utc().add(-30,"d").toDate(),r.defaultStartDate.setHours(0,0,0,0),r}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.creating||Boolean(this.props.datasetName&&this.props.datasetVersion),t=this.props.datasetVersion?"".concat(+this.props.datasetVersion+1):"1";return x.a.createElement(x.a.Fragment,null,x.a.createElement(z.a,null),x.a.createElement(L.a,{title:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.Title},J.getSubPageTitleWithLink(this.props.flightContext),x.a.createElement("div",{className:"registerName",tabIndex:0},x.a.createElement("div",{className:"registerLabel"},x.a.createElement(V.a,{text:A.b.Data.DatasetCreateFromOpenDatasets.Register}),x.a.createElement(U.a,{className:"registerLink",href:this.getLink(),openNewWindow:!0},this.props.selectedDatasetsName)),x.a.createElement(Y.a,{datasetName:this.props.registerDatasetName,datasetVersion:t,errorMessage:this.props.datasetRegisterNameErrorMessage,onNameChange:this.props.setRegisterDatasetName,disabled:e})),this.selectDataFormat(),this.isCreating()))}},{key:"selectDataFormat",value:function(){switch(this.props.selectedDatasetsId){case"sample-diabetes":return x.a.createElement(x.a.Fragment,null);case"mnist":return this.getCsvDatasetRegister();default:return this.getParquetRegister()}}},{key:"getCsvDatasetRegister",value:function(){return x.a.createElement(K,{creating:this.props.creating,setDatasetHttpUrl:this.props.setDatasetHttpUrl,setFilters:this.props.setFilters,setDatasetRegisterType:this.props.setDatasetRegisterType})}},{key:"getParquetRegister",value:function(){return x.a.createElement("div",{className:"datasetFilter",tabIndex:0},this.getDateTimeFilter(),this.getMoreFilters())}},{key:"isCreating",value:function(){return this.props.creating?x.a.createElement(W.a,{message:A.b.Data.DatasetCreateFromOpenDatasets.creating}):x.a.createElement(x.a.Fragment,null)}},{key:"getLink",value:function(){return"".concat(H.a.config.azureBaseUrl,"/services/open-datasets/catalog/")+this.props.selectedDatasetsSlug}},{key:"getDateTimeFilter",value:function(){if(this.props.filters?this.props.filters.find((function(e){return"DateTime"===e.columnType})):void 0)return this.props.startDateParameter||this.setStartTime(new Date(this.defaultStartDate)),x.a.createElement("div",{className:"datetimeFilter"},x.a.createElement(Q.a,{className:"filterTitle"},A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.FilterOptions),x.a.createElement(V.a,{text:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.FilterLabel}),x.a.createElement("div",{className:"timePickerScope"},x.a.createElement(G.a,{className:"timePicker",label:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.DatePickerStart,value:this.props.startDateParameter,onSelectDate:this.setStartTime,maxDate:this.props.endDateParameter||new Date,disabled:this.props.creating,allowTextInput:!0}),x.a.createElement(G.a,{className:"timePicker",label:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.DatePickerEnd,value:this.props.endDateParameter,onSelectDate:this.setEndTime,minDate:this.props.startDateParameter,disabled:this.props.creating,allowTextInput:!0})))}},{key:"getMoreFilters",value:function(){var e=this,t=this.props.filters;if(t&&0!==t.length)return t.map((function(t,a){if(t.columnType&&"string"===t.columnType)return x.a.createElement("div",{key:a},x.a.createElement(_.a,{className:"columnFilterScope",label:t.columnName,key:t.columnName,required:!1,onChange:function(a,r){e.onColumnScopeChanged(t,r)},disabled:e.props.creating}))}))}}]),a}(x.a.Component),ee=Object(S.a)($),te=a("xP+/"),ae=a("d0cs"),re=a("s+9k"),ne=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).onOptionClick=function(){r.props.selectedId===r.props.item.id?r.props.setSelectedId(void 0):r.props.setSelectedId(r.props.item)},r.onKeyDown=function(e){13===e.keyCode&&(r.props.selectedId===r.props.item.id?r.props.setSelectedId(void 0):r.props.setSelectedId(r.props.item))},r.onLinkClick=function(e){e.stopPropagation()},r.state={isSelected:!1},r}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.item.name?"".concat(A.b.Data.DatasetCreateFromOpenDatasets.LearnMoreAboutLink.replace("{link}",this.props.item.name)):A.b.Data.DatasetCreateFromOpenDatasets.LinkTitle;return x.a.createElement(w.a.Item,null,x.a.createElement("div",{role:"button",className:this.getSelectedItem(),key:this.props.item.id,onClick:this.onOptionClick,onKeyDown:this.onKeyDown,tabIndex:0},x.a.createElement("div",{className:"titleScope",style:{color:this.getTitleColor()}},this.getTitle(),this.getSelectedIcon()),x.a.createElement("div",{className:"content"},this.props.item.desc||""),x.a.createElement("div",{className:"linkButton",role:"button",onClick:this.onLinkClick},x.a.createElement(U.a,{href:this.getLink(),openNewWindow:!0,"aria-label":e},A.b.Data.DatasetCreateFromOpenDatasets.LinkTitle))))}},{key:"componentDidMount",value:function(){var e=this.props.item.id===this.props.selectedId;this.setState({isSelected:e})}},{key:"getSelectedItem",value:function(){return this.state.isSelected?"dataset-OpenDatasets-Select-Cell ms-borderColor-blue":"dataset-OpenDatasets-Select-Cell ms-borderColor-blue--hover"}},{key:"getTitleColor",value:function(){var e=Object(ae.X)();return this.state.isSelected?e.palette.themePrimary:e.semanticColors.bodyText}},{key:"getTitle",value:function(){var e=this.props.item.name;return x.a.createElement("div",{className:"titleText",dangerouslySetInnerHTML:{__html:e}})}},{key:"getLink",value:function(){return"".concat(H.a.config.azureBaseUrl,"/services/open-datasets/catalog/")+this.props.item.slug}},{key:"getSelectedIcon",value:function(){return this.state.isSelected?x.a.createElement(re.a,{name:"CompletedSolid",className:"selectedLabel"}):x.a.createElement(x.a.Fragment,null)}}],[{key:"getDerivedStateFromProps",value:function(e){return e.item.id===e.selectedId?{isSelected:!0}:{isSelected:!1}}}]),a}(x.a.Component),se=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={datasetsList:[]},r}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return x.a.createElement("div",{className:"dataset-OpenDatasets-Select-Group"},this.getErrorMessage(),x.a.createElement(w.a,{horizontal:!0,className:"blocksScope"},this.state.datasetsList.map((function(t,a){return x.a.createElement(ne,{key:a,item:t,selectedId:e.props.selectedId,setSelectedId:e.props.setSelectedId})}))))}},{key:"componentDidMount",value:function(){var e=a.resetOpenDatasetList(this.props.selectedId,this.props,this.props.searchPart);this.setState({datasetsList:e})}},{key:"getErrorMessage",value:function(){return this.props.selectStepError?x.a.createElement(V.a,{text:A.b.Data.DatasetCreateFromOpenDatasets.SelectStep.ErrorMessage,className:"ms-fontColor-red"}):x.a.createElement(x.a.Fragment,null)}}],[{key:"getDerivedStateFromProps",value:function(e){return{datasetsList:a.resetOpenDatasetList(e.selectedId,e,e.searchPart)}}},{key:"resetOpenDatasetList",value:function(e,t,a){if(e||a){var n,o=new RegExp("(.*?)(".concat(O.escapeRegExp(a),")(.*)"),"i"),i=[],c=Object(r.a)(t.openDatasetsList);try{for(c.s();!(n=c.n()).done;){var u=n.value,l=u.name.match(o),d=Object(s.a)({},u),p=!1;l&&(p=!0,d.name="<span>".concat(l[1]||"",'<span style="font-weight:800">').concat(l[2],"</span>").concat(l[3]||"","</span>")),u.id===e&&(p=!0,d.name="<span><u>".concat(d.name,"</u></span>")),p&&i.push(d)}}catch(m){c.e(m)}finally{c.f()}return i}return t.openDatasetsList}}]),a}(x.a.Component),oe=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).onSearchChange=function(e,t){r.setState({searchPart:t})},r.state={selectedKey:0,searchPart:void 0,showFirst:!0},r}return Object(l.a)(a,[{key:"render",value:function(){return x.a.createElement("div",{className:"selectDatasetPage"},x.a.createElement(L.a,{title:A.b.Data.DatasetCreateFromOpenDatasets.SelectStep.Title},J.getSubPageTitleWithLink(this.props.flightContext),x.a.createElement("div",{className:"searchIdScope",tabIndex:0},x.a.createElement(V.a,{text:A.b.Data.DatasetCreateFromOpenDatasets.SelectStep.SelectLabel}),x.a.createElement(te.a,{placeholder:A.b.Data.DatasetCreateFromOpenDatasets.SelectStep.SearchPrompt,onChange:this.onSearchChange,disabled:this.props.loading,id:"SearchBox"}),this.getErrorMessage()),x.a.createElement(se,{key:"OptionsGroup",selectedId:this.props.selectedId,openDatasetsList:this.props.openDatasetsList,setSelectedId:this.props.setSelectedId,searchPart:this.state.searchPart,selectStepError:this.props.selectStepError}),this.props.loading&&x.a.createElement(W.a,{message:A.b.Data.DatasetCreateFromOpenDatasets.Load})))}},{key:"componentDidUpdate",value:function(){if(this.state.showFirst&&!this.props.selectedId){var e=document.getElementById("SearchBox");e&&(e.focus(),this.setState({showFirst:!1}))}}},{key:"getErrorMessage",value:function(){return this.props.getListFailed?x.a.createElement(V.a,{text:A.b.Data.DatasetCreateFromOpenDatasets.SelectStep.GetListFailed,className:"ms-fontColor-red"}):x.a.createElement(x.a.Fragment,null)}}]),a}(x.a.Component),ie=Object(S.a)(oe);!function(e){e.SelectStep="SelectStep",e.FilterStep="FilterStep"}(Z||(Z={}));var ce=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).datasheetLocations=[{id:"isd",url:"https://datasetestorage450ea9c46.blob.core.windows.net/public-datasheets-files/datasheet-noaa-isd.json"}],r.datasetClient=void 0,r.customHeaders={"x-ms-azureml-dataset-entry-point":"WorkspaceUI:OpenDataset"},r.wizardRef=x.a.createRef(),r.onDone=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({datasetRegisterNameErrorMessage:""}),t=r.getDatasetRequestDto(r.state),r.registerDataset(t);case 3:case"end":return e.stop()}}),e)}))),r.registerDataset=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,s,o,c,u,l,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.prev=1,r.props.messageContext.dismissAllMessages(),r.setState({creatingDataset:!0}),n=r.state.registeredName,e.next=7,r.addDatasheet(a);case 7:if("mnist"===r.state.selectedDatasetsId){e.next=13;break}return e.next=10,r.datasetClient.registerDatasetFromOpenDatasets(t,!0,r.customHeaders);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,r.datasetClient.registerDatasetFromDataPath(t,!0,!1,r.customHeaders);case 15:e.t0=e.sent;case 16:if(s=e.t0,a.status=s.status.toString(),r.setState({creatingDataset:!1}),s.status!==h.a.Error){e.next=23;break}throw o=M.a.addErrorCodeAndIsUserError("DatasetCreateFromOpenDatasets CreateDataset",Object(R.a)(s.error,A.b.Data.Common.ErrorTitlePlaceholder),["DatasetVersionExists","UserError"]),s.errorResponse&&o.isUserError&&r.setState({datasetRegisterNameErrorMessage:o.message}),s.errorMessage;case 23:r.props.onCreate&&s.data&&(u=A.b.Data.DatasetCreateFromOpenDatasets.SuccessMessage.replace("{datasetName}",t.name||""),l={title:A.b.Data.DatasetCreateFromOpenDatasets.SuccessTitle,messageType:f.c.Success,message:u},t.name&&(null===(c=s.data.latest)||void 0===c?void 0:c.versionId)&&(l.link={text:A.b.Data.DatasetCreateFromDatastore.ClickHereToJumpTo,to:r.props.routeContext.getFullPathTo(g.a.DatasetRegisterDetailsRoute,{datasetName:t.name,version:null===(d=s.data.latest)||void 0===d?void 0:d.versionId})}),s.data&&s.data.latest&&s.data.latest.versionId===r.props.datasetVersion&&(l.message=A.b.Data.DatasetCreateByWebUrlPage.SameDatasetSuccessMessage),r.props.messageContext.addMessage(l),r.setState({creatingDataset:!1}),a.datasetVersion=s.data.latest&&s.data.latest.versionId||"",r.props.onCreate({datasetId:s.data.datasetId,datasetName:n,versionId:F.a.isNil(s.data.latest)?"":s.data.latest.versionId})),r.trackEvent(b.a.DatasetCreateResult,a),e.next=31;break;case 27:throw e.prev=27,e.t1=e.catch(1),r.setState({creatingDataset:!1}),e.t1;case 31:case"end":return e.stop()}}),e,null,[[1,27]])})));return function(t){return e.apply(this,arguments)}}(),r.renderWizard=function(){var e=r.state,t=e.currentStepIndex,a=e.selectStepError,n=e.openDatasetsList,s=e.stepState;return x.a.createElement("div",{className:"dataset-create-from-opendatasets"},x.a.createElement(m.Wizard,{currentStepIndex:t,onCancel:r.onCancel,onDone:r.onDone,onStepWillLeave:r.onStepChanged,buttonsOptions:{doneDisabled:!r.isDoneEnabled(),navigationDisabled:!r.isNavigationEnabled()},ref:r.wizardRef},x.a.createElement(ie,{loading:r.state.loading,key:"SelectStep",title:A.b.Data.DatasetCreateFromOpenDatasets.SelectStep.Title,selectStepError:a,openDatasetsList:n,selectedId:r.state.selectedDatasetsId,setSelectedId:r.setSelectedId,state:s.SelectStep,getListFailed:r.state.getOpendatasetsListFailed}),x.a.createElement(ee,{registerDatasetName:r.state.registeredName,key:"FilterStep",title:A.b.Data.DatasetCreateFromOpenDatasets.FilterStep.Title,filters:r.state.filter,selectedDatasetsSlug:r.state.selectedDatasetsSlug,selectedDatasetsName:r.state.selectedDatasetsName,selectedDatasetsId:r.state.selectedDatasetsId,setRegisterDatasetName:r.setRegisterDatasetName,startDateParameter:r.state.openDatasetsRegister.startDateParameter,endDateParameter:r.state.openDatasetsRegister.endDateParameter,setStartTime:r.setStartTime,setEndTime:r.setEndTime,setFilters:r.setFilters,setDatasetHttpUrl:r.setDatasetHttpUrl,setDatasetRegisterType:r.setDatasetRegisterType,creating:r.state.creatingDataset,datasetRegisterNameErrorMessage:r.state.datasetRegisterNameErrorMessage,datasetName:r.props.datasetName,datasetVersion:r.props.datasetVersion})))},r.setRegisterDatasetName=function(e){var t=r.state.registeredName;t=e||"",r.setState({registeredName:t,datasetRegisterNameErrorMessage:""})},r.setStartTime=function(e){e&&r.setState({openDatasetsRegister:Object(s.a)(Object(s.a)({},r.state.openDatasetsRegister),{},{startDateParameter:e})})},r.setEndTime=function(e){e&&r.setState({openDatasetsRegister:Object(s.a)(Object(s.a)({},r.state.openDatasetsRegister),{},{endDateParameter:e})})},r.convertLocalDateToUTCDate=function(e){return e?T()(e).add(T()().utcOffset(),"m").toDate():e},r.setDatasetHttpUrl=function(e){r.setState({datasetHttpUrl:e})},r.setDatasetRegisterType=function(e){e&&r.setState({datasetRegisterType:e})},r.setFilters=function(e,t){var a=r.state.openDatasetsRegister;a.stringColumnEqualFilters[e]=t,r.setState({openDatasetsRegister:a})},r.onStepChanged=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.currentStepKey,o=t.currentStepIndex,void 0!==(c=t.nextStepIndex)&&a){e.next=5;break}return e.abrupt("return");case 5:if(!(c<o)){e.next=9;break}return r.setState((function(e){return{stepState:Object(s.a)(Object(s.a)({},e.stepState),{},Object(n.a)({},a,m.WizardStepState.NotStarted)),selectStepError:!1,currentStepIndex:c}})),e.abrupt("return");case 9:if(""!==r.state.selectedDatasetsId){e.next=12;break}return r.setState((function(e){return{stepState:Object(s.a)(Object(s.a)({},e.stepState),{},Object(n.a)({},a,m.WizardStepState.Error)),selectStepError:!0}})),e.abrupt("return");case 12:""!==r.state.selectedDatasetsId&&r.setState((function(e){return{stepState:Object(s.a)(Object(s.a)({},e.stepState),{},Object(n.a)({},a,m.WizardStepState.Completed)),selectStepError:!1}})),r.trackEvent(b.a.DatasetCreateNavigate,{currentStepKey:t.currentStepKey,nextStepKey:t.nextStepKey}),r.trackEvent(Object(q.e)(t.nextStepKey)),r.setState({currentStepIndex:c});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.setSelectedId=function(e){e?(r.props.onChange(),r.setState({selectedDatasetsId:e.id,selectedDatasetsSlug:e.slug,selectedDatasetsName:e.title,stepState:Object(s.a)(Object(s.a)({},r.state.stepState),{},{SelectStep:m.WizardStepState.Completed}),filter:e.filters,selectStepError:!1,openDatasetsRegister:{startDateParameter:void 0,endDateParameter:void 0,stringColumnEqualFilters:{}}})):r.setState({selectedDatasetsId:"",selectedDatasetsSlug:"",selectedDatasetsName:"",stepState:Object(s.a)(Object(s.a)({},r.state.stepState),{},{SelectStep:m.WizardStepState.NotStarted}),filter:[],selectStepError:!1})},r.onCancel=function(){r.trackEvent(b.a.DatasetCreateCancel,{onWizardStep:r.state.currentStepIndex.toString()}),r.props.messageContext.dismissAllMessages(),r.props.onDismiss()},r.getGeneralObject=function(e){var t=r.state.openDatasetsList.find((function(t){return t.id===e}));if(t&&t.filters){var a=t.filters.find((function(e){return"DateTime"===e.columnType}));if(a)return{properties:{"_TimeSeries_Column:FineGrainTimestamp_":a.columnName}}}return{}},r.validateDatasetRequestDto=function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({isValidating:!0}),a=Object(q.h)(t),e.next=4,N.BasicInfoValidation.validateAll(a,r.datasetClient,!!r.props.datasetName);case 4:if(n=e.sent,r.setState({isValidating:!1}),void 0===(s=void 0!==n?n.datasetName:void 0)){e.next=10;break}throw r.setState({datasetRegisterNameErrorMessage:s}),n;case 10:r.setState({datasetRegisterNameErrorMessage:""});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.trackEvent=function(e,t){var a,n=t||{};n.method="OpenDataset",n.createProviderSource=r.props.createProviderSource,n.wizardSessionId=null===(a=r.wizardRef.current)||void 0===a?void 0:a.getWizardSessionId(),Object(B.b)(e,n)},r.datasetClient=new I.a(r.props.authContext,r.props.workspaceContext),r.state={loading:!0,currentStepIndex:0,creatingDataset:!1,getOpendatasetsListFailed:!1,openDatasetsList:[],registeredName:e.datasetName||"",selectedDatasetsId:"",selectedDatasetsSlug:"",selectedDatasetsName:"",datasetHttpUrl:"https://azureopendatastorage.blob.core.windows.net/mnist/processed/dataset_filter=all/*.csv",datasetRegisterType:"tabular",filter:[],stepState:{SelectStep:m.WizardStepState.NotStarted,FilterStep:m.WizardStepState.NotStarted},selectStepError:!1,datasetRegisterNameErrorMessage:"",openDatasetsRegister:{startDateParameter:void 0,endDateParameter:void 0,stringColumnEqualFilters:{}},isValidating:!1},r}return Object(l.a)(a,[{key:"render",value:function(){return x.a.createElement(w.a,{horizontal:!1,horizontalAlign:"stretch",verticalAlign:"stretch",verticalFill:!0},x.a.createElement(w.a.Item,{grow:2},this.renderWizard()))}},{key:"componentDidUpdate",value:function(){var e=Object(c.a)(i.a.mark((function e(t,a){var r,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.localeContext.language===t.localeContext.language){e.next=3;break}return e.next=3,this.getOpenDatasetsList();case 3:r=this.getDatasetRequestDto(a),n=this.getDatasetRequestDto(this.state),JSON.stringify(r)!==JSON.stringify(n)&&this.validateDatasetRequestDto(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.trackEvent(b.a.DatasetCreateWizardLaunch),this.trackEvent(b.a.DatasetCreateWizardLaunchOpenDataset),e.next=4,this.getOpenDatasetsList();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isDoneEnabled",value:function(){return""!==this.state.selectedDatasetsId&&""!==this.state.registeredName&&""===this.state.datasetRegisterNameErrorMessage&&!this.state.isValidating&&!this.state.creatingDataset}},{key:"isNavigationEnabled",value:function(){return""!==this.state.selectedDatasetsId}},{key:"getOpenDatasetsList",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,a,n,s,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.datasetClient.listOpenDatasets(this.props.localeContext.language);case 3:if((a=e.sent).status===h.a.Ok&&a.data){n=a.data,s=Object(r.a)(n);try{for(s.s();!(o=s.n()).done;)(c=o.value).id&&c.slug&&c.name&&t.push({id:c.id,filters:c.filters,slug:c.slug,name:c.name,desc:c.description,title:c.name})}catch(i){s.e(i)}finally{s.f()}this.setState({openDatasetsList:t,loading:!1})}else this.setState({getOpendatasetsListFailed:!0,loading:!1});return e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDatasetRequestDto",value:function(e){var t={openDatasetsId:e.selectedDatasetsId,startDateParameter:this.convertLocalDateToUTCDate(e.openDatasetsRegister.startDateParameter),endDateParameter:this.convertLocalDateToUTCDate(e.openDatasetsRegister.endDateParameter),stringColumnEqualFilters:this.state.openDatasetsRegister.stringColumnEqualFilters},a=this.getGeneralObject(e.selectedDatasetsId);return"mnist"!==this.state.selectedDatasetsId||"file"!==this.state.datasetRegisterType?{isVisible:!0,name:e.registeredName,datasetType:e.datasetRegisterType,general:a,openDatasetsSection:t}:{isVisible:!0,dataPath:{httpUrl:e.datasetHttpUrl},datasetType:e.datasetRegisterType,name:e.registeredName,tags:{opendatasets:"mnist"},general:a}}},{key:"addDatasheet",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var a,r,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.flightContext.isEnabled(D.a.DatasheetsFlight)){e.next=10;break}if(!this.datasheetLocations.filter((function(e){return e.id===n.state.selectedDatasetsId})).length){e.next=10;break}return a={httpUrl:this.datasheetLocations[0].url,datasheetType:"MSR"},e.next=6,this.datasetClient.setDatasheetFromPath(this.state.registeredName,this.props.datasetVersion?String(Number(this.props.datasetVersion)+1):"1",a);case 6:if((r=e.sent).status!==h.a.Error){e.next=10;break}throw M.a.addErrorCodeAndIsUserError("DatasetCreateFromOpenDatasets SetDatasheetFromPath",Object(R.a)(r.error,A.b.Data.Common.ErrorTitlePlaceholder));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(x.a.Component),ue=Object(S.a)(Object(v.a)(Object(C.a)(Object(y.a)(Object(P.a)(Object(k.a)(ce))))))},vxEU:function(e,t,a){"use strict";a.r(t);var r=a("jk8v");a.d(t,"getPreviewBlockerMessage",(function(){return r.b})),a.d(t,"isUndetectableDataSourceType",(function(){return r.c})),a.d(t,"DatasetCreate",(function(){return r.a}));var n=a("r6fu");for(var s in n)["default","getPreviewBlockerMessage","isUndetectableDataSourceType","DatasetCreate"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);var o=a("s4c5");a.d(t,"DatasetCreateByWebUrl",(function(){return o.a})),a.d(t,"DatasetCreateByWebUrlPanel",(function(){return o.b}));var i=a("F1kx");a.d(t,"DatasetCreateFromDatastore",(function(){return i.a})),a.d(t,"DatasetCreateFromDatastorePanel",(function(){return i.b}));var c=a("VoT0");for(var s in c)["default","getPreviewBlockerMessage","isUndetectableDataSourceType","DatasetCreate","DatasetCreateByWebUrl","DatasetCreateByWebUrlPanel","DatasetCreateFromDatastore","DatasetCreateFromDatastorePanel"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return c[e]}))}(s);var u=a("Mrdb");a.d(t,"DatasetCreateProvider",(function(){return u.a}));var l=a("aoQp");for(var s in l)["default","getPreviewBlockerMessage","isUndetectableDataSourceType","DatasetCreate","DatasetCreateByWebUrl","DatasetCreateByWebUrlPanel","DatasetCreateFromDatastore","DatasetCreateFromDatastorePanel","DatasetCreateProvider"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return l[e]}))}(s);var d=a("CT81");a.d(t,"DatasetSelectOrCreate",(function(){return d.a}));var p=a("QlF2");a.d(t,"getAzureStorageTokenParameters",(function(){return p.d})),a.d(t,"getUserAccessTokenForDatastoreExplorer",(function(){return p.f})),a.d(t,"shouldRenderBrowseButtonForDatastoreExplorer",(function(){return p.k})),a.d(t,"isSqlBasedType",(function(){return p.g})),a.d(t,"filterDataStoreTypes",(function(){return p.c})),a.d(t,"datasetRequestReducerForBasicInfo",(function(){return p.a})),a.d(t,"datasetRequestReducerForDatastoreSelection",(function(){return p.b})),a.d(t,"mapToBasicInfoFormFields",(function(){return p.h})),a.d(t,"mapToDatastoreSelectionFormFields",(function(){return p.i})),a.d(t,"reduceSqlDataPath",(function(){return p.j})),a.d(t,"getNavigationEvent",(function(){return p.e}));var m=a("57/A");a.d(t,"getDefaultCsvRequest",(function(){return m.a})),a.d(t,"getDefaultTsvRequest",(function(){return m.c})),a.d(t,"getDefaultParquetRequest",(function(){return m.b}))},wU4H:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var r=a("in70"),n=a("Co5R"),s=a("ERkP"),o=a("XpkB"),i=a("PHYI"),c=(a("ELzw"),function(e){return s.createElement(r.a,{isOpen:e.isOpen,onDismiss:e.onDismiss,className:"mount-create-form-panel",panelType:n.a.medium,headerText:o.b.ComputeDetails.MountCreate.Wizard.StorageHeaderText,closeButtonAriaLabel:o.b.ComputeDetails.MountCreate.Wizard.ClosePanel},s.createElement(i.a,e))})},wlRP:function(e,t,a){"use strict";a.d(t,"a",(function(){return q}));var r=a("Czhu"),n=a("VtSi"),s=a.n(n),o=a("QsI/"),i=a("9fIP"),c=a("MMYH"),u=a("8K1b"),l=a("AqVP"),d=a("oziZ"),p=a("ERkP"),m=a.n(p),h=a("XpkB"),f=a("Xopk"),g=a("a+Fo"),b=a("QlF2"),D=a("cqFV"),S=a("LH/S"),v=a("KodL"),C=a("U1a3"),y=a("d0cs"),P=a("QdS/"),k=Object(y.db)("database-query-monaco-editor",{border:"1px solid #605E5C",borderRadius:"2px",backgroundColor:"#f4f4f4"}),O=Object(y.db)("database-query-monaco-editor",{border:"none",selectors:{".monaco-wrapper .monaco-editor .monaco-scrollable-element .view-lines .view-line span":{color:"#605E5C"}}}),F=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.readOnly?O:k,t={base:this.props.themeContext.theme===S.a.Light?"vs":"vs-dark",inherit:!0,colors:{},rules:[]};return p.createElement("div",{style:{width:"100%",height:"100%"},className:this.props.className},p.createElement(f.a,{label:h.b.Dataset.DatasetBasicsPage.DataPath.DatastoreType.Database.ButtonTitle,element:this.props.element,readOnly:this.props.readOnly,applyGlobalParameter:this.props.applyGlobalParameter,className:"edit-query-button",onClick:this.props.onClick}),p.createElement(D.a,{text:h.b.Dataset.DatasetBasicsPage.DataPath.DatastoreType.Database.PathField,required:!0}),this.props.query&&0!==this.props.query.length?p.createElement("div",{className:e},p.createElement(C.a,{theme:t,createOptions:{value:this.props.query,language:"sql",minimap:{enabled:!1},automaticLayout:!0,renderLineHighlight:"none",scrollBeyondLastLine:!1,showUnused:!1,readOnly:!0,autoIndent:!1,wordWrap:"on",scrollBeyondLastColumn:0,lineNumbers:"on",codeLens:!1,contextmenu:!1,cursorBlinking:"Hidden"}})):p.createElement(P.a,{defaultValue:h.b.Dataset.DatasetBasicsPage.DataPath.DatastoreType.Database.Placeholder,multiline:!0,readOnly:!0,inputClassName:"empty-database-query-input",errorMessage:this.props.errorMessage,onBlur:this.props.onBlur}))}}]),a}(p.Component),E=Object(v.a)(F),T=a("q4h2"),w=function(e){return Object(y.db)("modal-script-editor",{border:"1px solid ".concat(e.semanticColors.inputBorder),height:"420px"})},j=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).onSave=function(){r.props.onApply(r.state.sqlQuery),r.props.onDismiss(),r.setState({isQueryUpdated:!1})},r.onChange=function(e){r.setState({sqlQuery:e,isQueryUpdated:!0})},r.onDismiss=function(){r.props.onDismiss(),r.setState({sqlQuery:r.props.query,isQueryUpdated:!1})},r.state={sqlQuery:r.props.query,isQueryUpdated:!1},r}return Object(c.a)(a,[{key:"render",value:function(){var e={title:h.b.DatasetEditQueryDialog.Title,cancelButton:h.b.DatasetEditQueryDialog.CancelButton,confirmButton:h.b.DatasetEditQueryDialog.ConfirmButton},t=this.props.themeContext,a={base:t.theme===S.a.Light?"vs":"vs-dark",inherit:!0,colors:{},rules:[]},r=p.createElement("div",{className:w(t.themeStyles)},p.createElement(C.a,{theme:a,createOptions:{value:this.state.sqlQuery,language:"sql",minimap:{enabled:!1},automaticLayout:!0,renderLineHighlight:"none",scrollBeyondLastLine:!1,showUnused:!1,readOnly:!1,autoIndent:!0,scrollBeyondLastColumn:0,lineNumbers:"on",codeLens:!1,contextmenu:!1},onChange:this.onChange}));return p.createElement(T.a,{className:"dataset-edit-query visual-interface",isOpen:!0,isBlocking:!0,disabled:!this.state.isQueryUpdated,content:r,localeText:e,onDismiss:this.onDismiss,onPrimaryButtonClick:this.onSave})}}]),a}(p.Component),x=Object(v.a)(j),N=function(e){var t="".concat(e.queryTimeout),a=h.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.QueryTimeout.Label;return m.a.createElement(P.a,{label:a,title:a,type:"number",min:1,value:t,required:!1,onChange:function(t,a){e.onChange(a||"")}})},M=a("uhdc"),A=a("XX0W"),I=a("tB83"),R=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).onChange=function(e,t){r.props.onChange(t||"")},r.openBrowseDialog=function(){r.setState({browseOpened:!0})},r.dismissBrowserDialog=function(){r.setState({browseOpened:!1})},r.selectBrowsedPath=function(e){r.dismissBrowserDialog(),r.props.onChange(e)},r.state={browseOpened:!1},r}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.datastorePath,a=e.errorMessage,r=e.applyGlobalParameter,n=e.readOnly,s=this.props.label||h.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Label,o=this.props.placeholder||h.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Label;return m.a.createElement("div",{className:this.props.className},this.renderBrowseDialog(),m.a.createElement(I.a,{textFieldLabel:s,value:t,name:"datasetPath",placeholder:o,title:h.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.Title,errorMessage:a,readOnly:n,applyGlobalParameter:r,onChange:this.onChange,description:h.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.HelpText,onBlur:this.props.onBlur}))}},{key:"renderBrowseDialog",value:function(){var e=this.props,t=e.datastore,a=e.userAccessToken;if(!Object(b.k)(t,a))return this.props.element?m.a.createElement(m.a.Fragment,null,m.a.createElement(f.a,{element:this.props.element,className:"browse-link",readOnly:this.props.readOnly,applyGlobalParameter:this.props.applyGlobalParameter})):void 0;var r=this.props.browseButtonText||h.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Path.BrowseButtonText;return m.a.createElement(m.a.Fragment,null,m.a.createElement(f.a,{label:r,element:this.props.element,className:"browse-link",onClick:this.openBrowseDialog,readOnly:this.props.readOnly,applyGlobalParameter:this.props.applyGlobalParameter}),m.a.createElement(A.a,{isOpened:this.state.browseOpened,defaultSelectedPath:this.props.datastorePath,onSelected:this.selectBrowsedPath,onDismiss:this.dismissBrowserDialog,datastore:this.props.datastore,userAccessToken:this.props.userAccessToken}))}}]),a}(m.a.Component),B=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).showNewDatastoreDialog=function(){n.setState({showNewDatastoreDialog:!0})},n.dismissNewDatastoreDialog=function(){n.setState({showNewDatastoreDialog:!1})},n.onDatastoreLoading=function(){n.setState({loadingDatastore:!0,refreshDatastore:!1})},n.onDatastoreLoaded=function(){n.setState({loadingDatastore:!1,refreshDatastore:!1})},n.onDatastoreStart=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return");case 2:return(a=n.props.formFields).datastore=t,n.props.validateAndUpdateFormFields(a),e.next=7,Object(b.f)(n.props.authContext,t);case 7:r=e.sent,n.setState({userAccessToken:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onDataStoreChange=function(){var e=Object(o.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return");case 2:return(a=n.props.formFields).datastore=t,n.props.overrideDataPath||(a.path=""),n.props.onChangeFormFields(a),e.next=8,Object(b.f)(n.props.authContext,t);case 8:r=e.sent,n.setState({userAccessToken:r});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onDatastorePathFieldChange=function(e){n.props.updatePathFormField(e)},n.showEditQueryDialog=function(){n.setState({showEditQueryDialog:!0})},n.onDismissEditQueryDialog=function(){n.setState({showEditQueryDialog:!1})},n.saveSqlQuery=function(e){n.setState({showEditQueryDialog:!1}),n.props.updatePathFormField(e)},n.onSqlQueryTimeoutFieldChange=function(e){n.props.onChangeFormFields(Object(r.a)(Object(r.a)({},n.props.formFields),{},{queryTimeout:e}))},n.createDataStore=function(e){var t=n.props.formFields;t.datastore=e,n.setState({showNewDatastoreDialog:!1,refreshDatastore:!0}),n.props.onChangeFormFields(t)},n.state={loadingDatastore:!0,refreshDatastore:!1,showNewDatastoreDialog:!1,showEditQueryDialog:!1},n}return Object(c.a)(a,[{key:"render",value:function(){return p.createElement("div",{className:"dataStoreSetting"},this.renderDatastoreField(),!this.state.loadingDatastore&&this.props.formFields.datastore.name&&this.props.formFields.datastore.dataStoreType&&this.renderDataPathField(),!this.state.loadingDatastore&&this.props.formFields.datastore.name&&this.props.formFields.datastore.dataStoreType&&Object(b.g)(this.props.formFields.datastore.dataStoreType)&&this.renderSqlQueryTimeoutField(),this.state.showEditQueryDialog&&this.renderEditQueryDialog())}},{key:"renderDatastoreField",value:function(){var e=this,t=void 0!==this.props.overrideDatastoreName,a=this.props.errors&&this.props.errors.datastore;return p.createElement("div",{className:"datastore-field module-param"},!this.state.loadingDatastore&&p.createElement(f.a,{label:h.b.Datastore.NewDatastoreDialog.Title,element:this.props.datastoreCommonParameterComponent,readOnly:this.props.readOnly,applyGlobalParameter:t,className:"new-ds-button",onClick:this.showNewDatastoreDialog}),p.createElement(g.a,{label:h.b.Dataset.DatasetBasicsPage.DataSources.AzureDatastore.DatastoreField,readOnly:this.props.readOnly,filterDataStoreType:["AzureBlob","AzureFile","AzureDataLake","AzureSqlDatabase","AzurePostgreSql","AzureDataLakeGen2"],applyGlobalParameter:t,required:!0,selectedDataStore:this.props.formFields.datastore,text:this.props.overrideDatastoreName,hideWhenLoading:!0,onLoading:this.onDatastoreLoading,onLoaded:this.onDatastoreLoaded,onStart:this.onDatastoreStart,onChange:this.onDataStoreChange,onBlur:function(){e.props.onBlur("datastore")},errorMessage:a,refreshDataStoreList:this.state.refreshDatastore,disableAzureMlGlobalDatasets:!0}),this.renderNewDatastoreDialog())}},{key:"renderDataPathField",value:function(){var e=this,t=this.props.errors&&this.props.errors.path,a=Object(b.g)(this.props.formFields.datastore.dataStoreType),r=void 0!==this.props.overrideDataPath,n=function(){e.props.onBlur("path")};return p.createElement("div",{className:"data-path-field module-param"},a?p.createElement(E,{query:this.props.formFields.path,errorMessage:t,readOnly:this.props.readOnly,applyGlobalParameter:r,element:this.props.dataPathCommonParameterComponent,onClick:this.showEditQueryDialog,onBlur:n,className:"ds-data-base-query"}):p.createElement(R,{datastorePath:this.props.formFields.path,datastore:this.props.formFields.datastore,element:this.props.dataPathCommonParameterComponent,readOnly:this.props.readOnly,applyGlobalParameter:r,errorMessage:t,className:"browse-data-path-field",browseButtonText:h.b.Dataset.DatasetBasicsPage.DataPath.DatastoreType.BlobOrFile.ButtonTitle,onChange:this.onDatastorePathFieldChange,onBlur:n,userAccessToken:this.state.userAccessToken}))}},{key:"renderSqlQueryTimeoutField",value:function(){return p.createElement("div",{className:"sql-query-timeout-field module-param"},p.createElement(N,{queryTimeout:this.props.formFields.queryTimeout,onChange:this.onSqlQueryTimeoutFieldChange}))}},{key:"renderNewDatastoreDialog",value:function(){return p.createElement(M.a,{showDialog:this.state.showNewDatastoreDialog,onCreateDataStoreSuccess:this.createDataStore,onDismiss:this.dismissNewDatastoreDialog})}},{key:"renderEditQueryDialog",value:function(){return p.createElement(x,{query:this.props.formFields.path,onApply:this.saveSqlQuery,onDismiss:this.onDismissEditQueryDialog})}}]),a}(p.Component),q=Object(d.a)(B)},wln6:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("nsO7"),c=a.n(i),u=a("LWCo"),l=a("QdS/"),d=a("ERkP"),p=a.n(d),m=a("cqFV"),h=a("VW/F"),f=a("XpkB"),g=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).onNameChange=function(e,t){n.setState({value:t}),n.makeCallbacks(t)},n.makeCallbacks=function(e){n.props.onChange(e||"")},n.state={value:e.name},n.makeCallbacks=c.a.debounce(n.makeCallbacks,500),n}return Object(n.a)(a,[{key:"render",value:function(){return p.a.createElement(p.a.Fragment,null,p.a.createElement(u.a,{horizontal:!0,verticalAlign:"center"},p.a.createElement(m.a,{text:f.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Name.Label,required:!0}),p.a.createElement("div",{style:{marginLeft:"auto",marginRight:0}},p.a.createElement(h.a,null))),p.a.createElement(l.a,{name:"datasetName",placeholder:f.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Name.Placeholder,title:f.b.Data.DatasetCreateFromDatastore.Steps.BasicInfo.Fields.Name.Title,required:!0,value:this.state.value,onChange:this.onNameChange,errorMessage:this.props.errorMessage,disabled:this.props.disabled,autoFocus:this.props.autoFocus}))}},{key:"componentDidUpdate",value:function(e){this.props.name!==e.name&&this.setState({value:this.props.name})}}]),a}(p.a.PureComponent)},wrNU:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return l}));var r=a("ERkP"),n=a.n(r),s=a("XpkB"),o=a("B8aL"),i=a("le+F"),c=a("60PN"),u=function(e){return l(e.fileFormat)?null:n.a.createElement(o.a,{label:s.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Encoding.Label,title:s.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.Encoding.Title,disabled:e.disabled,onChange:e.onChange,options:i.a.All,selectedOption:e.selectedOption})};function l(e){return e.Name===c.a.Binary.Name||e.Name===c.a.Excel.Name||e.Name===c.a.ParquetFile.Name}},xdYj:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return D}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("nsO7"),c=a.n(i),u=a("LWCo"),l=a("QdS/"),d=a("ERkP"),p=a.n(d),m=a("XpkB"),h=a("PTrN"),f=a("B8aL"),g=a("60PN"),b=(a("/xWp"),function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).makeCallbacks=void 0,n.renderSkipRowsCount=function(){var e=n.props;if(e.selectedOption.Name!==h.a.None.Name){var t=n.state.value;return p.a.createElement(u.a.Item,{grow:!1,shrink:!1},p.a.createElement(l.a,{label:m.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.SkipRows.RowsCountLabel,title:m.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.SkipRows.RowsCountTitle,className:"dataset-skip-rows-count",type:"number",min:1,value:t,onChange:n.onChange,disabled:e.disabled}))}},n.onChange=function(e,t){var a=t?Number.isInteger(+t)?+t:n.props.skipRowCount:0;n.setState({value:a.toString()}),n.makeCallbacks(a)},n.state={value:e.skipRowCount.toString()},n.makeCallbacks=c.a.debounce(n.props.onSkipRowCountChange,500),n}return Object(n.a)(a,[{key:"render",value:function(){var e=this.props,t=e.fileFormat,a=e.disabled,r=e.onChange,n=e.selectedOption;return!D(t)&&p.a.createElement(u.a,{horizontal:!0,horizontalAlign:"stretch"},p.a.createElement(u.a.Item,{grow:!0},p.a.createElement(f.a,{label:m.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.SkipRows.Label,title:m.b.Data.DatasetCreateFromDatastore.Steps.SettingsAndPreview.Fields.SkipRows.Title,disabled:a,onChange:r,options:h.a.All,selectedOption:n})),this.renderSkipRowsCount())}}]),a}(p.a.PureComponent));function D(e){return e.Name===g.a.Binary.Name||e.Name===g.a.JSON.Name}},z50s:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("d0cs"),d=a("uMNk"),p=a("+U0a"),m=a("ERkP"),h=a.n(m),f=a("WYY7"),g=a("o5+l"),b=a("GGXT"),D=a("67aH"),S=a("sOq8"),v=a("oziZ"),C=a("D0BB"),y=a("7vdV"),P=a("JywU"),k=a("mGHB"),O=a("XpkB"),F=a("J7yX"),E=Object(l.db)({marginLeft:25}),T=Object(l.db)({marginLeft:20}),w=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).datastoreClient=void 0,r.loadedDatastoresMap=new Map,r.loadDatastoreList=function(){var e=Object(s.a)(n.a.mark((function e(t){var a,s,o,i,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({loading:!0}),t.orderBy&&(a=t.orderBy.columnName,s=!t.orderBy.descending),r.datastoreClient.abort(),e.next=5,r.datastoreClient.getDatastorePage({count:t.itemsPerPage,continuationToken:t.continuationToken,searchText:t.filter,orderBy:a,orderByAsc:s,includeSecret:!0,datastoreTypes:r.props.allowedDatastoreTypes});case 5:return o=e.sent,i={data:[],continuationToken:void 0,hasError:!0},o.status===D.a.Ok&&o.data?(c=o.data.value||[],r.props.disableAzureMlGlobalDatasets&&(c=c.filter((function(e){return e.name&&"azureml_globaldatasets"!==e.name}))),c.forEach((function(e){return r.loadedDatastoresMap.set(e.name||"",e)})),i={hasError:!1,data:c.map((function(e){return{name:e.name||"",datastoreType:Object(k.b)(e.dataStoreType),storageAccountName:e.azureStorageSection&&e.azureStorageSection.accountName||e.azureDataLakeSection&&e.azureDataLakeSection.storeName||""}})),continuationToken:o.data.continuationToken}):o.status===D.a.Error&&r.props.messageContext.addMessage(P.a.addErrorCodeAndIsUserError("DatastoreSelectLazyList LoadDatastoreList",Object(F.a)(o.error,O.b.Data.Common.ErrorTitlePlaceholder))),r.setState({loading:!1}),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.refresh=function(){r.loadedDatastoresMap.clear(),r.setState({listRefreshToken:{}})},r.confirmSelection=function(){r.props.onSelect(r.state.selectedDatastore)},r.onSelect=function(e){var t,a=e&&e.length&&e[0].name||void 0;a&&(t=r.loadedDatastoresMap.get(a)),r.setState({selectedDatastore:t})},r.renderName=function(e,t){return r.props.defaultDatastore&&r.props.defaultDatastore.name===t.name?"".concat(t.name," (").concat(O.b.Data.Common.Default,")"):t.name},r.datastoreClient=new S.a(e.authContext,e.workspaceContext),r.state={loading:!1,listRefreshToken:{},selectedDatastore:void 0},r}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.loading?O.b.Data.Common.LoadingWithoutEllipsis:void 0,t=this.props.disabled?d.c.none:d.c.single,a=this.props.disabled||void 0===this.state.selectedDatastore,r=[{key:"refresh",text:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Datastore.Refresh.Text,title:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Datastore.Refresh.Title,iconProps:{iconName:f.a.Refresh},onClick:this.refresh,disabled:this.props.disabled}];return h.a.createElement("div",{id:"datastore-list-table",style:{height:"100%"}},h.a.createElement(g.a,{commandItems:r,columns:this.getColumns(),selectionMode:t,onSelect:this.onSelect,itemsPerPage:5,prefetchCount:1,loadingMessage:e,noResourcesName:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Datastore.ResourceName,noResourcesIconName:f.a.Table,getDataPage:this.loadDatastoreList,refreshToken:this.state.listRefreshToken,disableSearchBox:this.props.disabled,disablePaginationButtons:this.props.disabled}),h.a.createElement(b.a,{onClick:this.confirmSelection,className:E,text:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.SelectDatastoreText,primary:!0,disabled:a}),h.a.createElement(b.a,{onClick:this.props.onCancel,text:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.CancelButtonText,primary:!1,className:T,disabled:a}))}},{key:"componentWillUnmount",value:function(){this.datastoreClient.dispose()}},{key:"componentDidUpdate",value:function(e){this.props.refreshToken!==e.refreshToken&&this.refresh()}},{key:"getColumns",value:function(){return[{header:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Datastore.Columns.Name,field:"name",render:this.renderName,minWidth:150,maxWidth:250},{header:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Datastore.Columns.DatastoreType,field:"datastoreType",minWidth:50,maxWidth:150,columnActionsMode:p.b.disabled},{header:O.b.Data.DatasetCreateFromDatastore.Steps.DatastoreSelectionStep.Fields.Datastore.Columns.StorageAccountName,field:"storageAccountName",minWidth:50,maxWidth:200,columnActionsMode:p.b.disabled}]}}]),a}(h.a.Component),j=Object(v.a)(Object(C.a)(Object(y.a)(w)))},zGTc:function(e,t){},zLcY:function(e,t){},zQGN:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var r=a("VtSi"),n=a.n(r),s=a("QsI/"),o=a("9fIP"),i=a("MMYH"),c=a("8K1b"),u=a("AqVP"),l=a("ERkP"),d=a.n(l),p=a("67aH"),m=a("BfBe"),h=a("oziZ"),f=a("D0BB"),g=a("7vdV"),b=a("JywU"),D=a("XpkB"),S=a("J7yX"),v=a("7Agw"),C=function(e){var t,a="AmlCompute"===(null===(t=e.properties)||void 0===t?void 0:t.computeType)?D.b.Compute.MachineLearningCompute:D.b.Compute.ComputeInstance;return"".concat(e.name||""," (").concat(a,")")},y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).workspaceClient=void 0,r.onComputeSelected=function(e,t){t&&r.props.onComputeSelected(t.data)},r.loadComputes=Object(s.a)(n.a.mark((function e(){var t,a,s=arguments;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(s.length>0&&void 0!==s[0])||s[0],r.setState({loading:!0}),r.props.onComputesLoadingStarted&&r.props.onComputesLoadingStarted(),a=r.props.workspaceContext,e.next=6,r.workspaceClient.getComputes(a.subscriptionId,a.resourceGroupName,a.workspaceName,t);case 6:e.sent.serviceResponses.subscribe((function(e){if(e.status===p.a.Ok){r.props.onAllComputesLoaded&&r.props.onAllComputesLoaded(e.data||[]);var t=r.filterComputes(e.data||[]);r.setState({loading:!1,computes:t}),r.props.onComputesLoaded&&r.props.onComputesLoaded(t)}else e.status===p.a.Error&&(r.props.messageContext.addMessage(b.a.addErrorCodeAndIsUserError("SelectCompute LoadComputes",Object(S.a)(e.error,D.b.Data.Common.ErrorTitlePlaceholder))),r.props.onComputesLoadError&&r.props.onComputesLoadError()),r.setState({loading:!1})}));case 8:case"end":return e.stop()}}),e)}))),r.refreshComputes=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.loadComputes(!1);case 2:case"end":return e.stop()}}),e)}))),r.workspaceClient=new m.b(r.props.authContext),r.state={computes:[],loading:!1},r}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadComputes()}},{key:"componentWillUnmount",value:function(){this.workspaceClient.dispose()}},{key:"componentDidUpdate",value:function(e){this.props.doRefresh&&!e.doRefresh&&this.loadComputes(!1)}},{key:"render",value:function(){var e=this.props.disabled||this.state.loading,t=this.props.label||D.b.Data.SelectCompute.Title,a=this.mapComputesToDropdownOptions(this.state.computes),r=this.getSelectedComputeOptionKey(this.props.selectedCompute,a);return d.a.createElement(v.a,{options:a,onChange:this.onComputeSelected,loading:this.state.loading,disabled:e,onRefresh:this.refreshComputes,containerClassName:this.props.className,label:t,loadingMessage:D.b.Data.SelectCompute.Loading,selectedKey:r,createTitle:this.props.createTitle,onCreate:this.props.onCreate,onRenderLabel:this.props.onRenderLabel})}},{key:"mapComputesToDropdownOptions",value:function(e){return e.map((function(e){return{key:e.id||"",text:C(e),data:e,disabled:e.properties&&("Updating"===e.properties.provisioningState||"Creating"===e.properties.provisioningState)}}))}},{key:"getSelectedComputeOptionKey",value:function(e,t){if(e){var a=t.filter((function(t){return!!(t&&t.data&&t.data.name)&&t.data.name===e}));return 1===a.length?a[0].key:void 0}}},{key:"filterComputes",value:function(e){var t=new RegExp(this.props.vmSizeFilter||".*","i"),a=new Set(["Updating","Creating","Succeeded"]);return e.filter((function(e){return e.properties&&("AmlCompute"===e.properties.computeType||"ComputeInstance"===e.properties.computeType)&&e.properties.provisioningState&&a.has(e.properties.provisioningState)&&t.test(e.properties.properties&&e.properties.properties.vmSize||"")}))}}]),a}(d.a.Component),P=Object(h.a)(Object(f.a)(Object(g.a)(y)))},zWVw:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var r=a("9fIP"),n=a("MMYH"),s=a("8K1b"),o=a("AqVP"),i=a("ERkP"),c=a("/58v"),u=a("1vim"),l=a("XpkB"),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(n.a)(a,[{key:"render",value:function(){return i.createElement(c.a,{name:"storeName",label:l.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.StoreNameField.label,required:!0,disabled:this.props.disabled})}}],[{key:"validate",value:function(e){return u.a.isRequired(e,l.b.Datastore.DatastoreEditPage.AzureDataLakeGen1.StoreNameField.ValidationErrors.Required)}}]),a}(i.Component)}}]);
//# sourceMappingURL=18.5e8e4cdf.chunk.js.map