(this["webpackJsonp@mlworkspace/portal"]=this["webpackJsonp@mlworkspace/portal"]||[]).push([[22],{"/JCz":function(e,t,r){"use strict";r.d(t,"a",(function(){return oe}));var o,n=r("zygG"),a=r("Czhu"),i=r("ERkP"),l=r("SnOo"),c=r("ctLR"),u=r("+/5p"),s=r("d0G4"),p=r("R0tI"),m=r("d0cs"),d=function(e){var t=e.onClick,r=e.disabled,o=Object(m.cb)({buttonContent:{display:"inline",whiteSpace:"nowrap"},filterIcon:{fontSize:"11px",verticalAlign:"sub"},plusIcon:{fontSize:"9px",verticalAlign:"super"},iconGroup:{display:"flex",flexFlow:"row nowrap",alignItems:"flex-start",justifyContent:"flex-start"},labelText:{fontSize:"13px",paddingLeft:"4px",whiteSpace:"nowrap"}});return i.createElement(s.a,{buttonStyle:!0},i.createElement(p.a,{onClick:t,disabled:r},i.createElement("div",{className:o.buttonContent,"data-automation-id":"addFilterButton"},i.createElement(c.a,{variant:"smallPlus"},i.createElement(u.a,{iconName:"CalculatorAddition",className:o.plusIcon}),i.createElement(u.a,{iconName:"Filter",className:o.filterIcon}),i.createElement("span",{className:o.labelText},l.b.Common_AddFilterButton||"Add filter")))))},y=r("++H6"),b=r("8Zff"),f=r("1eWE"),C=r("nsO7"),h=r("2h71"),_=r("fGyu"),g=r("VwRl"),v=r("NFS1"),F=r("RF/u"),k=r("qwrX"),O=r("Bq8q"),Q=k.b.Sunday,x={months:[l.b.Common_DateFilterQuery_January,l.b.Common_DateFilterQuery_February,l.b.Common_DateFilterQuery_March,l.b.Common_DateFilterQuery_April,l.b.Common_DateFilterQuery_May,l.b.Common_DateFilterQuery_June,l.b.Common_DateFilterQuery_July,l.b.Common_DateFilterQuery_August,l.b.Common_DateFilterQuery_September,l.b.Common_DateFilterQuery_October,l.b.Common_DateFilterQuery_November,l.b.Common_DateFilterQuery_December],shortMonths:[l.b.Common_DateFilterQuery_Jan,l.b.Common_DateFilterQuery_Feb,l.b.Common_DateFilterQuery_Mar,l.b.Common_DateFilterQuery_Apr,l.b.Common_DateFilterQuery_Mai,l.b.Common_DateFilterQuery_Jun,l.b.Common_DateFilterQuery_Jul,l.b.Common_DateFilterQuery_Aug,l.b.Common_DateFilterQuery_Sep,l.b.Common_DateFilterQuery_Oct,l.b.Common_DateFilterQuery_Nov,l.b.Common_DateFilterQuery_Dec],days:[l.b.Common_DateFilterQuery_Sunday,l.b.Common_DateFilterQuery_Monday,l.b.Common_DateFilterQuery_Tuesday,l.b.Common_DateFilterQuery_Wednesday,l.b.Common_DateFilterQuery_Thursday,l.b.Common_DateFilterQuery_Friday,l.b.Common_DateFilterQuery_Saturday],shortDays:[l.b.Common_DateFilterQuery_Sun,l.b.Common_DateFilterQuery_Mon,l.b.Common_DateFilterQuery_Tue,l.b.Common_DateFilterQuery_Wed,l.b.Common_DateFilterQuery_Thu,l.b.Common_DateFilterQuery_Fri,l.b.Common_DateFilterQuery_Sat],goToToday:l.b.Common_DateFilterQuery_GoToToday,prevMonthAriaLabel:l.b.Common_DateFilterQuery_GoToPreviousMonth,nextMonthAriaLabel:l.b.Common_DateFilterQuery_GoToNextMonth,prevYearAriaLabel:l.b.Common_DateFilterQuery_GoToPrevYear,nextYearAriaLabel:l.b.Common_DateFilterQuery_GoToNextYear,closeButtonAriaLabel:l.b.Common_DateFilterQuery_CloseDatePicker},D=function(e){var t=e.query,r=e.onChange,o=e.calloutId,n=function(e){var t=e.query;return function(){return{textField:{height:"23px",selectors:{"& input":Object(a.a)({},t?{}:{fontStyle:"italic"}),"& i[data-icon-name='Calendar']":{top:"3px",paddingTop:0,paddingBottom:0,paddingLeft:0},"& .ms-TextField-fieldGroup":{height:"23px !important"}}}}}}(e),c=i.useCallback((function(e){e&&r(e)}),[r]);return i.createElement(O.a,{firstDayOfWeek:Q,strings:x,ariaLabel:l.b.Common_DateFilterQuery_SelectDate,onSelectDate:c,borderless:!0,value:t,allowTextInput:!0,calloutProps:{id:o},styles:n})},w=r("QdS/"),E=function(e){return i.useCallback((function(t){switch(t.key){case"Enter":case"Return":e(t)}}),[e])},S=function(e){var t=function(e){var t=e.query,r=e.error,o=Object(m.X)();return{fieldGroup:{height:"23px",border:"none"},field:Object(a.a)(Object(a.a)({},t&&""!==String(t)?{}:{fontStyle:"italic"}),r?{color:o.palette.red}:{})}}(e),r=e.query,o=e.placeholder,n=e.unit,l=e.onChange,c=e.onFinish,u=e.ariaLabel,s=i.useCallback(function(e){return function(t,r){t.preventDefault(),e(r)}}(l),[l]),p=i.useCallback((function(){c(r)}),[c,r]);return i.createElement(w.a,{styles:t,suffix:n,value:String(r||""),placeholder:o,ariaLabel:u,onChange:s,onKeyUp:E(p),onBlur:p})},j=/^((-?)(\d+)([.,](\d+))?)?$/,T=function(e,t){return function(r){if("string"!==typeof r)throw new Error("unexpected non-string returned from TextFieldFilterQuery!");if((o=r)?""===o:o)return t(""),void e();var o,n=Number(r);isNaN(n)?t(r):(t(r),e(n))}},q=function(e){var t=e.onChange,r=e.onFinish,o=i.useState(e.query?"".concat(e.query):""),a=Object(n.a)(o,2),l=a[0],c=a[1],u=!j.test(l),s=T(t,c),p=T(r,c);return i.createElement(S,Object.assign({},e,{query:l,onChange:s,onFinish:p,error:u}))},A=function(e){return i.createElement(S,e)},I=r("YmqU"),N=function(e){var t=i.useState(e.query||[]),r=Object(n.a)(t,2),o=r[0],l=r[1],c=e.onChange,u=e.onFinish,s=e.useInputAsDropdownWidth,p=e.gate,m=s?{}:{callout:{selectors:{"&.ms-Dropdown-callout":{width:"auto"}}}},d=Object(a.a)({dropdown:{height:"23px",border:"none"},title:{height:"23px",minWidth:"147px",border:"none"}},m),y=e.options||[],b=i.useCallback((function(e){return!!p&&p(e)}),[p]),f=i.useCallback((function(e){l(e),c(e)}),[l,c]),C=i.useCallback((function(){b(!0)}),[b]),h=i.useCallback((function(){u(o),b(!1)}),[o,u,b]);return i.createElement(I.a,{styles:d,options:y,onChange:f,onBlur:h,onFocus:C,onClick:C,onDismiss:h,onKeyUp:E(h),selectedKeys:o})},B=function(e){switch(e.kind){case y.a.textual:return i.createElement(A,e);case y.a.numeric:return i.createElement(q,e);case y.a.temporal:return i.createElement(D,e);case y.a.vector:return i.createElement(N,e)}throw new Error("FilterQuery display component called on FilterQuery of unknown kind or type")},L=r("1/b5"),M="23px";!function(e){e[e.setTopic=0]="setTopic",e[e.setOperator=1]="setOperator",e[e.setQuery=2]="setQuery",e[e.setFilter=3]="setFilter"}(o||(o={}));var W={topic:{text:"",key:"",kind:y.a.textual},operator:{text:"",key:""},query:void 0};var R=function(e){var t=e.topic,r=e.operator,o=e.query;return{hasTopic:Boolean(t&&t.key&&""!==t.key),hasOperator:Boolean(r&&r.key&&""!==r.key),hasQuery:Array.isArray(o)?!!o.length:Boolean(void 0!==o&&""!==o)}},P=function(e){return function(t){return e.find(function(e){return function(t){var r=t.key;return e===r}}(t))}},G=function(e){return function(t){var r=t.kinds,o=t.key,n=e.kind,a=e.unsupportedOperators,i=e.supportedOperators,l=!0,c=!0;return r&&r.length>0&&(l=r.findIndex((function(e){return n===e}))>=0),a&&a.length>0&&(c=-1===a.findIndex((function(e){return o===e}))),i&&i.length>0&&(c=-1!==i.findIndex((function(e){return o===e}))),l&&c}},K=function(e){var t=e.onCancel,r=e.onSave,o=e.onTopicChange,l=e.onOperatorChange,c=e.onQueryChange,u=e.onChange,s=e.onUpdate,p=e.filter,m=i.useState(p||W),d=Object(n.a)(m,2),C=d[0],h=d[1],_=i.useRef(!1),g=e.topics,v=i.useMemo((function(){return e.operators.filter(G(C.topic))}),[C.topic,e.operators]),F=i.useCallback(P(g),[g]),k=i.useCallback(P(v),[v]),O=i.useCallback((function(e){return void 0!==e&&(_.current=e),_.current}),[]);return{topics:g,operators:v,state:C,handleTopicChange:function(t){var r=F(t),n=C.operator,a=C.query;if(r){r.kind!==C.topic.kind&&(a=function(e,t){switch(t){case void 0:case null:case"":return}try{return Object(y.b)(e)(t)}catch(r){return}}({incoming:r.kind,current:C.topic.kind},C.query)),e.resetQueryOnTopicChange&&(a=void 0);var i=G(r);if(!n||!n.key||!i(C.operator)){var l=e.operators.filter(G(r));n=e.autoSelectOperator&&l&&l.length>0?l[0]:W.operator}o&&o(r),u&&u({topic:r,operator:n,query:a}),h({topic:r,operator:n,query:a})}},handleOperatorChange:function(e){var t=k(e),r=C.topic,o=C.query;t&&(l&&l(t),u&&u({topic:r,operator:t,query:o}),h({topic:r,operator:t,query:o}))},handleQueryChange:function(e){var t=C.operator,r=C.topic;c&&c(e),u&&u({topic:r,operator:t,query:e}),h({topic:r,operator:t,query:e})},handleFinish:function(e){if(function(e){var t=R(e),r=t.hasTopic,o=t.hasOperator,n=t.hasQuery;return!!(r&&o&&n)}(e))s&&s(Object(a.a)(Object(a.a)({},e),{},{id:p?p.id:void 0})),r(e);else{if(function(e){var t=R(e),r=t.hasTopic,o=t.hasOperator,n=t.hasQuery;return!(!r||!o&&!n)}(e))return;t(e)}b.a.trackEvent(f.a.Components_FilterComposer_Closed)},gate:O}},z=function(e){var t=K(e),r=t.topics,o=t.operators,n=t.state,c=t.handleTopicChange,u=t.handleOperatorChange,s=t.handleQueryChange,p=t.handleFinish,d=t.gate,y=function(e){var t=Object(m.X)().palette.neutralQuaternary;return{classNames:Object(m.cb)({root:Object(a.a)(Object(a.a)({display:"flex",borderRadius:"22px"},L.a.normal),{},{padding:"3px 13px",justifyContent:"flex-start",alignItems:"flex-start",borderColor:t}),topic:Object(a.a)(Object(a.a)({marginRight:"5px",height:M},L.a.normal),{},{borderColor:t}),operator:Object(a.a)(Object(a.a)({marginRight:"5px",height:M},L.a.normal),{},{borderColor:t}),query:Object(a.a)(Object(a.a)({height:M},L.a.normal),{},{borderColor:t})}),topicStyles:{input:Object(a.a)({height:M,border:"none"},""===e.topic.key&&{fontStyle:"italic"}),root:{height:M,border:"none"}},topicCaretDownButtonStyles:{root:{height:M,top:"unset"}},operatorStyles:{dropdown:{height:M},title:{lineHeight:M,height:M,border:"none"},caretDownWrapper:{lineHeight:M}}}}(n),k=y.classNames,O=y.topicStyles,Q=y.topicCaretDownButtonStyles,x=y.operatorStyles,D="combobox-callout-".concat(C.uniqueId()),w="dropdown-callout-".concat(C.uniqueId()),E="filterquery-callout-".concat(C.uniqueId());i.useEffect((function(){b.a.trackEvent(f.a.Components_FilterComposer_Rendered)}),[]);var S=i.useCallback((function(e){e.preventDefault(),p(n)}),[p,n]),j=i.useCallback((function(e){p(Object(a.a)(Object(a.a)({},n),{},{query:e}))}),[p,n]),T=function(e,t,r,o){var n=i.useRef(null),a=function r(a){var i=[n.current].concat(Object(_.a)((t||[]).map((function(e){return document.getElementById(e)}))));if(!o||!o()){var l,c=Object(h.a)(i);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u&&u.contains(a.target))return}}catch(s){c.e(s)}finally{c.f()}e(a),document.body.removeEventListener("mousedown",r)}};return i.useEffect((function(){return document.body.addEventListener("mousedown",a),function(){document.body.removeEventListener("mousedown",a)}}),r),n}(S,[D,w,E],[S],d),q=l.b.Common_FilterComposer_TopicPlaceholder,A=l.b.Common_FilterComposer_OperatorPlaceholder,I=e.resetQueryOnTopicChange?{key:"polymor-filter-query-".concat(n.topic.key,"-").concat(n.operator.key)}:{};return i.createElement("div",{className:k.root,ref:T,id:"FilterComposer--root","data-automation-id":"filterComposer"},i.createElement("div",{className:k.topic,id:"FilterComposer--topic"},i.createElement(v.a,{options:r,onOptionSelection:c,selectedKey:n.topic.key,focusOnInitially:!0,placeholder:q,comboBoxCalloutId:D,ariaLabel:l.b.Common_FilterComposer_TopicAriaLabel,styles:O,caretDownButtonStyles:Q,telemetryKey:g.a.FilterTopic})),i.createElement("div",{className:k.operator,id:"FilterComposer--operator"},i.createElement(F.a,{options:o,selectedKey:n.operator.key,onChange:u,styles:x,placeholder:A,dropdownWidth:150,dropdownCalloutId:w,ariaLabel:l.b.Common_FilterComposer_OperatorAriaLabel,telemetryKey:g.a.FilterOperator})),i.createElement("div",{className:k.query,id:"FilterComposer--query"},i.createElement(B,Object.assign({},I,{kind:n.topic.kind,options:n.topic.options,query:n.query,ariaLabel:l.b.Common_FilterComposer_QueryAriaLabel,onChange:s,onFinish:j,calloutId:E,gate:d,unit:n.topic.unit,useInputAsDropdownWidth:e.useInputAsQueryDropdownWidth}))))},J=r("kjXB"),Y=r("wgY5"),U=r.n(Y),X=r("s+9k"),H={paddingLeft:"3px",whiteSpace:"nowrap"},V=function(e){var t=e.theme;return{root:{display:"flex",justifyContent:"flex-start",alignItems:"center",flex:"row nowrap",fontSize:"13px",color:t.palette.neutralDark},cancelButton:{border:"none",background:"inherit",color:t.palette.neutralSecondary},topicText:Object(a.a)({},H),operatorText:Object(a.a)({},H),queryText:Object(a.a)({},H)}},Z=function(e){var t=e.filter,r=e.onCancel,o=e.onClick,n=e.styles,a=e.renderQuery,u=i.useContext(J.a),d=Object(m.I)({theme:u.themeStyles},V,n),b=d.subComponentStyles,f=(b=void 0===b?{pill:void 0}:b).pill,C=Object(m.cb)(d),h=t.topic,_=t.operator,g=t.query,v=i.useMemo((function(){return a?a(h,g):g instanceof Date?U()(g).format("lll"):g instanceof Array?g.join(", "):h.kind===y.a.numeric&&h.unit?"".concat(g).concat(h.unit):g}),[h,g,a]),F=i.useCallback((function(){r&&r(t)}),[t,r]),k=i.useCallback((function(){o&&o(t)}),[t,r]),O="".concat(l.b.Common_Cancel," ").concat(h.text," ").concat(_.text," ").concat(t.query);return i.createElement(s.a,{styles:f,buttonStyle:!0},i.createElement(p.a,{onClick:k},i.createElement("div",{className:C.root},i.createElement("div",{className:C.topicText},i.createElement(c.a,{variant:"smallPlus"},h.text)),i.createElement("div",{className:C.operatorText},i.createElement(c.a,{variant:"smallPlus"},_.text)),i.createElement("div",{className:C.queryText},i.createElement(c.a,{variant:"smallPlus"},v)))),i.createElement(p.a,{onClick:F,className:C.cancelButton,"aria-label":O,"data-automation-id":"cancelButton"},i.createElement(X.a,{styles:{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},name:"statusErrorFull"})))},$=r("2D+B"),ee=r("iqvN"),te=function(e){var t=e.onChange,r=e.options,o=e.selectedKey,n=i.useCallback((function(e){if(t&&e){var r=e.key.toString();t(r)}}),[t]),l=function(){var e=Object(m.X)(),t=e.semanticColors.buttonBorder,r=e.palette.white,o=e.palette.black,n=e.palette.black;return Object(m.cb)({pillContainer:{border:"none",selectors:{"> div":{border:"none"}}},dropdownContainer:Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},ee.b),ee.a),L.a.normal),{},{width:"auto",fontSize:"13px",backgroundColor:r,color:o,borderColor:t,selectors:{"&:active":{color:n}}}),dropdown:{selectors:{span:{border:"none",fontSize:"12px",fontWeight:400,height:"auto",lineHeight:"18px"}}}})}();return i.createElement("div",{className:l.pillContainer},i.createElement(s.a,null,i.createElement("div",{className:l.dropdownContainer},i.createElement($.a,{options:r,required:!1,onChanged:n,selectedKey:o,defaultSelectedKey:o,className:l.dropdown}))))},re=function(e){var t,r=e.topic,o=e.operator,n=e.query,a=e.id;return a||"".concat(r.key,"-").concat(o.key,"-").concat((t=String(n),Array.prototype.reduce.bind(t)((function(e,t){return 37*e^t.charCodeAt(0)}),1279)>>>0))},oe=function(e){var t=e.topics,r=e.operators,o=e.filters,l=e.onAddFilter,c=e.onRemoveFilter,u=e.onChangeFilter,s=e.limitFilterProps,p=i.useState(!1),b=Object(n.a)(p,2),f=b[0],C=b[1],h=i.useMemo((function(){return function(e){return e.reduce((function(e,t){var r=re(t);return e.set(re(t),Object(a.a)(Object(a.a)({},t),{},{id:r}))}),new Map)}(o)}),[o]),_=Object(m.cb)({root:{display:"flex",flexFlow:"row wrap",alignItems:"center",margin:"4px"},part:{paddingRight:"8px"}}),g=i.useCallback((function(e){e.preventDefault(),C(!0)}),[C]),v=i.useCallback((function(){C(!1)}),[]),F=i.useCallback((function(e){var t=e.id||re(e);C(!1),l&&l(Object(a.a)(Object(a.a)({},e),{},{id:t}))}),[o,l]),k=i.useCallback((function(){C(!1)}),[C]),O=i.useCallback((function(e){return function(){C(!1),h.set(e.id,e)}}),[C,u,h]),Q=i.useCallback((function(e){return function(){C(e.id)}}),[C]),x=i.useCallback((function(e){c&&c(e)}),[c]),D=i.useCallback((function(o){var n=e.renderQuery;return i.createElement("div",{className:_.part,key:o.id},f===o.id?i.createElement(z,{filter:o,onCancel:k,onSave:O(o),onUpdate:u,topics:t,operators:r,autoSelectOperator:e.autoSelectOperator,useInputAsQueryDropdownWidth:e.useInputAsQueryDropdownWidth,resetQueryOnTopicChange:e.resetQueryOnTopicChange}):i.createElement(Z,{filter:o,renderQuery:n,onClick:Q(o),onCancel:x}))}),[c,f,e.autoSelectOperator,e.useInputAsQueryDropdownWidth,e.resetQueryOnTopicChange]),w=i.useCallback((function(){return Array.from(h.values()).map(D)}),[o,c,f]),E=i.useMemo((function(){var e={topic:t.length?t[0]:{text:"",key:"",kind:y.a.textual},operator:r.length?r[0]:{text:"",key:""},query:void 0};return Object(a.a)(Object(a.a)({},e),{},{id:re(e)})}),[t,r]);return i.createElement("div",{className:_.root,"data-automation-id":"filterBar"},s&&i.createElement(te,s),w(),!0===f?i.createElement(z,{topics:t,filter:E,operators:r,autoSelectOperator:e.autoSelectOperator,useInputAsQueryDropdownWidth:e.useInputAsQueryDropdownWidth,resetQueryOnTopicChange:e.resetQueryOnTopicChange,onCancel:v,onSave:F}):i.createElement(d,{onClick:g,disabled:!!f}))}},VwRl:function(e,t,r){"use strict";var o;r.d(t,"a",(function(){return o})),function(e){e.FilterTopic="FilterTopic",e.FilterOperator="FilterOperator",e.PageSelector="PageSelector"}(o||(o={}))}}]);
//# sourceMappingURL=22.4b17c8d8.chunk.js.map