(this["webpackJsonp@mlworkspace/portal"]=this["webpackJsonp@mlworkspace/portal"]||[]).push([[35],{MH99:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var n=r("VtSi"),a=r.n(n),s=r("Czhu"),i=r("QsI/"),c=r("9fIP"),u=r("pWxA"),o=r("PRnZ"),p=r("sRHE"),h=r("MMYH"),l=r("8K1b"),d=r("AqVP"),f=r("yiDG"),m=r("PXFs"),v=r("MbcJ"),k=r("LEyp"),b=r("/kVs"),y=r("AE/o"),g=r("ERkP"),w=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).context=f.d,e}return r}(r.n(g).a.Component);function x(e){return"Automl_".concat(e,"_Load")}w.contextType=f.a;var I=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(c.a)(this,r),(n=t.call(this,e)).context=f.d,n.getData=void 0,n.getServiceErrorMsg=void 0,n.dependentComponents=void 0,n.upstreamDependencyTelemetry=void 0,n.ignoreSLA=!0,n.scenarioCustomFields=void 0,n.autoRefreshInMs=void 0,n.refreshTimeOut=void 0,n.autoRefreshFailed=0,n.mounted=!1,n._autoRefreshEnabled=void 0,n.trackingId=void 0,n.pendingWork=void 0,n.refresh=Object(i.a)(a.a.mark((function e(){var t,r,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(i.length>0&&void 0!==i[0])||i[0],n.mounted){e.next=3;break}return e.abrupt("return");case 3:if(n.cancelScenarioTracking(),n.startScenarioTracking(),!n.getData){e.next=12;break}return m.a.log("".concat(n.props.scenarioContext.name," getData. refresh: ").concat(t)),e.next=9,n.fetchData(n.getData);case 9:r=e.sent,e.next=13;break;case 12:r={status:v.b.Success};case 13:n.props.scenarioContext.updateScenarioProperties({IgnoreSLA:n.ignoreSLA,customFields:Object(s.a)(Object(s.a)({},n.scenarioCustomFields),{},{isRefresh:t})}),n.pendingWork.complete(r),n.stopScenarioTracking(r,t);case 16:case"end":return e.stop()}}),e)}))),n.setState=n.setState.bind(Object(u.a)(n)),n.refresh=n.refresh.bind(Object(u.a)(n)),n.changeAutoRefresh=n.changeAutoRefresh.bind(Object(u.a)(n)),n.pendingWork=n.props.scenarioContext.registerPendingWork("".concat(n.props.scenarioContext.name,"_GetData")),n}return Object(h.a)(r,[{key:"autoRefreshEnabled",get:function(){return this._autoRefreshEnabled}}]),Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.autoRefreshFailed=0,this.mounted=!0,e.next=4,this.refresh(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.cancelScenarioTracking(),this.mounted=!1,clearTimeout(this.refreshTimeOut)}},{key:"setState",value:function(e,t){this.mounted&&Object(o.a)(Object(p.a)(r.prototype),"setState",this).call(this,e,t)}},{key:"changeAutoRefresh",value:function(e){this.autoRefreshInMs&&(clearTimeout(this.refreshTimeOut),this.mounted&&(e&&(this.refreshTimeOut=window.setTimeout(this.refresh.bind(this),this.autoRefreshInMs)),this._autoRefreshEnabled=e))}},{key:"startScenarioTracking",value:function(){var e=x(this.props.scenarioContext.name);this.upstreamDependencyTelemetry&&this.trackScenario(this.upstreamDependencyTelemetry,!0,[e]),this.dependentComponents?this.trackScenario(e,!0,this.dependentComponents.map(x),{IgnoreSLA:this.ignoreSLA}):this.trackingId=this.trackScenario(e,!1)}},{key:"trackScenario",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,a=this.props.scenarioContext.registerPendingWork(e);return t?k.a.trackScenarioWithDependencies(a,r,void 0,n):k.a.startTracking(a)}},{key:"cancelScenarioTracking",value:function(){this.trackingId&&(k.a.stopTracking(this.trackingId,{status:v.b.Cancelled,IgnoreSLA:this.ignoreSLA,customFields:this.scenarioCustomFields}),this.trackingId=void 0)}},{key:"stopScenarioTracking",value:function(e,t){this.dependentComponents||this.trackingId&&(k.a.stopTracking(this.trackingId,Object(s.a)(Object(s.a)({},e),{},{IgnoreSLA:this.ignoreSLA,customFields:Object(s.a)(Object(s.a)({},this.scenarioCustomFields),{},{isRefresh:t})})),this.trackingId=void 0)}},{key:"fetchData",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this.refreshTimeOut),r={status:v.b.Success},e.next=4,t().then((function(){n.autoRefreshFailed=0})).catch(Object(b.a)({handlers:{onCanceled:function(){r={status:v.b.Cancelled}},onRestCallError:function(){n.autoRefreshFailed++>=2&&n.changeAutoRefresh(!1),r={status:v.b.Failure}}},emitMessage:{messageContext:this.context,title:this.getServiceErrorMsg?this.getServiceErrorMsg():y.b.Components.BaseComponent.GetDataError}}));case 4:return this.mounted&&this._autoRefreshEnabled&&this.autoRefreshInMs&&(clearTimeout(this.refreshTimeOut),this.refreshTimeOut=window.setTimeout(this.refresh.bind(this),this.autoRefreshInMs)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(w);I.contextType=f.a},OgZh:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("VtSi"),a=r.n(n),s=r("QsI/"),i=r("Czhu"),c=r("9fIP"),u=r("MMYH"),o=r("8K1b"),p=r("AqVP"),h=r("io3C"),l=function(e){Object(o.a)(r,e);var t=Object(p.a)(r);function r(e){return Object(c.a)(this,r),t.call(this,e,(function(t,r){return new h.a(t,Object(i.a)(Object(i.a)({},r),{},{baseUri:e.workspaceContext.discoveryUrls.modelmanagement}))}))}return Object(u.a)(r,[{key:"createAsset",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=6;break}if(void 0!==n){e.next=3;break}throw new Error("Failed to create asset, nameOrAsset is type string but there is no url. nameOrAsset: ".concat(t,", url: ").concat(n));case 3:return e.abrupt("return",this.client.assets.create(this.subscriptionId,this.resourceGroupName,this.workspaceName,{artifacts:[{prefix:new URL(n).pathname.replace(/^\/azureml\//,"")}],name:name,description:r}));case 6:return e.abrupt("return",this.client.assets.create(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getDeployStatus",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.abrupt("return",this.client.operations.get(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllModels",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r,n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAllValuesWithNextLink((function(){return n.client.mLModels.listQuery(n.subscriptionId,n.resourceGroupName,n.workspaceName,{runId:t,orderby:"CreatedAtDesc"})}),(function(e){return n.client.mLModels.listQueryNext(e)}));case 2:if(!((r=e.sent).length<1)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPaginatedModels",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n,s,i){var c,u,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o.length>5&&void 0!==o[5]?o[5]:150,u=o.length>6?o[6]:void 0,e.abrupt("return",this.client.mLModels.listQuery(this.subscriptionId,this.resourceGroupName,this.workspaceName,{runId:t,skipToken:u,count:c,orderBy:"UpdatedAtDesc",tags:n,name:r,datasetId:s,properties:i}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a,s){return e.apply(this,arguments)}}()},{key:"getAllDeploymentsById",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.services.listQuery(this.subscriptionId,this.resourceGroupName,this.workspaceName,{runId:t,orderby:"CreatedAtDesc"});case 2:if(!((r=e.sent).length<1)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDeploymentLogs",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.services.getLogs(this.subscriptionId,this.resourceGroupName,this.workspaceName,t,{tail:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAssetsByRunIdAndName",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r){var n=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllValuesWithNextLink(function(){var e=Object(s.a)(a.a.mark((function e(s){var i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.getSkipToken(s),e.abrupt("return",n.client.assets.listQuery(n.subscriptionId,n.resourceGroupName,n.workspaceName,{skipToken:i,count:200,runId:t,name:r}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAssetsByName",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllValuesWithNextLink(function(){var e=Object(s.a)(a.a.mark((function e(n){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.getSkipToken(n),e.abrupt("return",r.client.assets.listQuery(r.subscriptionId,r.resourceGroupName,r.workspaceName,{skipToken:s,count:200,name:t}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAssetsByRunId",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllValuesWithNextLink(function(){var e=Object(s.a)(a.a.mark((function e(n){var s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.getSkipToken(n),e.abrupt("return",r.client.assets.listQuery(r.subscriptionId,r.resourceGroupName,r.workspaceName,{skipToken:s,count:200,runId:t}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAssetsByTypeAndProperties",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r,n){var s,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=i.length>3&&void 0!==i[3]?i[3]:150,e.abrupt("return",this.client.assets.listQuery(this.subscriptionId,this.resourceGroupName,this.workspaceName,{assetType:t,properties:r,skipToken:n,count:s,orderby:"UpdatedAtDesc"}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getModelDetails",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.mLModels.queryById(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDeployments",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getAllValuesWithNextLink((function(){return r.client.services.listQuery(r.subscriptionId,r.resourceGroupName,r.workspaceName,{modelId:t,count:150,orderby:"UpdatedAtDesc"})}),(function(e){return r.client.services.listQueryNext(e)})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPaginatedDeployments",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r,n,s=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:150,n=s.length>2?s[2]:void 0,e.abrupt("return",this.client.services.listQuery(this.subscriptionId,this.resourceGroupName,this.workspaceName,{modelId:t,count:r,skipToken:n,orderby:"UpdatedAtDesc"}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDeploymentDetails",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.services.queryById(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDeployment",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.services.deleteMethod(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateServiceName",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.services.validation(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"validateServiceResources",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="AKS"===t.computeType?this.aksResourceValidationPayload(t):this.aciValidationPayload(t),e.abrupt("return",this.client.services.validation1(this.subscriptionId,this.resourceGroupName,this.workspaceName,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerModel",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.mLModels.register(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateModel",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.mLModels.patch(this.subscriptionId,this.resourceGroupName,this.workspaceName,t,[{op:"replace",path:"/kvTags",value:r.tags},{op:"replace",path:"/description",value:r.description}]));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteModel",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.mLModels.deleteMethod(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAsset",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.assets.queryById(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listServiceKeys",value:function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.services.listServiceKeys(this.subscriptionId,this.resourceGroupName,this.workspaceName,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"regenerateServiceKeys",value:function(){var e=Object(s.a)(a.a.mark((function e(t,r){var n,s,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.services.regenerateServiceKeys(this.subscriptionId,this.resourceGroupName,this.workspaceName,t,r);case 2:if(n=e.sent,s=this.parseOperationIdFromLocation(n._response.headers.get("Operation-Location"))){e.next=6;break}throw new Error("No operationId");case 6:return e.next=8,this.waitForCompletion(s);case 8:if("Succeeded"===(i=e.sent)){e.next=11;break}throw new Error("Operation did not succeed, operation state: ".concat(i));case 11:return e.abrupt("return",this.listServiceKeys(t));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getSkipToken",value:function(e){if(e){var t=new URL(e).searchParams.get("$skipToken");if(t)return t}}},{key:"parseOperationIdFromLocation",value:function(e){if(e){var t=new RegExp("\\/operations\\/([a-f0-9\\-]{36})").exec(e);if(t&&!(t.length<=1))return t[1]}}},{key:"waitForCompletion",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r,n,s,i,c,u,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>1&&void 0!==o[1]?o[1]:1e3,n=o.length>2&&void 0!==o[2]?o[2]:3e4,s="Failed",i=n/r,c=0;case 5:if(!(c<i)){e.next=17;break}return e.next=8,this.client.operations.get(this.subscriptionId,this.resourceGroupName,this.workspaceName,t);case 8:if(u=e.sent,"Running"===(s=u.state||"Failed")){e.next=12;break}return e.abrupt("return",s);case 12:return e.next=14,new Promise((function(e){return setTimeout((function(){e(r)}),r)}));case 14:c++,e.next=5;break;case 17:return e.abrupt("return","TimedOut");case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"aksResourceValidationPayload",value:function(e){var t={autoscaleEnabled:e.autoscaleEnabled,minReplicas:e.minReplicas,maxReplicas:e.maxReplicas,targetUtilization:e.targetUtilization,refreshPeriodInSeconds:e.refreshPeriodInSeconds},r={cpu:e.cpu,memoryInGB:e.memoryInGB};return{computeType:"AKS",name:e.name,computeName:e.computeName,numReplicas:e.numReplicas,containerResourceRequirements:r,autoScaler:t}}},{key:"aciValidationPayload",value:function(e){var t={cpu:e.cpu,memoryInGB:e.memoryInGB};return{computeType:"ACI",name:e.name,containerResourceRequirements:t}}}]),r}(r("sIkw").a)}}]);
//# sourceMappingURL=35.25cedd29.chunk.js.map